{"version":3,"file":"Checkbox.js","sources":["../../../../../src/components/Checkbox/Checkbox.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { forwardRef, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { isNil, noop as NOOP } from \"lodash-es\";\nimport Icon from \"../Icon/Icon\";\nimport Check from \"../Icon/Icons/components/Check\";\nimport Remove from \"../Icon/Icons/components/Remove\";\nimport { backwardCompatibilityForProperties } from \"../../helpers/backwardCompatibilityForProperties\";\nimport { useSupportFirefoxLabelClick } from \"./hooks/useSupportFirefoxLabelClick\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport { VibeComponent, VibeComponentProps } from \"../../types\";\nimport { getTestId } from \"../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId } from \"../../tests/constants\";\nimport Text from \"../Text/Text\";\nimport styles from \"./Checkbox.module.scss\";\n\nexport interface CheckBoxProps extends VibeComponentProps {\n  /** A classname to be added to the wrapping element */\n  className?: string;\n  /**\n   * @deprecated - use className instead\n   */\n  componentClassName?: string;\n  /** A classname to be added to the checkbox element label */\n  checkboxClassName?: string;\n  /** A classname to be added to the label element */\n  labelClassName?: string;\n  /** A11y prop to describe the content for screen readers */\n  ariaLabel?: string;\n  /** The content to be rendered within the option */\n  label?: React.ReactNode | Array<React.ReactNode>;\n  /** A11y prop - An Id of an element which describes this option  */\n  ariaLabelledBy?: string;\n  /** callback function when the value changes */\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  /** Use this when you want to control the component, this will set the state of the component  */\n  checked?: boolean;\n  /** An in between state to display a non selected */\n  indeterminate?: boolean;\n  /** is autoFocus */\n  autoFocus?: boolean;\n  /** Set the option to be disabled */\n  disabled?: boolean;\n  /** the default value which the checkbox will start from  */\n  defaultChecked?: boolean;\n  /** The input control's value. When specified in the HTML, this is the initial value, and from then on it can be altered or retrieved at any time using JavaScript to access the respective HTMLInputElement object's value property. The value attribute is always optional, though should be considered mandatory for checkbox, radio, and hidden.l */\n  value?: string;\n  /** A string specifying a name for the input control. This name is submitted along with the control's value when the form data is submitted. */\n  name?: string;\n  /** An id to be added the input element */\n  id?: string;\n  /** Specifies the tab order of the input element */\n  tabIndex?: number;\n}\n\nconst Checkbox: VibeComponent<CheckBoxProps, HTMLInputElement> = forwardRef(\n  (\n    {\n      className,\n      // Backward compatibility for props naming\n      componentClassName,\n      checkboxClassName,\n      labelClassName,\n      ariaLabel,\n      label,\n      ariaLabelledBy,\n      onChange = NOOP,\n      checked,\n      autoFocus,\n      indeterminate = false,\n      disabled = false,\n      defaultChecked,\n      tabIndex,\n      value = \"\",\n      name = \"\",\n      id,\n      \"data-testid\": dataTestId\n    },\n    ref\n  ) => {\n    const inputRef = useRef<HTMLInputElement>(null);\n    const mergedInputRef = useMergeRef(ref, inputRef);\n    const iconContainerRef = useRef<HTMLDivElement>(null);\n    const overrideClassName = backwardCompatibilityForProperties([className, componentClassName]);\n\n    const onMouseUpCallback = useCallback(() => {\n      const input = inputRef.current;\n      if (!input) return;\n\n      window.requestAnimationFrame(() => {\n        window.requestAnimationFrame(() => {\n          input.blur();\n        });\n      });\n    }, [inputRef]);\n    let overrideDefaultChecked = defaultChecked;\n\n    // If component did not receive default checked and checked props, choose default checked as\n    // default behavior (handle isChecked logic inside input) and set default value\n    if (isNil(overrideDefaultChecked) && isNil(checked)) {\n      overrideDefaultChecked = false;\n    }\n\n    useEffect(() => {\n      if (inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n    }, [inputRef, indeterminate]);\n\n    const { onClickCapture: onClickCaptureLabel } = useSupportFirefoxLabelClick({ inputRef });\n\n    const finalAriaLabel = useMemo(() => {\n      if (ariaLabel) return ariaLabel;\n      if (typeof label === \"string\") return label;\n      return \"\";\n    }, [ariaLabel, label]);\n\n    return (\n      // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n      <label\n        className={cx(styles.wrapper, overrideClassName)}\n        onMouseUp={onMouseUpCallback}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.CHECKBOX, id)}\n        htmlFor={id}\n        onClickCapture={onClickCaptureLabel}\n      >\n        <input\n          ref={mergedInputRef}\n          id={id}\n          className={styles.input}\n          value={value}\n          name={name}\n          type=\"checkbox\"\n          autoFocus={autoFocus}\n          onChange={onChange}\n          defaultChecked={overrideDefaultChecked}\n          disabled={disabled}\n          aria-label={finalAriaLabel}\n          aria-labelledby={ariaLabelledBy}\n          checked={checked}\n          tabIndex={tabIndex}\n        />\n        <div\n          className={cx(styles.checkbox, checkboxClassName)}\n          ref={iconContainerRef}\n          data-testid={getTestId(ComponentDefaultTestId.CHECKBOX_CHECKBOX, id)}\n        >\n          <Icon\n            className={styles.icon}\n            iconType={Icon.type.SVG}\n            icon={indeterminate ? Remove : Check}\n            ignoreFocusStyle\n            clickable={false}\n            ariaHidden={true}\n            iconSize=\"16\"\n          />\n        </div>\n        {label === false ? null : (\n          <Text\n            element=\"span\"\n            type={Text.types.TEXT2}\n            className={cx(styles.label, labelClassName)}\n            data-testid={getTestId(ComponentDefaultTestId.CHECKBOX_LABEL, id)}\n          >\n            {label}\n          </Text>\n        )}\n      </label>\n    );\n  }\n);\n\nexport default Checkbox;\n"],"names":["Checkbox","forwardRef","_ref","ref","className","componentClassName","checkboxClassName","labelClassName","ariaLabel","label","ariaLabelledBy","_ref$onChange","onChange","NOOP","checked","autoFocus","_ref$indeterminate","indeterminate","_ref$disabled","disabled","defaultChecked","tabIndex","_ref$value","value","_ref$name","name","id","dataTestId","inputRef","useRef","mergedInputRef","useMergeRef","iconContainerRef","overrideClassName","backwardCompatibilityForProperties","onMouseUpCallback","useCallback","input","current","window","requestAnimationFrame","blur","overrideDefaultChecked","isNil","useEffect","onClickCaptureLabel","useSupportFirefoxLabelClick","onClickCapture","finalAriaLabel","useMemo","React","createElement","cx","styles","wrapper","onMouseUp","getTestId","ComponentDefaultTestId","CHECKBOX","htmlFor","type","checkbox","CHECKBOX_CHECKBOX","Icon","icon","iconType","SVG","Remove","Check","ignoreFocusStyle","clickable","ariaHidden","iconSize","Text","element","types","TEXT2","CHECKBOX_LABEL"],"mappings":"4sBAsDMA,IAAAA,EAA2DC,GAC/D,SAAAC,EAsBEC,GACE,IArBAC,EAASF,EAATE,UAEAC,EAAkBH,EAAlBG,mBACAC,EAAiBJ,EAAjBI,kBACAC,EAAcL,EAAdK,eACAC,EAASN,EAATM,UACAC,EAAKP,EAALO,MACAC,EAAcR,EAAdQ,eAAcC,EAAAT,EACdU,SAAAA,OAAWC,IAAHF,EAAGE,EAAIF,EACfG,EAAOZ,EAAPY,QACAC,EAASb,EAATa,UAASC,EAAAd,EACTe,cAAAA,OAAgB,IAAHD,GAAQA,EAAAE,EAAAhB,EACrBiB,SAAAA,OAAW,IAAHD,GAAQA,EAChBE,EAAclB,EAAdkB,eACAC,EAAQnB,EAARmB,SAAQC,EAAApB,EACRqB,MAAAA,OAAQ,IAAHD,EAAG,GAAEA,EAAAE,EAAAtB,EACVuB,KAAAA,OAAO,IAAHD,EAAG,GAAEA,EACTE,EAAExB,EAAFwB,GACeC,EAAUzB,EAAzB,eAII0B,EAAWC,EAAyB,MACpCC,EAAiBC,EAAY5B,EAAKyB,GAClCI,EAAmBH,EAAuB,MAC1CI,EAAoBC,EAAmC,CAAC9B,EAAWC,IAEnE8B,EAAoBC,GAAY,WACpC,IAAMC,EAAQT,EAASU,QAClBD,GAELE,OAAOC,uBAAsB,WAC3BD,OAAOC,uBAAsB,WAC3BH,EAAMI,MACR,GACF,GACF,GAAG,CAACb,IACAc,EAAyBtB,EAIzBuB,EAAMD,IAA2BC,EAAM7B,KACzC4B,GAAyB,GAG3BE,GAAU,WACJhB,EAASU,UACXV,EAASU,QAAQrB,cAAgBA,EAErC,GAAG,CAACW,EAAUX,IAEd,IAAwB4B,EAAwBC,EAA4B,CAAElB,SAAAA,IAAtEmB,eAEFC,EAAiBC,GAAQ,WAC7B,OAAIzC,IACiB,iBAAVC,EAA2BA,EAC/B,GACT,GAAG,CAACD,EAAWC,IAEf,OAEEyC,EAAAC,cAAA,QAAA,CACE/C,UAAWgD,EAAGC,EAAOC,QAASrB,GAC9BsB,UAAWpB,EACE,cAAAR,GAAc6B,EAAUC,EAAuBC,SAAUhC,GACtEiC,QAASjC,EACTqB,eAAgBF,GAEhBK,EACEC,cAAA,QAAA,CAAAhD,IAAK2B,EACLJ,GAAIA,EACJtB,UAAWiD,EAAOhB,MAClBd,MAAOA,EACPE,KAAMA,EACNmC,KAAK,WACL7C,UAAWA,EACXH,SAAUA,EACVQ,eAAgBsB,EAChBvB,SAAUA,EACE,aAAA6B,EACK,kBAAAtC,EACjBI,QAASA,EACTO,SAAUA,IAEZ6B,EACEC,cAAA,MAAA,CAAA/C,UAAWgD,EAAGC,EAAOQ,SAAUvD,GAC/BH,IAAK6B,gBACQwB,EAAUC,EAAuBK,kBAAmBpC,IAEjEwB,EAAAC,cAACY,EACC,CAAA3D,UAAWiD,EAAOW,KAClBC,SAAUF,EAAKH,KAAKM,IACpBF,KAAM/C,EAAgBkD,EAASC,EAC/BC,oBACAC,WAAW,EACXC,YAAY,EACZC,SAAS,SAGF,IAAV/D,EAAkB,KACjByC,EAAAC,cAACsB,EACC,CAAAC,QAAQ,OACRd,KAAMa,EAAKE,MAAMC,MACjBxE,UAAWgD,EAAGC,EAAO5C,MAAOF,GAAe,cAC9BiD,EAAUC,EAAuBoB,eAAgBnD,IAE7DjB,GAKX"}