{"version":3,"file":"ResponsiveList.js","sources":["../../../../../src/components/ResponsiveList/ResponsiveList.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { useRef, forwardRef, useMemo } from \"react\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport useElementsOverflowingIndex from \"../../hooks/useElementsOverflowingIndex\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport styles from \"./ResponsiveList.module.scss\";\nimport { VibeComponent, withStaticProps } from \"../../types\";\nimport MenuButton from \"../MenuButton/MenuButton\";\nimport { DEFAULT_MINIMAL_MARGIN, EMPTY_ARRAY, ResponsiveListProps } from \"./ResponsiveList.types\";\nimport { useWarnDeprecated } from \"../../utils/warn-deprecated\";\n\nconst ResponsiveList: VibeComponent<ResponsiveListProps> & {\n  menuButtonSizes?: typeof MenuButton.sizes;\n} = forwardRef<HTMLDivElement, ResponsiveListProps>(\n  (\n    {\n      id,\n      className,\n      rootClassName,\n      children,\n      menuButtonSize = MenuButton.sizes.SMALL,\n      paddingSize = DEFAULT_MINIMAL_MARGIN,\n      dialogZIndex = 9999,\n      dialogClassName,\n      menuButtonClassName,\n      menuWrapperClassName,\n      resizeDebounceTime = 0,\n      menuButtonAriaLabel = \"More Actions\",\n      menuButtonProps = {},\n      \"data-testid\": dataTestId\n    },\n    ref\n  ) => {\n    useWarnDeprecated({\n      component: \"ResponsiveList\",\n      message:\n        \"The component is deprecated and will be removed in the next major version. Please consider using alternative solutions\"\n    });\n\n    const componentRef = useRef<HTMLDivElement>(null);\n    const mergedRef = useMergeRef<HTMLDivElement>(ref, componentRef);\n    const index = useElementsOverflowingIndex({\n      ref: componentRef,\n      children,\n      paddingSize,\n      resizeDebounceTime,\n      ignoreLast: true\n    });\n\n    const directChildren = useMemo(() => {\n      if (index === -1) {\n        return children;\n      }\n      const childrenArray = React.Children.toArray(children);\n      return childrenArray.slice(0, index);\n    }, [children, index]);\n\n    const menuChildren = useMemo(() => {\n      if (index === -1) {\n        return EMPTY_ARRAY;\n      }\n      const childrenArray = React.Children.toArray(children);\n\n      return childrenArray.slice(index, childrenArray.length);\n    }, [children, index]);\n\n    const hiddenChildren = useMemo(() => {\n      const childrenArray = React.Children.toArray(children) as React.ReactElement[];\n\n      return childrenArray.map(el => el?.props?.responsiveListPlaceholder || el);\n    }, [children]);\n\n    return (\n      <div\n        className={cx(styles.responsiveListRoot, rootClassName)}\n        id={id}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.RESPONSIVE_LIST, id)}\n      >\n        {index !== null && (\n          <div className={cx(styles.responsiveList, className)}>\n            {directChildren}\n            {!!menuChildren.length && (\n              <MenuButton\n                className={cx(styles.listMenuButton, menuButtonClassName)}\n                size={menuButtonSize}\n                openDialogComponentClassName={cx(styles.menuButtonDialog, dialogClassName)}\n                zIndex={dialogZIndex}\n                ariaLabel={menuButtonAriaLabel}\n                {...menuButtonProps}\n              >\n                <div className={cx(styles.menuWrapperFlex, menuWrapperClassName)}>{menuChildren}</div>\n              </MenuButton>\n            )}\n          </div>\n        )}\n        <div ref={mergedRef} className={cx(styles.responsiveList, styles.dummy, className)}>\n          {hiddenChildren}\n          <MenuButton\n            className={cx(styles.listMenuButton, menuButtonClassName)}\n            size={menuButtonSize}\n            openDialogComponentClassName={cx(styles.menuButtonDialog, dialogClassName)}\n            zIndex={dialogZIndex}\n            ariaLabel={menuButtonAriaLabel}\n            {...menuButtonProps}\n          >\n            <div className={cx(styles.menuWrapperFlex, menuWrapperClassName)} />\n          </MenuButton>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default withStaticProps(ResponsiveList, { menuButtonSizes: MenuButton.sizes });\n"],"names":["withStaticProps","forwardRef","_ref","ref","id","className","rootClassName","children","_ref$menuButtonSize","menuButtonSize","MenuButton","sizes","SMALL","_ref$paddingSize","paddingSize","DEFAULT_MINIMAL_MARGIN","_ref$dialogZIndex","dialogZIndex","dialogClassName","menuButtonClassName","menuWrapperClassName","_ref$resizeDebounceTi","resizeDebounceTime","_ref$menuButtonAriaLa","menuButtonAriaLabel","_ref$menuButtonProps","menuButtonProps","dataTestId","useWarnDeprecated","component","message","componentRef","useRef","mergedRef","useMergeRef","index","useElementsOverflowingIndex","ignoreLast","directChildren","useMemo","React","Children","toArray","slice","menuChildren","EMPTY_ARRAY","childrenArray","length","hiddenChildren","map","el","_a","props","responsiveListPlaceholder","createElement","cx","styles","responsiveListRoot","getTestId","ComponentDefaultTestId","RESPONSIVE_LIST","responsiveList","Object","assign","listMenuButton","size","openDialogComponentClassName","menuButtonDialog","zIndex","ariaLabel","menuWrapperFlex","dummy","menuButtonSizes"],"mappings":"8jBAWA,IAsGeA,EAAAA,EApGXC,GACF,SAAAC,EAiBEC,GACE,IAhBAC,EAAEF,EAAFE,GACAC,EAASH,EAATG,UACAC,EAAaJ,EAAbI,cACAC,EAAQL,EAARK,SAAQC,EAAAN,EACRO,eAAAA,OAAiBC,IAAHF,EAAGE,EAAWC,MAAMC,MAAKJ,EAAAK,EAAAX,EACvCY,YAAAA,OAAcC,IAAHF,EAAGE,EAAsBF,EAAAG,EAAAd,EACpCe,aAAAA,OAAe,IAAHD,EAAG,KAAIA,EACnBE,EAAehB,EAAfgB,gBACAC,EAAmBjB,EAAnBiB,oBACAC,EAAoBlB,EAApBkB,qBAAoBC,EAAAnB,EACpBoB,mBAAAA,OAAqB,IAAHD,EAAG,EAACA,EAAAE,EAAArB,EACtBsB,oBAAAA,OAAsB,IAAHD,EAAG,eAAcA,EAAAE,EAAAvB,EACpCwB,gBAAAA,OAAe,IAAAD,EAAG,CAAE,EAAAA,EACLE,EAAUzB,EAAzB,eAIF0B,EAAkB,CAChBC,UAAW,iBACXC,QACE,2HAGJ,IAAMC,EAAeC,EAAuB,MACtCC,EAAYC,EAA4B/B,EAAK4B,GAC7CI,EAAQC,EAA4B,CACxCjC,IAAK4B,EACLxB,SAAAA,EACAO,YAAAA,EACAQ,mBAAAA,EACAe,YAAY,IAGRC,EAAiBC,GAAQ,WAC7B,OAAe,IAAXJ,EACK5B,EAEaiC,EAAMC,SAASC,QAAQnC,GACxBoC,MAAM,EAAGR,EAChC,GAAG,CAAC5B,EAAU4B,IAERS,EAAeL,GAAQ,WAC3B,IAAe,IAAXJ,EACF,OAAOU,EAET,IAAMC,EAAgBN,EAAMC,SAASC,QAAQnC,GAE7C,OAAOuC,EAAcH,MAAMR,EAAOW,EAAcC,OAClD,GAAG,CAACxC,EAAU4B,IAERa,EAAiBT,GAAQ,WAG7B,OAFsBC,EAAMC,SAASC,QAAQnC,GAExB0C,KAAI,SAAAC,GAAK,IAAAC,EAAC,OAAS,QAATA,EAAAD,aAAE,EAAFA,EAAIE,aAAK,IAAAD,OAAA,EAAAA,EAAEE,4BAA6BH,CAAE,GAC3E,GAAG,CAAC3C,IAEJ,OACEiC,EACEc,cAAA,MAAA,CAAAjD,UAAWkD,EAAGC,EAAOC,mBAAoBnD,GACzCF,GAAIA,EACS,cAAAuB,GAAc+B,EAAUC,EAAuBC,gBAAiBxD,IAElE,OAAV+B,GACCK,uBAAKnC,UAAWkD,EAAGC,EAAOK,eAAgBxD,IACvCiC,IACEM,EAAaG,QACdP,gBAAC9B,EAAUoD,OAAAC,OAAA,CACT1D,UAAWkD,EAAGC,EAAOQ,eAAgB7C,GACrC8C,KAAMxD,EACNyD,6BAA8BX,EAAGC,EAAOW,iBAAkBjD,GAC1DkD,OAAQnD,EACRoD,UAAW7C,GACPE,GAEJc,EAAAc,cAAA,MAAA,CAAKjD,UAAWkD,EAAGC,EAAOc,gBAAiBlD,IAAwBwB,KAK3EJ,EAAAc,cAAA,MAAA,CAAKnD,IAAK8B,EAAW5B,UAAWkD,EAAGC,EAAOK,eAAgBL,EAAOe,MAAOlE,IACrE2C,EACDR,EAAAc,cAAC5C,EACCoD,OAAAC,OAAA,CAAA1D,UAAWkD,EAAGC,EAAOQ,eAAgB7C,GACrC8C,KAAMxD,EACNyD,6BAA8BX,EAAGC,EAAOW,iBAAkBjD,GAC1DkD,OAAQnD,EACRoD,UAAW7C,GACPE,GAEJc,EAAAc,cAAA,MAAA,CAAKjD,UAAWkD,EAAGC,EAAOc,gBAAiBlD,OAKrD,IAG6C,CAAEoD,gBAAiB9D,EAAWC"}