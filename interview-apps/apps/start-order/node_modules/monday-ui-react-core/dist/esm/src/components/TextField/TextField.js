import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import o from"classnames";import a,{forwardRef as r,useState as n,useRef as i,useCallback as l,useMemo as s,useEffect as c}from"react";import d from"../../hooks/useDebounceEvent/index.js";import m from"../Icon/Icon.js";import{backwardCompatibilityForProperties as u}from"../../helpers/backwardCompatibilityForProperties.js";import p from"../Loader/Loader.js";import v from"../Text/Text.js";import f from"../FieldLabel/FieldLabel.js";import{TextFieldFeedbackState as C,TextFieldTextType as y,FEEDBACK_CLASSES as b,SIZE_MAPPER as T,getActualSize as N,TextFieldAriaLabel as E}from"./TextFieldConstants.js";import{BASE_SIZES as x}from"../../constants/sizes.js";import h from"../../hooks/useMergeRef.js";import I from"../Clickable/Clickable.js";import{getTestId as g}from"../../tests/testIds.js";import{NOOP as j}from"../../utils/function-utils.js";import{ComponentDefaultTestId as L}from"../../tests/constants.js";import{withStaticProps as k}from"../../types/withStaticProps.js";import F from"./TextField.module.scss.js";import S from"../Tooltip/Tooltip.js";var A={primary:"",secondary:"",layout:""},O=r((function(r,C){var x=r.className,k=void 0===x?"":x,w=r.placeholder,D=void 0===w?"":w,R=r.autoComplete,z=void 0===R?"off":R,H=r.value,_=r.onChange,q=void 0===_?j:_,B=r.onBlur,W=void 0===B?j:B,K=r.onFocus,M=void 0===K?j:K,P=r.onKeyDown,X=void 0===P?j:P,V=r.onWheel,U=void 0===V?j:V,Y=r.debounceRate,G=void 0===Y?0:Y,J=r.autoFocus,Q=void 0!==J&&J,Z=r.disabled,$=void 0!==Z&&Z,ee=r.readonly,te=void 0!==ee&&ee,oe=r.setRef,ae=void 0===oe?j:oe,re=r.iconName,ne=r.secondaryIconName,ie=r.id,le=void 0===ie?"input":ie,se=r.title,ce=void 0===se?"":se,de=r.size,me=void 0===de?O.sizes.SMALL:de,ue=r.validation,pe=void 0===ue?null:ue,ve=r.wrapperClassName,fe=void 0===ve?"":ve,Ce=r.onIconClick,ye=void 0===Ce?j:Ce,be=r.clearOnIconClick,Te=void 0!==be&&be,Ne=r.labelIconName,Ee=r.showCharCount,xe=void 0!==Ee&&Ee,he=r.inputAriaLabel,Ie=r.searchResultsContainerId,ge=void 0===Ie?"":Ie,je=r.activeDescendant,Le=void 0===je?"":je,ke=r.iconsNames,Fe=void 0===ke?A:ke,Se=r.type,Ae=void 0===Se?y.TEXT:Se,Oe=r.maxLength,we=void 0===Oe?null:Oe,De=r.trim,Re=void 0!==De&&De,ze=r.role,He=void 0===ze?"":ze,_e=r.required,qe=void 0!==_e&&_e,Be=r.requiredErrorText,We=void 0===Be?"":Be,Ke=r.loading,Me=void 0!==Ke&&Ke,Pe=r.requiredAsterisk,Xe=void 0!==Pe&&Pe,Ve=r.dataTestId,Ue=r["data-testid"],Ye=r.secondaryDataTestId,Ge=r.tabIndex,Je=r.underline,Qe=void 0!==Je&&Je,Ze=r.name,$e=r.withReadOnlyStyle,et=r.controlled,tt=void 0!==et&&et,ot=r.iconTooltipContent,at=r.secondaryTooltipContent,rt=n(!1),nt=e(rt,2),it=nt[0],lt=nt[1],st=u([Ue,Ve],g(L.TEXT_FIELD,le)),ct=i(null),dt=h(C,ct,ae),mt=l((function(e){qe&&!e.target.value&&lt(!0),W(e)}),[W,qe]),ut=l((function(e,t){it&&e&&lt(!1),q(e,t||{target:ct.current})}),[q,it]),pt=d({delay:G,onChange:ut,initialStateValue:H,trim:Re}),vt=pt.inputValue,ft=pt.onEventChanged,Ct=pt.clearValue,yt=s((function(){return tt?H:vt}),[tt,H,vt]),bt=l((function(e){tt?ut(e.target.value,e):ft(e)}),[tt,ut,ft]),Tt=s((function(){return ne&&yt?ne:re}),[re,ne,yt]),Nt=l((function(){$||(Te&&(ct.current&&ct.current.focus(),ct.current.value="",tt?ut(""):Ct()),ye(Tt))}),[$,Te,ye,Tt,tt,ut,Ct]),Et=s((function(){return pe&&pe.status||it?b[it?"error":pe.status]:""}),[pe,it]),xt=re||ne,ht=xe||pe&&pe.text||it,It=ne===Tt,gt=re===Tt,jt=(ye!==j||Fe.primary||ot)&&yt&&re.length&&gt,Lt=(ne||at)&&It&&!!yt;c((function(){if((null==ct?void 0:ct.current)&&Q){var e=requestAnimationFrame((function(){return ct.current.focus()}));return function(){return cancelAnimationFrame(e)}}}),[ct,Q]);var kt=ye!==j||Te,Ft=Fe.primary||ot,St=Fe.secondary||at;return a.createElement("div",{className:o(F.textField,fe,t(t({},F.disabled,$),F.onlyUnderline,Qe)),role:He,"aria-busy":Me},a.createElement("div",{className:o(F.labelWrapper)},a.createElement(f,{labelText:ce,icon:Ne,labelFor:le,requiredAsterisk:Xe}),a.createElement("div",{className:o(F.inputWrapper,T[N(me)],Et)},a.createElement("input",{className:o(k,F.input,t(t(t({},F.inputHasIcon,!!xt),F.readOnly,te),F.withReadOnlyStyle,$e)),placeholder:D,autoComplete:z,value:yt,onChange:bt,disabled:$,readOnly:te,ref:dt,type:Ae,id:le,"data-testid":st,name:Ze,onBlur:mt,onFocus:M,onKeyDown:X,onWheel:U,maxLength:we,role:ge&&"combobox","aria-label":he||D,"aria-invalid":pe&&"error"===pe.status||it,"aria-owns":ge,"aria-activedescendant":Le,"aria-required":qe,required:qe,tabIndex:Ge}),Me&&a.createElement("div",{className:o(F.loaderContainer,t({},F.loaderContainerHasIcon,xt))},a.createElement("div",{className:o(F.loader)},a.createElement(p,{svgClassName:o(F.loaderSvg)}))),a.createElement(S,{content:gt?ot:void 0,addKeyboardHideShowTriggersByDefault:!0,referenceWrapperClassName:F.tooltipContainer},a.createElement(I,{className:o(F.iconContainer,t(t(t({},F.iconContainerHasIcon,xt),F.iconContainerActive,gt),F.iconContainerClickable,kt)),onClick:Nt,tabIndex:jt?"0":"-1",ariaLabel:Ft},a.createElement(m,{icon:re,className:o(F.icon),clickable:!1,iconType:m.type.ICON_FONT,iconSize:me===O.sizes.SMALL?"16px":"18px"}))),a.createElement(S,{content:It?at:void 0,addKeyboardHideShowTriggersByDefault:!0,referenceWrapperClassName:F.tooltipContainer},a.createElement(I,{className:o(F.iconContainer,t(t(t({},F.iconContainerHasIcon,xt),F.iconContainerActive,It),F.iconContainerClickable,kt)),onClick:Nt,tabIndex:Lt?"0":"-1","data-testid":Ye||g(L.TEXT_FIELD_SECONDARY_BUTTON,le),ariaLabel:St},a.createElement(m,{icon:ne,className:o(F.icon),clickable:!1,iconType:m.type.ICON_FONT,iconSize:me===O.sizes.SMALL?"16px":"18px"})))),ht&&a.createElement(v,{type:v.types.TEXT2,color:v.colors.SECONDARY,className:o(F.subTextContainer)},pe&&pe.text&&a.createElement("span",{className:o(F.subTextContainerStatus)},it?We:pe.text),xe&&a.createElement("span",{className:o(F.counter),"aria-label":E.CHAR},yt&&yt.length||0))))})),w=k(O,{sizes:x,feedbacks:C,types:y});export{w as default};
//# sourceMappingURL=TextField.js.map
