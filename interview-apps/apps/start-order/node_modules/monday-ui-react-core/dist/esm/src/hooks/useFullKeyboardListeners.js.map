{"version":3,"file":"useFullKeyboardListeners.js","sources":["../../../../src/hooks/useFullKeyboardListeners.ts"],"sourcesContent":["import { MutableRefObject, useCallback, useEffect, useMemo } from \"react\";\nimport { noop } from \"lodash-es\";\nimport useKeyEvent from \"./useKeyEvent\";\nimport { KeyboardEventCallback } from \"../types/events\";\n\nexport enum NavDirections {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\"\n}\n\nexport const ARROW_DOWN_KEYS = [\"ArrowDown\"];\nexport const ARROW_UP_KEYS = [\"ArrowUp\"];\nexport const ARROW_RIGHT_KEYS = [\"ArrowRight\"];\nexport const ARROW_LEFT_KEYS = [\"ArrowLeft\"];\nexport const SELECTION_KEYS = [\"Enter\", \" \"];\nexport const ENTER_KEYS = [\"Enter\"];\nexport const ESCAPE_KEYS = [\"Escape\"];\n\nexport default function useFullKeyboardListeners({\n  ref, // the reference for the component that listens to keyboard\n  onSelectionKey = noop,\n  onArrowNavigation = noop,\n  onEscape = noop,\n  useDocumentEventListeners = false,\n  focusOnMount = false\n}: {\n  ref: MutableRefObject<HTMLElement>;\n  onSelectionKey: KeyboardEventCallback;\n  onArrowNavigation: (type: NavDirections) => void;\n  onEscape: KeyboardEventCallback;\n  useDocumentEventListeners?: boolean;\n  focusOnMount: boolean;\n}) {\n  const listenerOptions = useMemo(() => {\n    if (useDocumentEventListeners) return undefined;\n\n    return {\n      ref,\n      preventDefault: true,\n      stopPropagation: true\n    };\n  }, [useDocumentEventListeners, ref]);\n\n  const onArrowDown = useCallback(() => onArrowNavigation(NavDirections.DOWN), [onArrowNavigation]);\n  const onArrowUp = useCallback(() => onArrowNavigation(NavDirections.UP), [onArrowNavigation]);\n  const onArrowRight = useCallback(() => onArrowNavigation(NavDirections.RIGHT), [onArrowNavigation]);\n  const onArrowLeft = useCallback(() => onArrowNavigation(NavDirections.LEFT), [onArrowNavigation]);\n\n  useKeyEvent({\n    keys: ARROW_DOWN_KEYS,\n    callback: onArrowDown,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ARROW_UP_KEYS,\n    callback: onArrowUp,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ARROW_RIGHT_KEYS,\n    callback: onArrowRight,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ARROW_LEFT_KEYS,\n    callback: onArrowLeft,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: SELECTION_KEYS,\n    callback: onSelectionKey,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ESCAPE_KEYS,\n    callback: onEscape,\n    ...listenerOptions\n  });\n\n  useEffect(() => {\n    if (!focusOnMount || useDocumentEventListeners) return;\n    ref?.current?.focus();\n  }, [focusOnMount, ref, useDocumentEventListeners]);\n}\n"],"names":["NavDirections","ARROW_DOWN_KEYS","ARROW_UP_KEYS","ARROW_RIGHT_KEYS","ARROW_LEFT_KEYS","SELECTION_KEYS","ENTER_KEYS","ESCAPE_KEYS","useFullKeyboardListeners","_ref","ref","_ref$onSelectionKey","onSelectionKey","noop","_ref$onArrowNavigatio","onArrowNavigation","_ref$onEscape","onEscape","_ref$useDocumentEvent","useDocumentEventListeners","_ref$focusOnMount","focusOnMount","listenerOptions","useMemo","preventDefault","stopPropagation","onArrowDown","useCallback","DOWN","onArrowUp","UP","onArrowRight","RIGHT","onArrowLeft","LEFT","useKeyEvent","Object","assign","keys","callback","useEffect","_a","current","focus"],"mappings":"2IAKYA,GAAZ,SAAYA,GACVA,EAAA,GAAA,KACAA,EAAA,KAAA,OACAA,EAAA,KAAA,OACAA,EAAA,MAAA,OACD,CALD,CAAYA,IAAAA,EAKX,CAAA,IAEYC,IAAAA,EAAkB,CAAC,aACnBC,EAAgB,CAAC,WACjBC,EAAmB,CAAC,cACpBC,EAAkB,CAAC,aACnBC,EAAiB,CAAC,QAAS,KAC3BC,EAAa,CAAC,SACdC,EAAc,CAAC,UAEJ,SAAAC,EAAwBC,GAc/C,IAbCC,EAAGD,EAAHC,IAAGC,EAAAF,EACHG,eAAAA,OAAiBC,IAAHF,EAAGE,EAAIF,EAAAG,EAAAL,EACrBM,kBAAAA,OAAoBF,IAAHC,EAAGD,EAAIC,EAAAE,EAAAP,EACxBQ,SAAAA,OAAWJ,IAAHG,EAAGH,EAAIG,EAAAE,EAAAT,EACfU,0BAAAA,OAA4B,IAAHD,GAAQA,EAAAE,EAAAX,EACjCY,aAAAA,OAAe,IAAHD,GAAQA,EASdE,EAAkBC,GAAQ,WAC9B,IAAIJ,EAEJ,MAAO,CACLT,IAAAA,EACAc,gBAAgB,EAChBC,iBAAiB,EAErB,GAAG,CAACN,EAA2BT,IAEzBgB,EAAcC,GAAY,WAAA,OAAMZ,EAAkBf,EAAc4B,QAAO,CAACb,IACxEc,EAAYF,GAAY,WAAA,OAAMZ,EAAkBf,EAAc8B,MAAK,CAACf,IACpEgB,EAAeJ,GAAY,WAAA,OAAMZ,EAAkBf,EAAcgC,SAAQ,CAACjB,IAC1EkB,EAAcN,GAAY,WAAA,OAAMZ,EAAkBf,EAAckC,QAAO,CAACnB,IAE9EoB,EAAWC,OAAAC,OAAA,CACTC,KAAMrC,EACNsC,SAAUb,GACPJ,IAGLa,EAAWC,OAAAC,OAAA,CACTC,KAAMpC,EACNqC,SAAUV,GACPP,IAGLa,EAAWC,OAAAC,OAAA,CACTC,KAAMnC,EACNoC,SAAUR,GACPT,IAGLa,EAAWC,OAAAC,OAAA,CACTC,KAAMlC,EACNmC,SAAUN,GACPX,IAGLa,EAAWC,OAAAC,OAAA,CACTC,KAAMjC,EACNkC,SAAU3B,GACPU,IAGLa,EAAWC,OAAAC,OAAA,CACTC,KAAM/B,EACNgC,SAAUtB,GACPK,IAGLkB,GAAU,iBACHnB,IAAgBF,IACT,QAAZsB,EAAA/B,aAAA,EAAAA,EAAKgC,eAAO,IAAAD,GAAAA,EAAEE,QACf,GAAE,CAACtB,EAAcX,EAAKS,GACzB"}