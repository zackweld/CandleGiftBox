import{defineProperty as e}from"../../../../../../_virtual/_rollupPluginBabelHelpers.js";import t,{forwardRef as n,useRef as o,useEffect as s,useCallback as i}from"react";import u from"../../../../Text/Text.js";import{getTestId as r,ComponentDefaultTestId as l}from"../../../../../tests/testIds.js";import m from"classnames";import{TAB_INDEX_FOCUS_WITH_JS_ONLY as a}from"../../MenuItemConstants.js";import d from"../MenuItemSubMenuIcon/MenuItemSubMenuIcon.js";import c from"../MenuItemSubMenu/MenuItemSubMenu.js";import I from"../../hooks/useMenuItemMouseEvents.js";import M from"../../hooks/useMenuItemKeyboardEvents.js";import p from"../../../../../hooks/useMergeRef.js";import v from"../../../../../hooks/useIsMouseEnter.js";import f from"./BaseMenuItem.module.scss.js";var b=n((function(n,b){var h=n.subMenu,x=n.className,E=n.menuRef,S=n.disabled,j=void 0!==S&&S,k=n.selected,C=void 0!==k&&k,y=n.onClick,B=n.activeItemIndex,O=n.setActiveItemIndex,g=n.index,A=n.id,N=n.isParentMenuVisible,P=n.resetOpenSubMenuIndex,R=n.hasOpenSubMenu,T=n.setSubMenuIsOpenByIndex,w=n.closeMenu,L=n.useDocumentEventListeners,V=void 0!==L&&L,_=n.isInitialSelectedState,D=n.onMouseEnter,F=n.onMouseLeave,H=n.shouldScrollMenu,K=n["data-testid"],U=n.splitMenuItem,X=void 0!==U&&U,q=n.children,z=n.submenuPosition,G=void 0===z?"right":z,J=(void 0===B?-1:B)===g,Q=!j&&!!h&&(void 0!==N&&N)&&(J&&(void 0!==R&&R)),W=o(null),Y=o(null),Z=p(b,W),$=v({ref:W}),ee=v({ref:Y});s((function(){var e,t=W.current;J&&H&&t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded({behaviour:"smooth"}):null===(e=t.scrollIntoView)||void 0===e||e.call(t,{behavior:"smooth",block:"center"}))}),[J,H]),s((function(){var e=W.current;V||J&&(null==e||e.focus())}),[J,V]);var te=I({ref:W,splitMenuItemIconButtonRef:Y,resetOpenSubMenuIndex:P,setSubMenuIsOpenByIndex:T,isActive:J,setActiveItemIndex:O,index:g,hasChildren:!!h,splitMenuItem:X}),ne=M({onClick:y,disabled:j,isActive:J,index:g,setActiveItemIndex:O,hasChildren:!!h,shouldShowSubMenu:Q,setSubMenuIsOpenByIndex:T,menuRef:E,isMouseEnter:te,closeMenu:w,useDocumentEventListeners:V,splitMenuItem:X,isMouseEnterMenuItem:$,isMouseEnterIconButton:ee}).onClickCallback,oe=i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(g,!1),e.propagate&&w(e)}),[T,g,w]);return t.createElement(u,{id:A,element:"li",type:u.types.TEXT2,"aria-haspopup":!!h||void 0,"aria-expanded":h?Q:void 0,"data-testid":K||r(l.MENU_ITEM,g),className:m(f.item,x,e(e(e(e(e({},f.disabled,j),f.focused,J),f.selected,C),f.initialSelected,_),f.splitMenuItem,X)),ref:Z,onClick:ne,role:"menuitem","aria-current":J,onMouseLeave:F,onMouseEnter:D,tabIndex:a},q,!!h&&t.createElement(t.Fragment,null,t.createElement(d,{ref:Y,isSplit:X,active:Q,disabled:j}),t.createElement(c,{anchorRef:W,open:Q,onClose:oe,autoFocusOnMount:!V,submenuPosition:G},h)))}));export{b as default};
//# sourceMappingURL=BaseMenuItem.js.map
