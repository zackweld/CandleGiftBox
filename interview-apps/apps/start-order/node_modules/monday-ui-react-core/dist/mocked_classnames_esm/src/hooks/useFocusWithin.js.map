{"version":3,"file":"useFocusWithin.js","sources":["../../../../src/hooks/useFocusWithin.ts"],"sourcesContent":["import { FocusEvent, useCallback, useMemo, useRef } from \"react\";\n\ntype Result = {\n  focusWithinProps?: {\n    onFocus?: (e: FocusEvent) => void;\n    onBlur?: (e: FocusEvent) => void;\n  };\n};\n\nexport function useFocusWithin({\n  onFocusWithin,\n  onFocusWithinChange,\n  isDisabled,\n  onBlurWithin\n}: {\n  onFocusWithin?: (event: FocusEvent) => void;\n  onBlurWithin?: (event: FocusEvent) => void;\n  onFocusWithinChange?: (isWithinChange: boolean) => void;\n  isDisabled?: boolean;\n}): Result {\n  const state = useRef({\n    isFocusWithin: false\n  }).current;\n\n  const onFocus = useCallback(\n    (e: FocusEvent) => {\n      if (!state.isFocusWithin) {\n        if (onFocusWithin) {\n          onFocusWithin(e);\n        }\n\n        if (onFocusWithinChange) {\n          onFocusWithinChange(true);\n        }\n\n        state.isFocusWithin = true;\n      }\n    },\n    [onFocusWithin, onFocusWithinChange, state]\n  );\n\n  const onBlur = useCallback(\n    (e: FocusEvent) => {\n      // We don't want to trigger onBlurWithin and then immediately onFocusWithin again\n      // when moving focus inside the element. Only trigger if the currentTarget doesn't\n      // include the relatedTarget (where focus is moving).\n      const currentTarget = e.currentTarget;\n      if (state.isFocusWithin && !currentTarget.contains(e.relatedTarget)) {\n        if (onBlurWithin) {\n          onBlurWithin(e);\n        }\n\n        if (onFocusWithinChange) {\n          onFocusWithinChange(false);\n        }\n\n        state.isFocusWithin = false;\n      }\n    },\n    [onBlurWithin, onFocusWithinChange, state]\n  );\n\n  const isDisabledReturnValue = useMemo(() => {\n    if (!isDisabled) return {};\n    return { focusWithinProps: {} };\n  }, [isDisabled]);\n\n  if (isDisabled) {\n    return isDisabledReturnValue;\n  }\n\n  return {\n    focusWithinProps: {\n      onFocus: onFocus,\n      onBlur: onBlur\n    }\n  };\n}\n"],"names":["useFocusWithin","_ref","onFocusWithin","onFocusWithinChange","isDisabled","onBlurWithin","state","useRef","isFocusWithin","current","onFocus","useCallback","e","onBlur","currentTarget","contains","relatedTarget","isDisabledReturnValue","useMemo","focusWithinProps"],"mappings":"6DASM,SAAUA,EAAcC,GAU7B,IATCC,EAAaD,EAAbC,cACAC,EAAmBF,EAAnBE,oBACAC,EAAUH,EAAVG,WACAC,EAAYJ,EAAZI,aAOMC,EAAQC,EAAO,CACnBC,eAAe,IACdC,QAEGC,EAAUC,GACd,SAACC,GACMN,EAAME,gBACLN,GACFA,EAAcU,GAGZT,GACFA,GAAoB,GAGtBG,EAAME,eAAgB,EAEzB,GACD,CAACN,EAAeC,EAAqBG,IAGjCO,EAASF,GACb,SAACC,GAKKN,EAAME,gBADYI,EAAEE,cACkBC,SAASH,EAAEI,iBAC/CX,GACFA,EAAaO,GAGXT,GACFA,GAAoB,GAGtBG,EAAME,eAAgB,EAEzB,GACD,CAACH,EAAcF,EAAqBG,IAGhCW,EAAwBC,GAAQ,WACpC,OAAKd,EACE,CAAEe,iBAAkB,CAAA,GADH,EAE1B,GAAG,CAACf,IAEJ,OAAIA,EACKa,EAGF,CACLE,iBAAkB,CAChBT,QAASA,EACTG,OAAQA,GAGd"}