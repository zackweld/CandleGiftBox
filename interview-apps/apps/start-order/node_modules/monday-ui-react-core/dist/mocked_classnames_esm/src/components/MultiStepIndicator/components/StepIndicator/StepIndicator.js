import{slicedToArray as e,toConsumableArray as t,defineProperty as i}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{camelCase as n}from"lodash-es";import{getStyle as o}from"../../../../helpers/typesciptCssModulesHelper.js";import{getTestId as a,ComponentDefaultTestId as r}from"../../../../tests/testIds.js";import s from"classnames";import{keyCodes as l}from"../../../../constants/keyCodes.js";import c,{useState as m,useRef as p,useCallback as d,useEffect as u,useMemo as f}from"react";import{SwitchTransition as v,CSSTransition as E}from"react-transition-group";import _ from"../../../../hooks/useEventListener/index.js";import y from"../../../../hooks/useKeyEvent/index.js";import b from"../../../Icon/Icon.js";import x from"../../../Icon/Icons/components/Check.js";import N from"../../../Divider/Divider.js";import{NOOP as I}from"../../../../utils/function-utils.js";import C from"../../../HiddenText/HiddenText.js";import S from"../../../Clickable/Clickable.js";import{StepStatus as j,MultiStepType as k,Size as T}from"../../MultiStepConstants.js";import A from"./StepIndicator.module.scss.js";import{IconType as D}from"../../../Icon/IconConstants.js";var F=[l.ENTER,l.SPACE],P=function(e){var t=e.fulfilledStepIcon,i=e.fulfilledStepIconType;return e.status!==j.FULFILLED||e.isFulfilledStepDisplayNumber?c.createElement(c.Fragment,null,e.stepNumber):c.createElement(b,{icon:t,className:s(A.numberContainerTextCheckIcon),iconType:i,ignoreFocusStyle:!0,clickable:!1,ariaHidden:!0})},h=function(l){var b=l.stepComponentClassName,h=l.stepNumber,L=void 0===h?1:h,w=l.status,H=void 0===w?j.PENDING:w,R=l.titleText,g=void 0===R?"Heading text":R,M=l.subtitleText,G=void 0===M?"Subtitle text":M,V=l.type,z=void 0===V?k.PRIMARY:V,B=l.fulfilledStepIcon,O=void 0===B?x:B,U=l.fulfilledStepIconType,K=void 0===U?D.SVG:U,Y=l.isFulfilledStepDisplayNumber,q=void 0!==Y&&Y,J=l.onClick,Q=void 0===J?I:J,W=l.isFollowedByDivider,X=void 0!==W&&W,Z=l.stepDividerClassName,$=l.isVertical,ee=void 0!==$&&$,te=l.id,ie=l.size,ne=void 0===ie?T.REGULAR:ie,oe=l["data-testid"],ae=m(!1),re=e(ae,2),se=re[0],le=re[1],ce=p(null),me=p(H),pe=d((function(){le(!0)}),[le]),de=d((function(){le(!1)}),[le]),ue=d((function(){return me.current!==H}),[me,H]),fe=d((function(){Q&&Q(L)}),[Q,L]);_({eventName:"animationend",callback:de,ref:ce}),y({keys:F,callback:fe,ref:ce}),u((function(){ue()&&pe()}),[H,ue,pe]),u((function(){me.current=H}),[H]);var ve=f((function(){return"Step ".concat(L,": ").concat(g," - ").concat(G,", status: ").concat(H)}),[H,g,L,G]),Ee=function(e){return[o(A,n(e||"indicator")),o(A,n("type-".concat(z).concat(e))),o(A,n("status-".concat(H).concat(e))),o(A,n("size-".concat(ne).concat(e)))]};return c.createElement(S,{tabIndex:"-1",elementType:"li",className:s.apply(void 0,t(Ee("")).concat([b,i(i(i({},A.withAnimation,se),A.clickable,Q),A.textPlacementVertical,ee)])),"aria-label":ve,onClick:fe,"data-testid":oe||a(r.STEP_INDICATOR,te)},c.createElement("div",{className:s.apply(void 0,t(Ee("__number-divider-container")))},c.createElement("div",{className:s.apply(void 0,t(Ee("__number-container"))),ref:ce,tabIndex:0,role:"button"},c.createElement(v,{mode:"out-in"},c.createElement(E,{classNames:{enter:A.swapEnter,enterActive:A.swapEnterActive,exit:A.swapExit,exitActive:A.swapExitActive},addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},key:H},c.createElement("span",{className:s.apply(void 0,t(Ee("__number-container__text")))},c.createElement(P,{fulfilledStepIcon:O,fulfilledStepIconType:K,isFulfilledStepDisplayNumber:q,stepNumber:L,status:H}))))),X&&ee&&c.createElement(N,{className:s(A.divider,Z)})),c.createElement("div",{className:s.apply(void 0,t(Ee("__text-container")))},c.createElement("div",{className:s.apply(void 0,t(Ee("__text-container__title")))},c.createElement(C,{text:H})," ",c.createElement("span",{className:s.apply(void 0,t(Ee("__text-container__title__text")))},g)),ne!==T.COMPACT?c.createElement("span",{className:s.apply(void 0,t(Ee("__text-container__subtitle__text")))},G):null))};export{h as default};
//# sourceMappingURL=StepIndicator.js.map
