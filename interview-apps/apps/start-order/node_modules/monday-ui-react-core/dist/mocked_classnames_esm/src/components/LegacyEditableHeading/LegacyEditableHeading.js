import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{camelCase as t}from"lodash-es";import{getStyle as i}from"../../helpers/typesciptCssModulesHelper.js";import{getTestId as n,ComponentDefaultTestId as s}from"../../tests/testIds.js";import a from"classnames";import l,{useState as r,useRef as u,useCallback as d,useEffect as c,useLayoutEffect as p}from"react";import m from"../LegacyHeading/LegacyHeading.js";import g from"../Clickable/Clickable.js";import f from"../EditableInput/EditableInput.js";import y from"../../hooks/usePrevious/index.js";import{InputType as E}from"../EditableInput/EditableInputConstants.js";import{HeadingTypes as v,HeadingSizes as h}from"../LegacyHeading/LegacyHeadingConstants.js";import{withStaticProps as C}from"../../types/withStaticProps.js";import b from"../LegacyHeading/LegacyHeading.module.scss.js";import L from"./LegacyEditableHeading.module.scss.js";import{backwardCompatibilityForProperties as T}from"../../helpers/backwardCompatibilityForProperties.js";var j=C((function(v){var C=v.id,j=void 0===C?"":C,H=v.className,I=v.inputClassName,x=void 0===I?"":I,O=v.dataTestId,P=v["data-testid"],A=v.value,F=v.editing,M=v.disabled,w=v.onFinishEditing,B=v.onCancelEditing,k=v.onIgnoreBlurEvent,N=v.errorClassTimeout,S=void 0===N?2e3:N,z=v.style,D=v.customColor,K=v.onStartEditing,V=v.contentRenderer,_=v.tooltip,R=v.autoSize,G=void 0===R||R,W=v.highlightTerm,X=void 0===W?null:W,q=v.insetFocus,J=void 0!==q&&q,Q=v.size,U=void 0===Q?h.LARGE:Q,Y=v.displayPlaceholderInTextMode,Z=void 0===Y||Y,$=v.suggestEditOnHover,ee=void 0===$||$,oe=v.type,te=void 0===oe?m.types.h1:oe,ie=T([void 0===P?"":P,void 0===O?"":O]),ne=r(F&&!M),se=e(ne,2),ae=se[0],le=se[1],re=r(!1),ue=e(re,2),de=ue[0],ce=ue[1],pe=r(A||""),me=e(pe,2),ge=me[0],fe=me[1],ye=y(A),Ee=u(null),ve=d((function(e){M||ae||(le(!0),K&&K(e))}),[ae,M,le,K]),he=d((function(e,o){le(!1),fe(e),null==w||w(e,o)}),[w,le,fe]),Ce=d((function(e){le(!1),null==B||B(e)}),[B,le]),be=d((function(e){null==k||k(e)}),[k]),Le=d((function(){ce(!1)}),[ce]),Te=d((function(){ce(!0)}),[ce]),je=d((function(){Le()}),[Le]);c((function(){F||A===ye||A===ge||fe(A)}),[F,A,ye,ge,fe]),c((function(){le(F)}),[F]),p((function(){F||ge||!A||fe(A)}),[F,A,ye,ge,fe]),c((function(){var e;return de&&(e=setTimeout(Le,S)),function(){return e&&clearTimeout(e)}}),[de,ce,Le,S]);var He,Ie,xe,Oe=!M&&ae;return l.createElement("div",{ref:Ee,style:z,className:a(L.editableHeadingWrapper,H,o({},L.insetFocus,J)),"aria-label":"".concat(A," ").concat(_||""),id:j,"data-testid":ie||n(s.EDITABLE_HEADING,j)},l.createElement(g,{role:Oe?"button":"input",onClick:ve,disabled:M},Oe?(Ie=v.inputType||(v.ellipsisMaxLines>1?E.TEXT_AREA:void 0),xe={value:ge,className:a(i(b,t("element-type-"+te)),i(b,t("size-"+U)),x),isValidValue:v.isValidValue,onChange:v.onChange,onKeyDown:v.onKeyDown,onKeyPress:v.onKeyPress,onClick:v.onClick,customColor:D,onTabHandler:v.onTabHandler,onArrowKeyDown:v.onArrowKeyDown,autoComplete:v.autoComplete,maxLength:v.maxLength,placeholder:v.placeholder,shouldFocusOnMount:v.shouldFocusOnMount,selectOnMount:v.selectOnMount,onBlur:v.onBlur,onFocus:v.onFocus,inputType:Ie,ignoreBlurClass:v.ignoreBlurClass,autoSize:G,textareaSubmitOnEnter:v.textareaSubmitOnEnter,onFinishEditing:he,onCancelEditing:Ce,onIgnoreBlurEvent:be,onError:Te,onSuccess:je,ariaLabel:v.inputAriaLabel},l.createElement(f,Object.assign({},xe))):(He={value:Z?ge||v.placeholder||"":ge,type:te,customColor:D,suggestEditOnHover:ee&&!M,tooltipPosition:v.tooltipPosition,ellipsisMaxLines:v.ellipsisMaxLines,nonEllipsisTooltip:v.tooltip,size:U,highlightTerm:X,className:a(L.headingComponent,v.headingClassName)},V?V(He):l.createElement(m,Object.assign({},He)))))}),{types:v,sizes:h});export{j as default};
//# sourceMappingURL=LegacyEditableHeading.js.map
