{"version":3,"file":"DialogContent.js","sources":["../../../../../../src/components/Dialog/DialogContent/DialogContent.tsx"],"sourcesContent":["/* eslint-disable react/jsx-props-no-spreading */\nimport React, { cloneElement, CSSProperties, ReactElement, useCallback, useEffect, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { camelCase } from \"lodash-es\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { CSSTransitionProps } from \"react-transition-group/CSSTransition\";\nimport useClickOutside from \"../../../hooks/useClickOutside\";\nimport { chainFunctions, NOOP } from \"../../../utils/function-utils\";\nimport useKeyEvent from \"../../../hooks/useKeyEvent\";\nimport { HideShowEvent } from \"../consts/dialog-show-hide-event\";\nimport { VibeComponent, VibeComponentProps } from \"../../../types\";\nimport { AnimationType, keyCodes } from \"../../../constants\";\nimport * as PopperJS from \"@popperjs/core\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\nimport styles from \"./DialogContent.module.scss\";\nimport useDisableScroll from \"../../../hooks/useDisableScroll\";\n\nconst EMPTY_OBJECT = {};\nconst ESCAPE_KEYS = [keyCodes.ESCAPE];\n\nexport interface DialogContentProps extends VibeComponentProps {\n  children?: ReactElement | ReactElement[];\n  position?: PopperJS.Placement;\n  wrapperClassName?: string;\n  isOpen?: boolean;\n  // TODO breaking change convert to enum\n  startingEdge?: any;\n  // TODO breaking change convert to enum - AnimationType\n  animationType?: string;\n  onEsc?: (event: React.KeyboardEvent) => void;\n  onMouseEnter?: (event: React.MouseEvent) => void;\n  onMouseLeave?: (event: React.MouseEvent) => void;\n  onClickOutside?: (event: React.MouseEvent, hideShowEvent: HideShowEvent) => void;\n  onClick?: (event: React.MouseEvent) => void;\n  showDelay?: number;\n  styleObject?: CSSProperties;\n  isReferenceHidden?: boolean;\n  hasTooltip?: boolean;\n  disableOnClickOutside?: boolean; // TODO prop is passsed, but not used. How it should behave?\n  containerSelector?: string;\n  disableContainerScroll?: boolean | string;\n  /**\n   * On context menu event (right click) outside of the dialog\n   * @param e\n   */\n  onContextMenu?: (e: React.MouseEvent) => void;\n  \"data-testid\"?: string;\n}\n\nexport const DialogContent: VibeComponent<DialogContentProps> = React.forwardRef(\n  (\n    {\n      onEsc = NOOP,\n      children,\n      position,\n      wrapperClassName,\n      isOpen = false,\n      startingEdge,\n      animationType = \"expand\",\n      onMouseEnter = NOOP,\n      onMouseLeave = NOOP,\n      onClickOutside = NOOP,\n      onClick = NOOP,\n      onContextMenu = NOOP,\n      showDelay,\n      styleObject = EMPTY_OBJECT,\n      isReferenceHidden,\n      hasTooltip = false,\n      containerSelector,\n      disableContainerScroll = false,\n      \"data-testid\": dataTestId\n    },\n    forwardRef\n  ) => {\n    const ref = useRef(null);\n    const onOutSideClick = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          return onClickOutside(event, HideShowEvent.CLICK_OUTSIDE);\n        }\n      },\n      [isOpen, onClickOutside]\n    );\n    const overrideOnContextMenu = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          onContextMenu(event);\n        }\n      },\n      [isOpen, onContextMenu]\n    );\n    useKeyEvent({ keys: ESCAPE_KEYS, callback: onEsc });\n    useClickOutside({ callback: onOutSideClick, ref });\n    useClickOutside({ eventName: \"contextmenu\", callback: overrideOnContextMenu, ref });\n    const selectorToDisable = typeof disableContainerScroll === \"string\" ? disableContainerScroll : containerSelector;\n    const { disableScroll, enableScroll } = useDisableScroll(selectorToDisable);\n\n    useEffect(() => {\n      if (disableContainerScroll) {\n        if (isOpen) {\n          disableScroll();\n        } else {\n          enableScroll();\n        }\n      }\n    }, [disableContainerScroll, disableScroll, enableScroll, isOpen]);\n\n    const transitionOptions: Partial<CSSTransitionProps> = { classNames: undefined };\n\n    switch (animationType) {\n      case AnimationType.EXPAND:\n        transitionOptions.classNames = {\n          appear: styles.expandAppear,\n          appearActive: styles.expandAppearActive,\n          exit: styles.expandExit\n        };\n        break;\n      case AnimationType.OPACITY_AND_SLIDE:\n        transitionOptions.classNames = {\n          appear: styles.opacitySlideAppear,\n          appearActive: styles.opacitySlideAppearActive\n        };\n        break;\n    }\n    return (\n      <span\n        // don't remove old classname - override from Monolith\n        className={cx(\"monday-style-dialog-content-wrapper\", styles.contentWrapper, wrapperClassName)}\n        ref={forwardRef}\n        data-testid={dataTestId}\n        style={styleObject}\n        onClickCapture={onClick}\n        data-popper-reference-hidden={isReferenceHidden}\n      >\n        <CSSTransition {...transitionOptions} in={isOpen} appear={!!animationType} timeout={showDelay}>\n          <div\n            className={cx(styles.contentComponent, getStyle(styles, camelCase(position)), {\n              [getStyle(styles, camelCase(\"edge-\" + startingEdge))]: startingEdge,\n              [styles.hasTooltip]: hasTooltip\n            })}\n            ref={ref}\n          >\n            {React.Children.toArray(children).map((child: ReactElement) => {\n              return cloneElement(child, {\n                onMouseEnter: chainFunctions([child.props.onMouseEnter, onMouseEnter]),\n                onMouseLeave: chainFunctions([child.props.onMouseLeave, onMouseLeave])\n              });\n            })}\n          </div>\n        </CSSTransition>\n      </span>\n    );\n  }\n);\n"],"names":["EMPTY_OBJECT","ESCAPE_KEYS","keyCodes","ESCAPE","DialogContent","React","forwardRef","_ref","_ref$onEsc","onEsc","NOOP","children","position","wrapperClassName","_ref$isOpen","isOpen","startingEdge","_ref$animationType","animationType","_ref$onMouseEnter","onMouseEnter","_ref$onMouseLeave","onMouseLeave","_ref$onClickOutside","onClickOutside","_ref$onClick","onClick","_ref$onContextMenu","onContextMenu","showDelay","_ref$styleObject","styleObject","isReferenceHidden","_ref$hasTooltip","hasTooltip","containerSelector","_ref$disableContainer","disableContainerScroll","dataTestId","ref","useRef","onOutSideClick","useCallback","event","HideShowEvent","CLICK_OUTSIDE","overrideOnContextMenu","useKeyEvent","keys","callback","useClickOutside","eventName","_useDisableScroll","useDisableScroll","disableScroll","enableScroll","useEffect","transitionOptions","classNames","undefined","AnimationType","EXPAND","appear","styles","expandAppear","appearActive","expandAppearActive","exit","expandExit","OPACITY_AND_SLIDE","opacitySlideAppear","opacitySlideAppearActive","createElement","className","cx","contentWrapper","style","onClickCapture","CSSTransition","Object","assign","in","timeout","contentComponent","getStyle","camelCase","_defineProperty","Children","toArray","map","child","cloneElement","chainFunctions","props"],"mappings":"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"}