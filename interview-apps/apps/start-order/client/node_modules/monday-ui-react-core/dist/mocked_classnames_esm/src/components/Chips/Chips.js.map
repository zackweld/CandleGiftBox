{"version":3,"file":"Chips.js","sources":["../../../../../src/components/Chips/Chips.tsx"],"sourcesContent":["import React, { forwardRef, RefObject, useCallback, useMemo, useRef } from \"react\";\nimport cx from \"classnames\";\nimport Icon from \"../Icon/Icon\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport CloseSmall from \"../Icon/Icons/components/CloseSmall\";\nimport { getCSSVar } from \"../../services/themes\";\nimport { ElementAllowedColor, ElementColor, getElementColor } from \"../../utils/colors-vars-map\";\nimport Avatar from \"../Avatar/Avatar\";\nimport IconButton from \"../IconButton/IconButton\";\nimport Text from \"../Text/Text\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport { AvatarType } from \"../Avatar/AvatarConstants\";\nimport { ElementContent, SubIcon, VibeComponent, VibeComponentProps, withStaticProps } from \"../../types\";\nimport useHover from \"../../hooks/useHover/useHover\";\nimport useSetFocus from \"../../hooks/useSetFocus\";\nimport useClickableProps from \"../../hooks/useClickableProps/useClickableProps\";\nimport { backwardCompatibilityForProperties } from \"../../helpers/backwardCompatibilityForProperties\";\nimport styles from \"./Chips.module.scss\";\n\nconst CHIPS_AVATAR_SIZE = 18;\n\nexport interface ChipsProps extends VibeComponentProps {\n  label?: ElementContent;\n  disabled?: boolean;\n  readOnly?: boolean;\n  /**\n   * @deprecated - use \"data-testid\" instead\n   */\n  dataTestId?: string;\n  \"data-testid\"?: string;\n  /**\n   * A React element that is positioned to the right of the text\n   */\n  rightRenderer?: ElementContent;\n  /**\n   * A React element that is positioned to the left of the text\n   */\n  leftRenderer?: ElementContent;\n  /** Icon to place on the right */\n  rightIcon?: SubIcon;\n  /** Icon to place on the left */\n  leftIcon?: SubIcon;\n  /** Img to place as avatar on the right */\n  rightAvatar?: string;\n  /** the type of right avatar */\n  rightAvatarType?: AvatarType;\n  /** Img to place as avatar on the left */\n  leftAvatar?: string;\n  /** the type of left avatar */\n  leftAvatarType?: AvatarType;\n  /** ClassName for left or right icon */\n  iconClassName?: string;\n  /** ClassName for left or right avatar */\n  avatarClassName?: string;\n  // TODO Vibe 3.0: filter ElementAllowedColor.DARK_INDIGO, ElementAllowedColor.BLACKISH from colors which are valid for Chips\n  color?: ElementColor;\n  /** Size for font icon */\n  iconSize?: number | string;\n  onDelete?: (id: string, event: React.MouseEvent<HTMLSpanElement>) => void;\n  /**\n   * Disables the Chip's entry animation\n   */\n  noAnimation?: boolean;\n  /**\n   * Allow user to select text\n   */\n  allowTextSelection?: boolean;\n  /**\n   * Callback function to be called when the user clicks the component.\n   */\n  onMouseDown?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  /**\n   * Callback function to be called when the user clicks the component.\n   */\n  onClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  /**\n   * Applies when element has onClick or onMouseDown props\n   */\n  ariaLabel?: string;\n  /**\n   * Deprecated, there is no need to use this prop for implementing clickable chips. Please use onClick for this purpose.\n   * @deprecated\n   */\n  clickable?: boolean;\n  /**\n   * Deprecated, there is no need to use this prop for implementing clickable chips. Please use onClick for this purpose.\n   * @deprecated\n   */\n  isClickable?: boolean;\n  /**\n   * Disable click behaviors\n   */\n  disableClickableBehavior?: boolean;\n  /**\n   * Show border, the border color is `--text-color-on-primary`, should be when the chip is a colored background like\n   * selected-color\n   */\n  showBorder?: boolean;\n  closeButtonAriaLabel?: string;\n}\n\nconst Chips: VibeComponent<ChipsProps, HTMLDivElement> & {\n  colors?: typeof ElementAllowedColor;\n  avatarTypes?: typeof AvatarType;\n} = forwardRef<HTMLDivElement, ChipsProps>(\n  (\n    {\n      className,\n      avatarClassName,\n      iconClassName,\n      id,\n      label = \"\",\n      leftIcon = null,\n      rightIcon = null,\n      leftAvatar = null,\n      rightAvatar = null,\n      disabled = false,\n      readOnly = false,\n      allowTextSelection = false,\n      color = Chips.colors.PRIMARY,\n      iconSize = 18,\n      onDelete = (_id: string, _e: React.MouseEvent<HTMLSpanElement>) => {},\n      onMouseDown,\n      onClick,\n      noAnimation = true,\n      ariaLabel,\n      dataTestId: backwardCompatabilityDataTestId,\n      \"data-testid\": dataTestId,\n      disableClickableBehavior = false,\n      leftAvatarType = AvatarType.IMG,\n      rightAvatarType = AvatarType.IMG,\n      showBorder = false,\n      leftRenderer,\n      rightRenderer,\n      closeButtonAriaLabel = \"Remove\"\n    },\n    ref\n  ) => {\n    const overrideDataTestId = backwardCompatibilityForProperties(\n      [dataTestId, backwardCompatabilityDataTestId],\n      getTestId(ComponentDefaultTestId.CHIP, id)\n    );\n    const hasClickableWrapper = (!!onClick || !!onMouseDown) && !disableClickableBehavior;\n    const hasCloseButton = !readOnly && !disabled;\n    const overrideAriaLabel = ariaLabel || (typeof label === \"string\" && label) || \"\";\n\n    const iconButtonRef = useRef(null);\n    const componentRef = useRef(null);\n\n    const [hoverRef, isHovered] = useHover<HTMLDivElement>();\n    const { isFocused } = useSetFocus({ ref: componentRef });\n\n    const mergedRef = useMergeRef<HTMLDivElement>(ref, componentRef, hoverRef);\n\n    const overrideClassName = cx(styles.chips, className, {\n      [styles.disabled]: disabled,\n      [styles.noAnimation]: noAnimation,\n      [styles.withUserSelect]: allowTextSelection,\n      [styles.border]: showBorder\n    });\n    const clickableClassName = cx(styles.clickable, overrideClassName, {\n      [styles.disabled]: disabled,\n      [styles.disableTextSelection]: !allowTextSelection\n    });\n\n    const backgroundColorStyle = useMemo(() => {\n      let cssVar;\n      if (disabled) {\n        cssVar = getCSSVar(\"disabled-background-color\");\n      } else if (hasClickableWrapper && (isHovered || isFocused)) {\n        cssVar = getElementColor(color, true, true);\n      } else {\n        cssVar = getElementColor(color, true);\n      }\n      return { backgroundColor: cssVar };\n    }, [disabled, hasClickableWrapper, isHovered, isFocused, color]);\n\n    const onDeleteCallback = useCallback(\n      (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\n        e.stopPropagation();\n        if (onDelete) {\n          onDelete(id, e);\n        }\n      },\n      [id, onDelete]\n    );\n\n    const onClickCallback = useCallback(\n      (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        if (onClick !== undefined && (e.target as HTMLElement) !== iconButtonRef.current) {\n          e.preventDefault();\n          onClick(e);\n        }\n      },\n      [onClick]\n    );\n\n    const clickableProps = useClickableProps(\n      {\n        onClick: onClickCallback,\n        onMouseDown,\n        disabled,\n        id,\n        \"data-testid\": overrideDataTestId,\n        ariaLabel: overrideAriaLabel,\n        ariaHidden: false,\n        ariaHasPopup: false,\n        ariaExpanded: false\n      },\n      mergedRef\n    );\n    const wrapperProps = hasClickableWrapper\n      ? {\n          ...clickableProps,\n          ref: clickableProps.ref as RefObject<HTMLDivElement>,\n          className: clickableClassName,\n          style: backgroundColorStyle\n        }\n      : {\n          className: overrideClassName,\n          \"aria-label\": overrideAriaLabel,\n          style: backgroundColorStyle,\n          ref: mergedRef,\n          onClick: onClickCallback,\n          onMouseDown,\n          id: id,\n          \"data-testid\": overrideDataTestId\n        };\n\n    const leftAvatarProps = leftAvatarType === AvatarType.TEXT ? { text: leftAvatar } : { src: leftAvatar };\n    const rightAvatarProps = leftAvatarType === AvatarType.TEXT ? { text: rightAvatar } : { src: rightAvatar };\n\n    return (\n      <div {...wrapperProps}>\n        {leftAvatar ? (\n          <Avatar\n            withoutBorder\n            className={cx(styles.avatar, styles.left, avatarClassName)}\n            customSize={CHIPS_AVATAR_SIZE}\n            type={leftAvatarType}\n            key={id}\n            {...leftAvatarProps}\n          />\n        ) : null}\n        {leftIcon ? (\n          <Icon\n            className={cx(styles.icon, styles.left, iconClassName)}\n            iconType={Icon.type.ICON_FONT}\n            clickable={false}\n            icon={leftIcon}\n            iconSize={iconSize}\n            ignoreFocusStyle\n          />\n        ) : null}\n        {leftRenderer && <div className={cx(styles.customRenderer, styles.left)}>{leftRenderer}</div>}\n        <Text type={Text.types.TEXT2} className={styles.label}>\n          {label}\n        </Text>\n        {rightIcon ? (\n          <Icon\n            className={cx(styles.icon, styles.right, iconClassName)}\n            iconType={Icon.type.ICON_FONT}\n            clickable={false}\n            icon={rightIcon}\n            iconSize={iconSize}\n            ignoreFocusStyle\n          />\n        ) : null}\n        {rightAvatar ? (\n          <Avatar\n            withoutBorder\n            className={cx(styles.avatar, styles.right, avatarClassName)}\n            customSize={CHIPS_AVATAR_SIZE}\n            type={rightAvatarType}\n            key={id}\n            {...rightAvatarProps}\n          />\n        ) : null}\n        {rightRenderer && <div className={cx(styles.customRenderer, styles.right)}>{rightRenderer}</div>}\n        {hasCloseButton && (\n          <IconButton\n            size={IconButton.sizes.XXS}\n            color={IconButton.colors.ON_PRIMARY_COLOR}\n            className={cx(styles.icon, styles.close)}\n            ariaLabel={closeButtonAriaLabel}\n            hideTooltip\n            icon={CloseSmall}\n            onClick={onDeleteCallback}\n            data-testid={`${overrideDataTestId}-close`}\n            ref={iconButtonRef}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nexport default withStaticProps(Chips, {\n  colors: ElementAllowedColor,\n  avatarTypes: AvatarType\n});\n"],"names":["Chips","forwardRef","_ref","ref","className","avatarClassName","iconClassName","id","_ref$label","label","_ref$leftIcon","leftIcon","_ref$rightIcon","rightIcon","_ref$leftAvatar","leftAvatar","_ref$rightAvatar","rightAvatar","_ref$disabled","disabled","_ref$readOnly","readOnly","_ref$allowTextSelecti","allowTextSelection","_ref$color","color","colors","PRIMARY","_ref$iconSize","iconSize","_ref$onDelete","onDelete","_id","_e","onMouseDown","onClick","_ref$noAnimation","noAnimation","ariaLabel","_ref$disableClickable","disableClickableBehavior","_ref$leftAvatarType","leftAvatarType","AvatarType","IMG","_ref$rightAvatarType","rightAvatarType","_ref$showBorder","showBorder","leftRenderer","rightRenderer","_ref$closeButtonAriaL","closeButtonAriaLabel","overrideDataTestId","backwardCompatibilityForProperties","dataTestId","getTestId","ComponentDefaultTestId","CHIP","hasClickableWrapper","hasCloseButton","overrideAriaLabel","iconButtonRef","useRef","componentRef","_useHover","useHover","_useHover2","_slicedToArray","hoverRef","isHovered","isFocused","useSetFocus","mergedRef","useMergeRef","overrideClassName","cx","styles","chips","_defineProperty","withUserSelect","border","clickableClassName","clickable","disableTextSelection","backgroundColorStyle","useMemo","backgroundColor","getCSSVar","getElementColor","onDeleteCallback","useCallback","e","stopPropagation","onClickCallback","undefined","target","current","preventDefault","clickableProps","useClickableProps","ariaHidden","ariaHasPopup","ariaExpanded","wrapperProps","style","leftAvatarProps","TEXT","text","src","rightAvatarProps","React","createElement","Avatar","withoutBorder","avatar","left","customSize","type","key","Icon","icon","iconType","ICON_FONT","ignoreFocusStyle","customRenderer","Text","types","TEXT2","right","IconButton","size","sizes","XXS","ON_PRIMARY_COLOR","close","hideTooltip","CloseSmall","concat","withStaticProps","ElementAllowedColor","avatarTypes"],"mappings":"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"}