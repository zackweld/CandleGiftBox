import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import t from"classnames";import n,{forwardRef as r,useState as i,useRef as a,useCallback as s,useLayoutEffect as u,useEffect as l}from"react";import c from"autosize";import d from"../../hooks/useStyle.js";import m from"../../hooks/useMergeRef.js";import{isTabEvent as f,isEnterEvent as p,isEscapeEvent as v,isArrowUpEvent as E,isArrowDownEvent as T,isArrowLeftEvent as b,isArrowRightEvent as g}from"../../utils/dom-event-utils.js";import{withStaticProps as y}from"../../types/withStaticProps.js";import{InputType as A}from"./EditableInputConstants.js";import{getTestId as h,ComponentDefaultTestId as C}from"../../tests/testIds.js";import I from"./EditableInput.module.scss.js";var j=y(r((function(r,y){var j=r.className,P=r.inputType,_=void 0===P?A.INPUT:P,w=r.autoSize,x=void 0!==w&&w,B=r.id,R=r.tabIndex,D=r.autoComplete,F=void 0===D||D,K=r.disabled,L=void 0!==K&&K,S=r.maxLength,k=r.placeholder,N=void 0===k?"":k,X=r.onClick,z=r.onKeyPress,M=r.shouldFocusOnMount,O=void 0===M||M,H=r.selectOnMount,U=r.value,V=r.customColor,q=r.ignoreBlurClass,W=r.onFinishEditing,G=r.onIgnoreBlurEvent,J=r.onFocus,Q=r.onBlur,Y=r.isValidValue,Z=r.onChange,$=r.onError,ee=r.onSuccess,oe=r.onKeyDown,te=r.onTabHandler,ne=r.onCancelEditing,re=r.textareaSubmitOnEnter,ie=void 0!==re&&re,ae=r.onArrowKeyDown,se=r.ariaLabel,ue=r["data-testid"],le=i(U||""),ce=e(le,2),de=ce[0],me=ce[1],fe=a(null),pe=m(y,fe),ve=s((function(){fe.current&&x&&_===A.TEXT_AREA&&c(fe.current)}),[fe,x,_]),Ee=s((function(){fe.current&&requestAnimationFrame((function(){var e;null===(e=fe.current)||void 0===e||e.focus()}))}),[fe]),Te=s((function(e){J&&J(e)}),[J]),be=s((function(e){if(t=q,(o=e.relatedTarget)&&t&&o.classList.contains(t))G(de);else{var o,t,n=e;n.origin="blur",W&&W(de,n),Q&&Q(n)}}),[q,de,W,Q,G]),ge=s((function(e){var o=e.target.value;!Y||Y(o)?(me(o),Z&&Z(o),ee&&ee()):$&&$()}),[Y,Z,$,ee]),ye=s((function(){fe.current&&fe.current.select()}),[fe]),Ae=s((function(){fe.current&&(fe.current.value="",fe.current.value=de)}),[fe,de]),he=s((function(e){return oe?oe(e,de):te&&f(e)&&_!==A.TEXT_AREA?(e.preventDefault(),te(de,e)):(W&&p(e)&&(_!==A.TEXT_AREA||ie)&&W(de,e),ne&&v(e)&&ne(e),void(ae&&(E(e)||T(e)||b(e)||g(e))&&ae(de,e)))}),[oe,_,de,te,ie,W,ne,ae]);u((function(){O&&Ee(),ve(),H?ye():Ae()}),[]),l((function(){me(U)}),[U]);var Ce=d(void 0,{color:V}),Ie=_===A.TEXT_AREA&&x?1:void 0;return n.createElement(_,{ref:pe,id:B,"data-testid":ue||h(C.EDITABLE_INPUT,B),style:Ce,className:t(I.editableInputWrapper,j,o({},I.noResize,x)),onChange:ge,onKeyDown:he,onBlur:be,onFocus:Te,onClick:X,onKeyPress:z,value:de,placeholder:N,dir:"auto",tabIndex:R,autoComplete:F?"on":"off",rows:Ie,maxLength:S,"aria-label":se,disabled:L})})),{inputTypes:A});export{j as default};
//# sourceMappingURL=EditableInput.js.map
