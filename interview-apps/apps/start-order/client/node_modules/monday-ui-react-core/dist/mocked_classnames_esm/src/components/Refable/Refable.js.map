{"version":3,"file":"Refable.js","sources":["../../../../../src/components/Refable/Refable.tsx"],"sourcesContent":["import React, { HTMLProps, MutableRefObject, ReactElement } from \"react\";\nimport { chainFunctions, chainRefFunctions } from \"../../utils/function-utils\";\nimport { VibeComponentProps } from \"../../types\";\n\nexport const Refable = React.forwardRef<\n  ReactElement,\n  React.PropsWithChildren<unknown & HTMLProps<any> & VibeComponentProps> & {\n    children: ReactElement | ReactElement[] | string;\n  }\n  //   @ts-expect-error React forwardRef type def doesn't seem to support multiple refs\n>(({ children, ...rest }, ref) => {\n  return React.Children.map(children, child => {\n    if (!React.isValidElement(child)) return null;\n\n    if (typeof child.type !== \"string\") {\n      return (\n        <span ref={ref as MutableRefObject<any>} {...rest}>\n          {React.cloneElement(child, { ...child.props })}\n        </span>\n      );\n    }\n\n    return React.cloneElement(child, {\n      ...rest,\n      ...child.props,\n      onClick: getChainedFunction(\"onClick\", child.props, rest),\n      onBlur: getChainedFunction(\"onBlur\", child.props, rest),\n      onMouseEnter: getChainedFunction(\"onMouseEnter\", child.props, rest),\n      onMouseLeave: getChainedFunction(\"onMouseLeave\", child.props, rest),\n      onMouseDown: getChainedFunction(\"onMouseDown\", child.props, rest),\n      onFocus: getChainedFunction(\"onFocus\", child.props, rest),\n      // @ts-expect-error\n      ref: chainRefFunctions([child.ref, ref as MutableRefObject<any>])\n    });\n  });\n});\n\nfunction getChainedFunction(\n  name: keyof React.HTMLProps<unknown>,\n  childProps: React.PropsWithChildren<React.HTMLProps<unknown>>,\n  wrapperProps: React.HTMLProps<unknown>\n) {\n  return chainFunctions([childProps[name], wrapperProps[name]], true);\n}\n"],"names":["Refable","React","forwardRef","_a","ref","children","rest","__rest","Children","map","child","isValidElement","type","cloneElement","props","Object","assign","onClick","getChainedFunction","onBlur","onMouseEnter","onMouseLeave","onMouseDown","onFocus","chainRefFunctions","name","childProps","wrapperProps","chainFunctions"],"mappings":"gKAIO,IAAMA,EAAUC,EAAMC,YAM3B,SAACC,EAAuBC,GAAvB,IAAEC,EAAmBF,EAAnBE,SAAaC,EAAIC,EAAAJ,EAAnB,cACD,OAAOF,EAAMO,SAASC,IAAIJ,GAAU,SAAAK,GAClC,OAAKT,EAAMU,eAAeD,GAEA,iBAAfA,EAAME,KAEbX,sCAAMG,IAAKA,GAAkCE,GAC1CL,EAAMY,aAAaH,mBAAYA,EAAMI,SAKrCb,EAAMY,aAAaH,EAAKK,OAAAC,OAAAD,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EAC1BV,GACAI,EAAMI,OAAK,CACdG,QAASC,EAAmB,UAAWR,EAAMI,MAAOR,GACpDa,OAAQD,EAAmB,SAAUR,EAAMI,MAAOR,GAClDc,aAAcF,EAAmB,eAAgBR,EAAMI,MAAOR,GAC9De,aAAcH,EAAmB,eAAgBR,EAAMI,MAAOR,GAC9DgB,YAAaJ,EAAmB,cAAeR,EAAMI,MAAOR,GAC5DiB,QAASL,EAAmB,UAAWR,EAAMI,MAAOR,GAEpDF,IAAKoB,EAAkB,CAACd,EAAMN,IAAKA,OApBI,IAsB3C,GACF,IAEA,SAASc,EACPO,EACAC,EACAC,GAEA,OAAOC,EAAe,CAACF,EAAWD,GAAOE,EAAaF,KAAQ,EAChE"}