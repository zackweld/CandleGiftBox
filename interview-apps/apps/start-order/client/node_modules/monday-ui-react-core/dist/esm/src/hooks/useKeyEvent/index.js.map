{"version":3,"file":"index.js","sources":["../../../../../src/hooks/useKeyEvent/index.ts"],"sourcesContent":["import { RefObject, useCallback, useRef } from \"react\";\nimport useEventListener from \"../useEventListener\";\nimport { GenericEventCallback } from \"../../types/events\";\n\nconst CTRL_OR_META = \"ctrlOrMetaKey\";\n\nenum Modifier {\n  ALT = \"altKey\",\n  META = \"metaKey\",\n  CTRL = \"ctrlKey\",\n  SHIFT = \"shiftKey\",\n  CTRL_OR_META = \"ctrlOrMetaKey\"\n}\n\nconst checkModifierInEvent = (event: KeyboardEvent, modifier: Modifier) => {\n  if (modifier === Modifier.CTRL_OR_META) {\n    return event.ctrlKey || event.metaKey;\n  }\n\n  return event[modifier];\n};\nconst checkWithoutModifierInEvent = (event: KeyboardEvent) => {\n  return !Object.values(useKeyEvent.modifiers).some((m: Modifier) => {\n    if (m !== CTRL_OR_META) {\n      return !!event[m];\n    }\n  });\n};\n\nexport interface UseKeyEventArgs {\n  keys: KeyboardEvent[\"key\"][];\n  // TODO: [breaking] change to keyboard event\n  callback: GenericEventCallback;\n  modifier?: Modifier;\n  keyEventName?: string;\n  withoutAnyModifier?: boolean;\n  ref?: RefObject<HTMLElement | Document>;\n  ignoreDocumentFallback?: boolean;\n  capture?: boolean;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n}\n\nexport default function useKeyEvent({\n  keys = [],\n  callback,\n  modifier,\n  withoutAnyModifier,\n  ref,\n  ignoreDocumentFallback = false,\n  capture = false,\n  preventDefault = false,\n  stopPropagation = false,\n  keyEventName = \"keydown\" // need keydown and not keyup to prevent scrolling with prevent default, for example during menu keyboard navigation\n}: UseKeyEventArgs) {\n  const documentRef = useRef(document.body);\n  const onKeyUpPress = useCallback(\n    (event: KeyboardEvent) => {\n      const { key } = event;\n      if (!keys.includes(key)) {\n        return;\n      }\n      if (modifier && !checkModifierInEvent(event, modifier)) {\n        return;\n      }\n      if (withoutAnyModifier && !checkWithoutModifierInEvent(event)) {\n        return;\n      }\n\n      if (preventDefault) {\n        event.preventDefault();\n      }\n\n      if (stopPropagation) {\n        event.stopPropagation();\n      }\n\n      callback(event);\n    },\n    [keys, modifier, withoutAnyModifier, preventDefault, stopPropagation, callback]\n  );\n\n  let listenerRef;\n\n  if (ref) {\n    listenerRef = ref;\n  } else if (ignoreDocumentFallback) {\n    listenerRef = null;\n  } else {\n    listenerRef = documentRef;\n  }\n\n  useEventListener({\n    eventName: keyEventName,\n    callback: onKeyUpPress,\n    ref: listenerRef,\n    capture\n  });\n}\n\nuseKeyEvent.modifiers = Modifier;\n"],"names":["Modifier","useKeyEvent","_ref","_ref$keys","keys","callback","modifier","withoutAnyModifier","ref","_ref$ignoreDocumentFa","ignoreDocumentFallback","_ref$capture","capture","_ref$preventDefault","preventDefault","_ref$stopPropagation","stopPropagation","_ref$keyEventName","keyEventName","documentRef","useRef","document","body","onKeyUpPress","useCallback","event","includes","key","CTRL_OR_META","ctrlKey","metaKey","checkModifierInEvent","Object","values","modifiers","some","m","checkWithoutModifierInEvent","useEventListener","eventName"],"mappings":"4FAIA,IAEKA,GAAL,SAAKA,GACHA,EAAA,IAAA,SACAA,EAAA,KAAA,UACAA,EAAA,KAAA,UACAA,EAAA,MAAA,WACAA,EAAA,aAAA,eACD,CAND,CAAKA,IAAAA,EAMJ,CAAA,IA+Ba,SAAUC,EAAWC,GAWjB,IAAAC,EAAAD,EAVhBE,KAAAA,OAAO,IAAHD,EAAG,GAAEA,EACTE,EAAQH,EAARG,SACAC,EAAQJ,EAARI,SACAC,EAAkBL,EAAlBK,mBACAC,EAAGN,EAAHM,IAAGC,EAAAP,EACHQ,uBAAAA,OAAyB,IAAHD,GAAQA,EAAAE,EAAAT,EAC9BU,QAAAA,OAAU,IAAHD,GAAQA,EAAAE,EAAAX,EACfY,eAAAA,OAAiB,IAAHD,GAAQA,EAAAE,EAAAb,EACtBc,gBAAAA,OAAkB,IAAHD,GAAQA,EAAAE,EAAAf,EACvBgB,aAAAA,OAAe,IAAHD,EAAG,UAASA,EAElBE,EAAcC,EAAOC,SAASC,MAC9BC,EAAeC,GACnB,SAACC,GAEMrB,EAAKsB,SADMD,EAARE,OAIJrB,IAhDmB,SAACmB,EAAsBnB,GAClD,OAAIA,IAAaN,EAAS4B,aACjBH,EAAMI,SAAWJ,EAAMK,QAGzBL,EAAMnB,EACf,CA0CuByB,CAAqBN,EAAOnB,IAGzCC,IA5C0B,SAACkB,GACnC,OAAQO,OAAOC,OAAOhC,EAAYiC,WAAWC,MAAK,SAACC,GACjD,GAnBiB,kBAmBbA,EACF,QAASX,EAAMW,EAEnB,GACF,CAsCiCC,CAA4BZ,KAInDX,GACFW,EAAMX,iBAGJE,GACFS,EAAMT,kBAGRX,EAASoB,IACX,GACA,CAACrB,EAAME,EAAUC,EAAoBO,EAAgBE,EAAiBX,IAaxEiC,EAAiB,CACfC,UAAWrB,EACXb,SAAUkB,EACVf,IAXEA,IAEOE,EACK,KAEAS,GAOdP,QAAAA,GAEJ,CAEAX,EAAYiC,UAAYlC"}