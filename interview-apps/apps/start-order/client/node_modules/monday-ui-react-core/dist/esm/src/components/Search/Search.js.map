{"version":3,"file":"Search.js","sources":["../../../../../src/components/Search/Search.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { forwardRef, useCallback, useRef } from \"react\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport CloseSmallIcon from \"../Icon/Icons/components/CloseSmall\";\nimport SearchIcon from \"../Icon/Icons/components/Search\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport styles from \"./Search.module.scss\";\nimport BaseInput from \"../BaseInput/BaseInput\";\nimport useDebounceEvent from \"../../hooks/useDebounceEvent\";\nimport IconButton from \"../IconButton/IconButton\";\nimport Icon from \"../Icon/Icon\";\nimport { SearchProps } from \"./Search.types\";\nimport Loader from \"../Loader/Loader\";\n\nconst Search = forwardRef(\n  (\n    {\n      searchIconName = SearchIcon,\n      clearIconName = CloseSmallIcon,\n      clearIconLabel = \"Clear\",\n      renderAction: RenderAction,\n      hideRenderActionOnInput,\n      value,\n      placeholder,\n      size = \"medium\",\n      disabled,\n      loading,\n      autoFocus,\n      autoComplete = \"off\",\n      inputAriaLabel,\n      debounceRate = 400,\n      searchResultsContainerId,\n      currentAriaResultId,\n      onChange,\n      onFocus,\n      onBlur,\n      onClear,\n      className,\n      ariaExpanded,\n      ariaHasPopup,\n      id,\n      \"data-testid\": dataTestId\n    }: SearchProps,\n    ref: React.ForwardedRef<HTMLInputElement>\n  ) => {\n    const inputRef = useRef(null);\n    const mergedRef = useMergeRef(ref, inputRef);\n\n    const { inputValue, onEventChanged, clearValue } = useDebounceEvent({\n      delay: debounceRate,\n      onChange,\n      initialStateValue: value\n    });\n\n    const onClearButtonClick = useCallback(() => {\n      if (disabled) {\n        return;\n      }\n\n      inputRef.current?.focus?.();\n      clearValue();\n      onClear?.();\n    }, [disabled, clearValue]);\n\n    const SearchIcon = (\n      <Icon\n        icon={searchIconName}\n        className={styles.icon}\n        clickable={false}\n        iconType={Icon.type.ICON_FONT}\n        iconSize={size === \"small\" ? \"16px\" : \"20px\"}\n      />\n    );\n\n    const ClearIcon = (\n      <IconButton\n        className={cx(styles.icon, { [styles.empty]: !inputValue })}\n        icon={clearIconName}\n        ariaLabel={clearIconLabel}\n        onClick={onClearButtonClick}\n        size={size === \"small\" ? IconButton.sizes.XS : IconButton.sizes.SMALL}\n        data-testid={getTestId(ComponentDefaultTestId.CLEAN_SEARCH_BUTTON, id)}\n      />\n    );\n\n    const RenderRight = (\n      <>\n        {loading && (\n          <Loader\n            size={size === \"small\" ? Loader.sizes.XS : 20}\n            color={Loader.colors.SECONDARY}\n            wrapperClassName={cx({ [styles.loader]: !inputValue && !RenderAction })}\n          />\n        )}\n        {inputValue && !disabled && ClearIcon}\n        {!(hideRenderActionOnInput && inputValue) && RenderAction}\n      </>\n    );\n\n    return (\n      <BaseInput\n        ref={mergedRef}\n        id={id}\n        type={\"search\"}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.SEARCH, id)}\n        className={cx(styles.searchWrapper, className)}\n        inputClassName={styles.search}\n        value={inputValue}\n        renderLeft={SearchIcon}\n        renderRight={RenderRight}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        disabled={disabled}\n        onChange={onEventChanged}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        autoComplete={autoComplete}\n        size={size}\n        wrapperRole=\"search\"\n        inputRole={searchResultsContainerId ? \"combobox\" : undefined}\n        aria-label={inputAriaLabel}\n        aria-busy={loading}\n        aria-controls={ariaExpanded ? searchResultsContainerId : undefined}\n        aria-activedescendant={currentAriaResultId}\n        aria-haspopup={ariaHasPopup}\n        aria-expanded={ariaExpanded}\n      />\n    );\n  }\n);\n\nexport default Search;\n"],"names":["Search","forwardRef","_ref","ref","inputRef","mergedRef","_useDebounceEvent","inputValue","onEventChanged","clearValue","onClearButtonClick","SearchIcon","ClearIcon","RenderRight","_ref$searchIconName","searchIconName","_ref$clearIconName","clearIconName","CloseSmallIcon","_ref$clearIconLabel","clearIconLabel","RenderAction","renderAction","hideRenderActionOnInput","value","placeholder","_ref$size","size","disabled","loading","autoFocus","_ref$autoComplete","autoComplete","inputAriaLabel","_ref$debounceRate","debounceRate","searchResultsContainerId","currentAriaResultId","onChange","onFocus","onBlur","onClear","className","ariaExpanded","ariaHasPopup","id","dataTestId","useRef","useMergeRef","useDebounceEvent","delay","initialStateValue","useCallback","_b","current","_a","focus","React","Icon","icon","styles","clickable","iconType","type","ICON_FONT","iconSize","createElement","IconButton","cx","_defineProperty","empty","ariaLabel","onClick","sizes","XS","SMALL","getTestId","ComponentDefaultTestId","CLEAN_SEARCH_BUTTON","Fragment","Loader","color","colors","SECONDARY","wrapperClassName","loader","BaseInput","SEARCH","searchWrapper","inputClassName","search","renderLeft","renderRight","wrapperRole","inputRole","undefined"],"mappings":"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"}