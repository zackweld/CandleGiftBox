{"version":3,"file":"ColorPickerItemComponent.js","sources":["../../../../../../../src/components/ColorPicker/components/ColorPickerItemComponent/ColorPickerItemComponent.tsx"],"sourcesContent":["import { camelCase } from \"lodash-es\";\nimport { getStyle } from \"../../../../helpers/typesciptCssModulesHelper\";\nimport cx from \"classnames\";\nimport React, { useRef, useCallback, useMemo, forwardRef, useEffect } from \"react\";\nimport { ColorStyle, contentColors } from \"../../../../utils/colors-vars-map\";\nimport ColorUtils from \"../../../../utils/colors-utils\";\nimport Icon from \"../../../Icon/Icon\";\nimport Tooltip from \"../../../Tooltip/Tooltip\";\nimport Clickable from \"../../../Clickable/Clickable\";\nimport { ColorShapes, ColorPickerValueOnly } from \"../../ColorPickerConstants\";\nimport { getTestId } from \"../../../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId } from \"../../../../tests/constants\";\nimport { SubIcon, VibeComponent, VibeComponentProps, ElementContent } from \"../../../../types\";\nimport { BaseSizes } from \"../../../../constants\";\nimport styles from \"./ColorPickerItemComponent.module.scss\";\n\nexport interface ColorPickerItemComponentProps extends VibeComponentProps {\n  color: ColorPickerValueOnly;\n  onColorClicked: (color: ColorPickerValueOnly) => void;\n  colorStyle: ColorStyle;\n  shouldRenderIndicatorWithoutBackground: boolean;\n  ColorIndicatorIcon: SubIcon;\n  SelectedIndicatorIcon: SubIcon;\n  isSelected: boolean;\n  colorSize: BaseSizes;\n  tooltipContent: ElementContent;\n  isActive: boolean;\n  colorShape: ColorShapes;\n  [\"data-testid\"]?: string;\n}\n\nconst ColorPickerItemComponent: VibeComponent<ColorPickerItemComponentProps> = forwardRef(\n  (\n    {\n      color,\n      onColorClicked,\n      colorStyle = ColorStyle.REGULAR,\n      shouldRenderIndicatorWithoutBackground,\n      ColorIndicatorIcon,\n      SelectedIndicatorIcon = ColorIndicatorIcon,\n      isSelected,\n      colorSize,\n      tooltipContent,\n      isActive,\n      colorShape,\n      \"data-testid\": dataTestId\n    },\n    _ref\n  ) => {\n    const isMondayColor = useMemo(() => (contentColors as readonly string[]).includes(color), [color]); // casting to any since color can be one of the system content colors but can also be a custom one\n    const colorAsStyle = isMondayColor ? ColorUtils.getMondayColorAsStyle(color, colorStyle) : color;\n    const itemRef = useRef<HTMLDivElement>(null);\n\n    const onClick = useCallback(() => onColorClicked(color), [onColorClicked, color]);\n\n    useEffect(() => {\n      if (!itemRef?.current || shouldRenderIndicatorWithoutBackground || !isMondayColor) return;\n      const item = itemRef.current;\n      const setHoverColor = (e: MouseEvent) => {\n        if (colorStyle === ColorStyle.SELECTED) {\n          (e.target as HTMLDivElement).style.background = ColorUtils.getMondayColorAsStyle(color, ColorStyle.REGULAR);\n        } else {\n          (e.target as HTMLDivElement).style.background = ColorUtils.getMondayColorAsStyle(color, ColorStyle.HOVER);\n        }\n      };\n      const restoreToOriginalColor = (e: MouseEvent) => {\n        (e.target as HTMLDivElement).style.background = colorAsStyle;\n      };\n      item.addEventListener(\"mouseenter\", setHoverColor, false);\n      item.addEventListener(\"mouseleave\", restoreToOriginalColor, false);\n\n      return () => {\n        item.removeEventListener(\"mouseenter\", setHoverColor, false);\n        item.removeEventListener(\"mouseleave\", restoreToOriginalColor, false);\n      };\n    }, [color, colorAsStyle, colorStyle, isMondayColor, itemRef, shouldRenderIndicatorWithoutBackground]);\n\n    const shouldRenderIcon = isSelected || ColorIndicatorIcon;\n    const colorIndicatorWrapperStyle = shouldRenderIndicatorWithoutBackground ? { color: colorAsStyle } : {};\n    return (\n      <Tooltip content={tooltipContent}>\n        <li\n          className={cx(styles.itemWrapper, {\n            [styles.selectedColor]: isSelected,\n            [styles.active]: isActive,\n            [styles.circle]: colorShape === ColorShapes.CIRCLE\n          })}\n          data-testid={dataTestId || getTestId(ComponentDefaultTestId.COLOR_PICKER_ITEM, color)}\n        >\n          <div className={cx(styles.feedbackIndicator)} />\n          <Clickable\n            ref={itemRef}\n            ariaLabel={color}\n            className={cx(styles.colorItem, getStyle(styles, camelCase(\"color-item-size-\" + colorSize)), {\n              [styles.colorItemTextMode]: shouldRenderIndicatorWithoutBackground\n            })}\n            style={{ background: shouldRenderIndicatorWithoutBackground ? \"transparent\" : colorAsStyle }}\n            onClick={onClick}\n            tabIndex=\"-1\"\n            onMouseDown={e => e.preventDefault()} // this is for quill to not lose the selection\n          >\n            <div className={cx(styles.colorIndicatorWrapper)} style={colorIndicatorWrapperStyle}>\n              {shouldRenderIcon && (\n                <Icon\n                  icon={isSelected ? SelectedIndicatorIcon : ColorIndicatorIcon}\n                  className={cx({\n                    [styles.colorIconWhite]: !shouldRenderIndicatorWithoutBackground\n                  })}\n                  ignoreFocusStyle\n                />\n              )}\n            </div>\n          </Clickable>\n        </li>\n      </Tooltip>\n    );\n  }\n);\n\nexport default ColorPickerItemComponent;\n"],"names":["ColorPickerItemComponent","forwardRef","_ref2","_ref","color","onColorClicked","_ref2$colorStyle","colorStyle","ColorStyle","REGULAR","shouldRenderIndicatorWithoutBackground","ColorIndicatorIcon","_ref2$SelectedIndicat","SelectedIndicatorIcon","isSelected","colorSize","tooltipContent","isActive","colorShape","dataTestId","isMondayColor","useMemo","contentColors","includes","colorAsStyle","ColorUtils","getMondayColorAsStyle","itemRef","useRef","onClick","useCallback","useEffect","current","item","setHoverColor","e","target","style","background","SELECTED","HOVER","restoreToOriginalColor","addEventListener","removeEventListener","shouldRenderIcon","colorIndicatorWrapperStyle","React","createElement","Tooltip","content","className","cx","styles","itemWrapper","_defineProperty","selectedColor","active","circle","ColorShapes","CIRCLE","getTestId","ComponentDefaultTestId","COLOR_PICKER_ITEM","feedbackIndicator","Clickable","ref","ariaLabel","colorItem","getStyle","camelCase","colorItemTextMode","tabIndex","onMouseDown","preventDefault","colorIndicatorWrapper","Icon","icon","colorIconWhite","ignoreFocusStyle"],"mappings":"4zBA+BMA,IAAAA,EAAyEC,GAC7E,SAAAC,EAeEC,GACE,IAdAC,EAAKF,EAALE,MACAC,EAAcH,EAAdG,eAAcC,EAAAJ,EACdK,WAAAA,OAAU,IAAAD,EAAGE,EAAWC,QAAOH,EAC/BI,EAAsCR,EAAtCQ,uCACAC,EAAkBT,EAAlBS,mBAAkBC,EAAAV,EAClBW,sBAAAA,OAAwBF,IAAHC,EAAGD,EAAkBC,EAC1CE,EAAUZ,EAAVY,WACAC,EAASb,EAATa,UACAC,EAAcd,EAAdc,eACAC,EAAQf,EAARe,SACAC,EAAUhB,EAAVgB,WACeC,EAAUjB,EAAzB,eAIIkB,EAAgBC,GAAQ,WAAA,OAAOC,EAAoCC,SAASnB,EAAM,GAAE,CAACA,IACrFoB,EAAeJ,EAAgBK,EAAWC,sBAAsBtB,EAAOG,GAAcH,EACrFuB,EAAUC,EAAuB,MAEjCC,EAAUC,GAAY,WAAA,OAAMzB,EAAeD,EAAM,GAAE,CAACC,EAAgBD,IAE1E2B,GAAU,WACR,IAAKJ,aAAA,EAAAA,EAASK,WAAWtB,GAA2CU,EAApE,CACA,IAAMa,EAAON,EAAQK,QACfE,EAAgB,SAACC,GAElBA,EAAEC,OAA0BC,MAAMC,WAAab,EAAWC,sBAAsBtB,EAD/EG,IAAeC,EAAW+B,SAC4D/B,EAAWC,QAEXD,EAAWgC,QAGjGC,EAAyB,SAACN,GAC7BA,EAAEC,OAA0BC,MAAMC,WAAad,GAKlD,OAHAS,EAAKS,iBAAiB,aAAcR,GAAe,GACnDD,EAAKS,iBAAiB,aAAcD,GAAwB,GAErD,WACLR,EAAKU,oBAAoB,aAAcT,GAAe,GACtDD,EAAKU,oBAAoB,aAAcF,GAAwB,GAjBkB,CAmBrF,GAAG,CAACrC,EAAOoB,EAAcjB,EAAYa,EAAeO,EAASjB,IAE7D,IAAMkC,EAAmB9B,GAAcH,EACjCkC,EAA6BnC,EAAyC,CAAEN,MAAOoB,GAAiB,GACtG,OACEsB,EAACC,cAAAC,EAAQ,CAAAC,QAASjC,GAChB8B,EAAAC,cAAA,KAAA,CACEG,UAAWC,EAAGC,EAAOC,YAAWC,EAAAA,EAAAA,EAC7BF,GAAAA,EAAOG,cAAgBzC,GACvBsC,EAAOI,OAASvC,GAChBmC,EAAOK,OAASvC,IAAewC,EAAYC,SAC5C,cACWxC,GAAcyC,EAAUC,EAAuBC,kBAAmB1D,IAE/E0C,EAAKC,cAAA,MAAA,CAAAG,UAAWC,EAAGC,EAAOW,qBAC1BjB,EAAAC,cAACiB,EAAS,CACRC,IAAKtC,EACLuC,UAAW9D,EACX8C,UAAWC,EAAGC,EAAOe,UAAWC,EAAShB,EAAQiB,EAAU,mBAAqBtD,IAAWuC,EAAA,CAAA,EACxFF,EAAOkB,kBAAoB5D,IAE9B2B,MAAO,CAAEC,WAAY5B,EAAyC,cAAgBc,GAC9EK,QAASA,EACT0C,SAAS,KACTC,YAAa,SAAArC,GAAC,OAAIA,EAAEsC,gBAAgB,GAEpC3B,EAAAC,cAAA,MAAA,CAAKG,UAAWC,EAAGC,EAAOsB,uBAAwBrC,MAAOQ,GACtDD,GACCE,EAAAC,cAAC4B,EAAI,CACHC,KAAM9D,EAAaD,EAAwBF,EAC3CuC,UAAWC,EAAEG,EACVF,CAAAA,EAAAA,EAAOyB,gBAAkBnE,IAE5BoE,kBACA,OAOhB"}