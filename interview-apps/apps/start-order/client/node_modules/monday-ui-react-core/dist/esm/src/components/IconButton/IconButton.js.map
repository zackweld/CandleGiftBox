{"version":3,"file":"IconButton.js","sources":["../../../../../src/components/IconButton/IconButton.tsx"],"sourcesContent":["import React, { AriaAttributes, forwardRef, Fragment, useMemo, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { noop as NOOP } from \"lodash-es\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport Tooltip, { TooltipProps } from \"../Tooltip/Tooltip\";\nimport Icon from \"../Icon/Icon\";\nimport AddSmall from \"../Icon/Icons/components/AddSmall\";\nimport { getWidthHeight, Size } from \"./services/IconButton-helpers\";\nimport { SubIcon, VibeComponent, VibeComponentProps, withStaticProps } from \"../../types\";\nimport { getTestId } from \"../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId } from \"../../tests/constants\";\nimport { backwardCompatibilityForProperties } from \"../../helpers/backwardCompatibilityForProperties\";\nimport Button from \"../Button/Button\";\nimport { BUTTON_ICON_SIZE, ButtonColor, ButtonType } from \"../Button/ButtonConstants\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport styles from \"./IconButton.module.scss\";\n\nexport interface IconButtonProps extends VibeComponentProps {\n  /**\n   * id to be added to the element\n   */\n  id?: string;\n  /**\n   * callback function when clicking the icon button\n   */\n  onClick?: (event: React.MouseEvent) => void;\n  /**\n   * the class name of the button wrapper\n   */\n  wrapperClassName?: string;\n  /**\n   * the class name of the button icon\n   */\n  iconClassName?: string;\n  /**\n   * Icon to be rendered\n   */\n  icon?: SubIcon;\n  /**\n   * element id to describe the button accordingly\n   * */\n  ariaLabeledBy?: string;\n  /**\n   * a11y property to be added, used for screen reader to know what kind of button it is\n   */\n  ariaLabel?: string;\n  /**\n   * aria for a button popup\n   */\n  ariaHasPopup?: React.HTMLProps<HTMLButtonElement>[\"aria-haspopup\"];\n  /**\n   * a11y property to be added, used for screen reader to know if the button is expanded\n   */\n  ariaExpanded?: boolean;\n  /**\n   * aria controls - receives id for the controlled region\n   */\n  ariaControls?: string;\n  \"aria-describedby\"?: AriaAttributes[\"aria-describedby\"];\n  /**\n   * a11y property to be added, used for screen reader to know if the button is hidden\n   */\n  \"aria-hidden\"?: AriaAttributes[\"aria-hidden\"];\n  /**\n   * Size of the icon\n   */\n  size?: Size;\n  /**\n   * Whether the tooltip should be displayed or not\n   */\n  hideTooltip?: boolean;\n  /**\n   * Props for Tooltip component\n   */\n  tooltipProps?: Partial<TooltipProps>;\n  /**\n   * Tooltip wraps the button icon, it will display in the tooltip, if not present the aria label will be shown\n   */\n  tooltipContent?: string;\n  /**\n   * Kind of button - like <Button />\n   */\n  kind?: ButtonType;\n  active?: boolean;\n  /** The button's color  */\n  color?: ButtonColor;\n  /**\n   * disabled state\n   */\n  disabled?: boolean;\n  /**\n   * if disabled - this will be shown in the tooltip\n   */\n  disabledReason?: string;\n  /**\n   * @deprecated - use \"data-testid\" instead\n   */\n  dataTestId?: string;\n  /** Change the focus indicator from around the button to within it */\n  insetFocus?: boolean;\n  /** Specifies the tab order of an element */\n  tabIndex?: number;\n  /** Show a loader instead of the icon  */\n  loading?: boolean;\n}\n\nconst IconButton: VibeComponent<IconButtonProps> & {\n  sizes?: typeof Button.sizes;\n  kinds?: typeof Button.kinds;\n  colors?: typeof Button.colors;\n} = forwardRef(\n  (\n    {\n      className,\n      wrapperClassName,\n      iconClassName,\n      id,\n      icon = AddSmall,\n      size = IconButton.sizes.MEDIUM,\n      tooltipProps = {} as TooltipProps,\n      tooltipContent,\n      ariaLabeledBy,\n      ariaLabel,\n      ariaHasPopup,\n      ariaExpanded,\n      ariaControls,\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-hidden\": ariaHidden,\n      hideTooltip = false,\n      kind = IconButton.kinds.TERTIARY,\n      active,\n      disabled = false,\n      disabledReason,\n      onClick = NOOP,\n      color,\n      dataTestId: backwardCompatabilityDataTestId,\n      \"data-testid\": dataTestId,\n      insetFocus = false,\n      tabIndex,\n      loading = false\n    },\n    ref\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n\n    const overrideDataTestId = backwardCompatibilityForProperties([dataTestId, backwardCompatabilityDataTestId]);\n    const overrideTooltipContent = useMemo(\n      () => tooltipProps?.content || tooltipContent,\n      [tooltipProps?.content, tooltipContent]\n    );\n\n    const buttonAriaLabel = useMemo(() => {\n      if (ariaLabel) return ariaLabel;\n      if (typeof overrideTooltipContent === \"string\") return overrideTooltipContent;\n      return undefined;\n    }, [ariaLabel, overrideTooltipContent]);\n\n    const iconSize = useMemo(() => {\n      switch (size) {\n        case IconButton.sizes.XXS:\n        case IconButton.sizes.XS:\n          return 16;\n        case IconButton.sizes.SMALL:\n        case IconButton.sizes.MEDIUM:\n        case IconButton.sizes.LARGE:\n          return BUTTON_ICON_SIZE;\n        default:\n          return 24;\n      }\n    }, [size]);\n\n    const overrideStyle = useMemo(() => {\n      let style = {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        padding: 0\n      } as React.CSSProperties;\n\n      if (size) {\n        style = { ...style, ...getWidthHeight(size) };\n      }\n      return style;\n    }, [size]);\n\n    const calculatedTooltipContent = useMemo(() => {\n      if (hideTooltip) return null;\n      if (disabled && disabledReason) return disabledReason;\n      if (overrideTooltipContent) return overrideTooltipContent as never;\n      return ariaLabel;\n    }, [hideTooltip, disabled, disabledReason, overrideTooltipContent, ariaLabel]);\n\n    const IconButtonWrapper = wrapperClassName ? \"div\" : Fragment;\n    const iconButtonWrapperProps = useMemo(() => {\n      return wrapperClassName ? { className: cx(wrapperClassName, styles.wrapper) } : {};\n    }, [wrapperClassName]);\n\n    return (\n      <IconButtonWrapper {...iconButtonWrapperProps}>\n        <Tooltip\n          {...tooltipProps}\n          content={calculatedTooltipContent}\n          referenceWrapperClassName={styles.referenceWrapper}\n        >\n          <Button\n            onClick={onClick}\n            disabled={disabled}\n            color={color}\n            kind={kind}\n            ariaLabeledBy={ariaLabeledBy}\n            ariaLabel={buttonAriaLabel}\n            ariaHasPopup={ariaHasPopup}\n            ariaExpanded={ariaExpanded}\n            ariaControls={ariaControls}\n            aria-describedby={ariaDescribedBy}\n            aria-hidden={ariaHidden}\n            ref={mergedRef}\n            id={id}\n            data-testid={overrideDataTestId || getTestId(ComponentDefaultTestId.ICON_BUTTON, id)}\n            noSidePadding\n            active={active}\n            className={className}\n            style={overrideStyle}\n            insetFocus={insetFocus}\n            tabIndex={tabIndex}\n            loading={loading}\n            loaderClassName={cx(styles.loader, getStyle(styles, size))}\n          >\n            <Icon\n              icon={icon}\n              iconType={Icon.type.SVG}\n              iconSize={iconSize}\n              ignoreFocusStyle\n              className={iconClassName}\n              clickable={false}\n            />\n          </Button>\n        </Tooltip>\n      </IconButtonWrapper>\n    );\n  }\n);\n\nexport default withStaticProps(IconButton, {\n  sizes: Button.sizes,\n  kinds: Button.kinds,\n  colors: Button.colors\n});\n"],"names":["IconButton","forwardRef","_ref","ref","className","wrapperClassName","iconClassName","id","_ref$icon","icon","AddSmall","_ref$size","size","sizes","MEDIUM","_ref$tooltipProps","tooltipProps","tooltipContent","ariaLabeledBy","ariaLabel","ariaHasPopup","ariaExpanded","ariaControls","ariaDescribedBy","ariaHidden","_ref$hideTooltip","hideTooltip","_ref$kind","kind","kinds","TERTIARY","active","_ref$disabled","disabled","disabledReason","_ref$onClick","onClick","NOOP","color","backwardCompatabilityDataTestId","dataTestId","_ref$insetFocus","insetFocus","tabIndex","_ref$loading","loading","componentRef","useRef","mergedRef","useMergeRef","overrideDataTestId","backwardCompatibilityForProperties","overrideTooltipContent","useMemo","content","buttonAriaLabel","iconSize","XXS","XS","SMALL","LARGE","BUTTON_ICON_SIZE","overrideStyle","style","justifyContent","alignItems","padding","Object","assign","getWidthHeight","calculatedTooltipContent","IconButtonWrapper","Fragment","iconButtonWrapperProps","cx","styles","wrapper","React","createElement","Tooltip","referenceWrapperClassName","referenceWrapper","Button","getTestId","ComponentDefaultTestId","ICON_BUTTON","noSidePadding","loaderClassName","loader","getStyle","Icon","iconType","type","SVG","ignoreFocusStyle","clickable","withStaticProps","colors"],"mappings":"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"}