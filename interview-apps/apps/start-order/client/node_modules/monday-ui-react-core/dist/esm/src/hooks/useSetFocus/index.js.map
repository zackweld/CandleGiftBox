{"version":3,"file":"index.js","sources":["../../../../../src/hooks/useSetFocus/index.ts"],"sourcesContent":["import { RefObject, useCallback, useEffect, useState } from \"react\";\nimport useEventListener from \"../useEventListener\";\nimport usePrevious from \"../../hooks/usePrevious\";\n\n// TODO Vibe 2.0: rename to useFocus? and maybe change signature to be like useHover?\nexport default function useSetFocus({\n  ref,\n  focusCallback,\n  blurCallback\n}: {\n  ref: RefObject<HTMLElement>;\n  focusCallback?: () => void;\n  blurCallback?: () => void;\n}) {\n  const [isFocused, setIsFocused] = useState(false);\n  const isFocusedPrev = usePrevious(isFocused);\n\n  useEffect(() => {\n    if (isFocusedPrev === undefined) {\n      // Don't call callback on first render\n      return;\n    }\n\n    // Calling back from here to be sure that isFocused value have already been updated\n    if (isFocused) {\n      focusCallback && focusCallback();\n    } else {\n      blurCallback && blurCallback();\n    }\n  }, [blurCallback, focusCallback, isFocused, isFocusedPrev]);\n\n  const focus = useCallback(() => {\n    ref.current.focus();\n  }, [ref]);\n\n  const blur = useCallback(() => {\n    ref.current.blur();\n  }, [ref]);\n\n  const onFocus = () => {\n    setIsFocused(true);\n  };\n\n  const onBlur = () => {\n    setIsFocused(false);\n  };\n\n  useEventListener({\n    eventName: \"focus\",\n    ref,\n    callback: onFocus\n  });\n\n  useEventListener({\n    eventName: \"blur\",\n    ref,\n    callback: onBlur\n  });\n\n  return { isFocused, focus, blur };\n}\n"],"names":["useSetFocus","_ref","ref","focusCallback","blurCallback","_useState","useState","_useState2","_slicedToArray","isFocused","setIsFocused","isFocusedPrev","usePrevious","useEffect","undefined","focus","useCallback","current","blur","useEventListener","eventName","callback"],"mappings":"mOAKc,SAAUA,EAAWC,GAQlC,IAPCC,EAAGD,EAAHC,IACAC,EAAaF,EAAbE,cACAC,EAAYH,EAAZG,aAMAC,EAAkCC,GAAS,GAAMC,EAAAC,EAAAH,EAAA,GAA1CI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GACxBI,EAAgBC,EAAYH,GAElCI,GAAU,gBACcC,IAAlBH,IAMAF,EACFN,GAAiBA,IAEjBC,GAAgBA,IAEnB,GAAE,CAACA,EAAcD,EAAeM,EAAWE,IAE5C,IAAMI,EAAQC,GAAY,WACxBd,EAAIe,QAAQF,OACd,GAAG,CAACb,IAEEgB,EAAOF,GAAY,WACvBd,EAAIe,QAAQC,MACd,GAAG,CAAChB,IAsBJ,OAZAiB,EAAiB,CACfC,UAAW,QACXlB,IAAAA,EACAmB,SAXc,WACdX,GAAa,MAafS,EAAiB,CACfC,UAAW,OACXlB,IAAAA,EACAmB,SAba,WACbX,GAAa,MAeR,CAAED,UAAAA,EAAWM,MAAAA,EAAOG,KAAAA,EAC7B"}