{"version":3,"file":"AvatarGroupCounter.js","sources":["../../../../../src/components/AvatarGroup/AvatarGroupCounter.tsx"],"sourcesContent":["import React, { ReactElement, useCallback, useRef } from \"react\";\nimport cx from \"classnames\";\nimport Avatar, { AvatarProps } from \"../Avatar/Avatar\";\nimport Counter from \"../Counter/Counter\";\nimport MenuButton from \"../MenuButton/MenuButton\";\nimport Menu from \"../Menu/Menu/Menu\";\nimport AvatarMenuItem from \"../Menu/MenuItem/AvatarMenuItem\";\nimport AvatarGroupCounterTooltipContainer from \"./AvatarGroupCounterTooltipContainer\";\nimport VibeComponentProps from \"../../types/VibeComponentProps\";\nimport { AvatarSize, AvatarType } from \"../Avatar/AvatarConstants\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport { AvatarGroupCounterVisualProps } from \"./AvatarGroup\";\nimport { TooltipProps } from \"../Tooltip/Tooltip\";\nimport { avatarOnClick } from \"./AvatarGroupHelper\";\nimport styles from \"./AvatarGroupCounter.module.scss\";\nimport { AVATAR_GROUP_COUNTER_AVATAR_SIZE } from \"./AvatarGroupConstants\";\n\nexport interface AvatarGroupCounterProps extends VibeComponentProps {\n  /**\n   * Array of Avatar elements\n   */\n  counterTooltipAvatars?: ReactElement<AvatarProps>[];\n  /**\n   * AvatarGroupCounterVisualProps: props for counter\n   */\n  counterProps?: AvatarGroupCounterVisualProps;\n  counterTooltipCustomProps?: Partial<TooltipProps>;\n  counterTooltipIsVirtualizedList?: boolean;\n  size?: AvatarSize;\n  type?: AvatarType;\n  counterAriaLabel?: string;\n  disabled?: boolean;\n}\n\nconst AvatarGroupCounter: React.FC<AvatarGroupCounterProps> = ({\n  counterTooltipAvatars = [],\n  counterProps,\n  counterTooltipCustomProps,\n  counterTooltipIsVirtualizedList = false,\n  size = Avatar.sizes.MEDIUM,\n  type,\n  counterAriaLabel,\n  disabled\n}) => {\n  const {\n    color: counterColor = Counter.colors.LIGHT,\n    count: counterValue = counterTooltipAvatars.length,\n    prefix: counterPrefix = \"+\",\n    maxDigits: counterMaxDigits = 3,\n    ariaLabelItemsName: counterAriaLabelItemsName = \"items\",\n    noAnimation\n  } = counterProps || {};\n\n  const counterSizeStyle = getStyle(styles, size?.toString());\n  const counterColorStyle = styles[counterColor];\n\n  const focusPrevPlaceholderRef = useRef(null);\n  const focusNextPlaceholderRef = useRef(null);\n  const counterContainerRef = useRef(null);\n  const counterComponent = useCallback(() => {\n    return (\n      <Counter\n        color={counterColor}\n        count={counterValue}\n        prefix={counterPrefix}\n        maxDigits={counterMaxDigits}\n        ariaLabel={counterAriaLabel ? counterAriaLabel : `Tab for more ${counterAriaLabelItemsName}`}\n        noAnimation={noAnimation}\n        counterClassName={cx({ [styles.disabled]: disabled })}\n      />\n    );\n  }, [\n    counterAriaLabel,\n    counterAriaLabelItemsName,\n    counterColor,\n    counterMaxDigits,\n    counterPrefix,\n    counterValue,\n    disabled,\n    noAnimation\n  ]);\n\n  if (!counterTooltipAvatars.length && !counterValue) {\n    return null;\n  }\n\n  if (disabled) {\n    return (\n      <div\n        ref={counterContainerRef}\n        className={cx(styles.counterContainer, styles.disabled, counterSizeStyle, counterColorStyle)}\n      >\n        {counterComponent()}\n      </div>\n    );\n  }\n\n  const areAvatarsClickable = counterTooltipAvatars.some(a => a.props?.onClick);\n  if (areAvatarsClickable) {\n    return (\n      <MenuButton\n        component={counterComponent}\n        zIndex={1}\n        className={cx(styles.counterContainer, counterSizeStyle, counterColorStyle)}\n        ariaLabel={counterAriaLabel ? counterAriaLabel : `${counterValue} additional ${counterAriaLabelItemsName}`}\n      >\n        <Menu id=\"menu\" size={Menu.sizes.MEDIUM} className={styles.menu} focusItemIndexOnMount={0}>\n          {counterTooltipAvatars.map((avatar, index) => {\n            return (\n              // eslint-disable-next-line react/jsx-key\n              <AvatarMenuItem\n                menuItemProps={{\n                  key: avatar.props?.id || String(index),\n                  title: (avatar.props?.tooltipProps?.content as string) || avatar?.props?.ariaLabel,\n                  onClick: (event: React.MouseEvent | React.KeyboardEvent) => avatarOnClick(event, avatar.props)\n                }}\n                avatarProps={{\n                  ...avatar.props,\n                  customSize: AVATAR_GROUP_COUNTER_AVATAR_SIZE,\n                  ariaLabel: \"\",\n                  tabIndex: -1\n                }}\n              />\n            );\n          })}\n        </Menu>\n      </MenuButton>\n    );\n  }\n\n  return (\n    <AvatarGroupCounterTooltipContainer\n      focusPrevPlaceholderRef={focusPrevPlaceholderRef}\n      focusNextPlaceholderRef={focusNextPlaceholderRef}\n      counterContainerRef={counterContainerRef}\n      avatars={counterTooltipAvatars}\n      counterTooltipCustomProps={counterTooltipCustomProps}\n      counterTooltipIsVirtualizedList={counterTooltipIsVirtualizedList}\n      type={type}\n    >\n      <div tabIndex={-1} ref={focusPrevPlaceholderRef} />\n      {/* eslint-disable jsx-a11y/no-noninteractive-tabindex */}\n      <div\n        tabIndex={0}\n        className={cx(styles.counterContainer, counterSizeStyle, counterColorStyle)}\n        ref={counterContainerRef}\n      >\n        {/* eslint-enable jsx-a11y/no-noninteractive-tabindex */}\n        {counterComponent()}\n        <div tabIndex={-1} ref={focusNextPlaceholderRef} />\n      </div>\n    </AvatarGroupCounterTooltipContainer>\n  );\n};\n\nexport default AvatarGroupCounter;\n"],"names":["AvatarGroupCounter","_ref","_ref$counterTooltipAv","counterTooltipAvatars","counterTooltipCustomProps","_ref$counterTooltipIs","counterTooltipIsVirtualizedList","_ref$size","size","Avatar","sizes","MEDIUM","type","counterAriaLabel","disabled","_ref2","counterProps","_ref2$color","color","counterColor","Counter","colors","LIGHT","_ref2$count","count","counterValue","length","_ref2$prefix","prefix","counterPrefix","_ref2$maxDigits","maxDigits","counterMaxDigits","_ref2$ariaLabelItemsN","ariaLabelItemsName","counterAriaLabelItemsName","noAnimation","counterSizeStyle","getStyle","styles","counterColorStyle","focusPrevPlaceholderRef","useRef","focusNextPlaceholderRef","counterContainerRef","counterComponent","useCallback","React","createElement","ariaLabel","concat","counterClassName","cx","_defineProperty","ref","className","counterContainer","some","a","_a","props","onClick","MenuButton","component","zIndex","Menu","id","menu","focusItemIndexOnMount","map","avatar","index","AvatarMenuItem","menuItemProps","key","String","title","_c","_b","tooltipProps","content","_d","event","avatarOnClick","avatarProps","customSize","AVATAR_GROUP_COUNTER_AVATAR_SIZE","tabIndex","AvatarGroupCounterTooltipContainer","avatars"],"mappings":"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"}