{"version":3,"file":"YearPicker.js","sources":["../../../../../../src/components/DatePicker/YearPicker/YearPicker.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport { CSSTransition } from \"react-transition-group\";\nimport classnames from \"classnames\";\nimport { YEAR_FORMAT } from \"../constants\";\nimport DateNavigationItemComponent from \"../DateNavigationItem/DateNavigationItem\";\nimport { Moment, Direction } from \"../types\";\nimport styles from \"./YearPicker.module.scss\";\nimport { calcNewYearsPage } from \"../date-picker-utils\";\nimport YearsList from \"./YearsList\";\n\nconst transitionOptions = {\n  classNames: \"slide-down\",\n  timeout: { enter: 400, exit: 400 }\n};\n\nconst PAGE_SIZE = 18;\nconst BUFFER_FROM_CURRENT_YEAR = 4;\nexport interface YearPickerProps {\n  selectedDate?: Moment;\n  isYearBlocked?: (year: number) => boolean;\n  changeCurrentDate: (date: Moment) => void;\n  \"data-testid\"?: string;\n}\n\nconst YearPicker = ({ selectedDate, isYearBlocked, changeCurrentDate, \"data-testid\": dateTestId }: YearPickerProps) => {\n  const selectedYear = selectedDate ? selectedDate.format(YEAR_FORMAT) : moment().format(YEAR_FORMAT);\n\n  const [yearsToDisplay, setYearsToDisplay] = useState(\n    calcNewYearsPage(parseInt(selectedYear) - BUFFER_FROM_CURRENT_YEAR, PAGE_SIZE)\n  );\n\n  const onYearNavigationClick = (direction: Direction) => {\n    const firstYearInPage = yearsToDisplay[0];\n    let newYearsArray: number[] = [];\n    if (direction === Direction.prev) {\n      newYearsArray = calcNewYearsPage(firstYearInPage - PAGE_SIZE, PAGE_SIZE);\n    } else if (direction === Direction.next) {\n      newYearsArray = calcNewYearsPage(firstYearInPage + PAGE_SIZE, PAGE_SIZE);\n    }\n    setYearsToDisplay(newYearsArray);\n  };\n\n  const onYearSelect = (year: number) => {\n    changeCurrentDate(moment().year(year));\n  };\n\n  return (\n    <div data-testid={`${dateTestId}-year-picker`} className={styles.monthYearPicker}>\n      <div className={classnames(styles.navigationWrapper, styles.navigationLeft)}>\n        <DateNavigationItemComponent kind={Direction.prev} onClick={() => onYearNavigationClick(Direction.prev)} />\n      </div>\n      <div className={classnames(styles.navigationWrapper, styles.navigationRight)}>\n        <DateNavigationItemComponent kind={Direction.next} onClick={() => onYearNavigationClick(Direction.next)} />\n      </div>\n      <CSSTransition {...transitionOptions} in appear>\n        <div className={styles.pickerOptions}>\n          <YearsList\n            selectedYear={selectedYear}\n            onSelect={onYearSelect}\n            yearsItems={yearsToDisplay}\n            isYearBlocked={isYearBlocked}\n          />\n        </div>\n      </CSSTransition>\n    </div>\n  );\n};\n\nexport default YearPicker;\n"],"names":["transitionOptions","classNames","timeout","enter","exit","YearPicker","_ref","selectedDate","isYearBlocked","changeCurrentDate","dateTestId","selectedYear","format","YEAR_FORMAT","moment","_useState","useState","calcNewYearsPage","parseInt","_useState2","_slicedToArray","yearsToDisplay","setYearsToDisplay","onYearNavigationClick","direction","firstYearInPage","newYearsArray","Direction","prev","next","React","createElement","concat","className","styles","monthYearPicker","classnames","navigationWrapper","navigationLeft","DateNavigationItemComponent","kind","onClick","navigationRight","CSSTransition","Object","assign","in","appear","pickerOptions","YearsList","onSelect","year","yearsItems"],"mappings":"kfAWA,IAAMA,EAAoB,CACxBC,WAAY,aACZC,QAAS,CAAEC,MAAO,IAAKC,KAAM,MAYzBC,EAAa,SAAHC,GAAsG,IAAhGC,EAAYD,EAAZC,aAAcC,EAAaF,EAAbE,cAAeC,EAAiBH,EAAjBG,kBAAkCC,EAAUJ,EAAzB,eAC9DK,EAAeJ,EAAeA,EAAaK,OAAOC,GAAeC,IAASF,OAAOC,GAEvFE,EAA4CC,EAC1CC,EAAiBC,SAASP,GAZG,EADf,KAcfQ,EAAAC,EAAAL,EAAA,GAFMM,EAAcF,EAAA,GAAEG,EAAiBH,EAAA,GAIlCI,EAAwB,SAACC,GAC7B,IAAMC,EAAkBJ,EAAe,GACnCK,EAA0B,GAC1BF,IAAcG,EAAUC,KAC1BF,EAAgBT,EAAiBQ,EApBrB,OAqBHD,IAAcG,EAAUE,OACjCH,EAAgBT,EAAiBQ,EAtBrB,QAwBdH,EAAkBI,IAOpB,OACEI,EAAkBC,cAAA,MAAA,CAAA,cAAAC,GAAAA,OAAGtB,EAAwB,gBAAEuB,UAAWC,EAAOC,iBAC/DL,EAAKC,cAAA,MAAA,CAAAE,UAAWG,EAAWF,EAAOG,kBAAmBH,EAAOI,iBAC1DR,EAACC,cAAAQ,GAA4BC,KAAMb,EAAUC,KAAMa,QAAS,WAAA,OAAMlB,EAAsBI,EAAUC,KAAK,KAEzGE,EAAKC,cAAA,MAAA,CAAAE,UAAWG,EAAWF,EAAOG,kBAAmBH,EAAOQ,kBAC1DZ,EAACC,cAAAQ,GAA4BC,KAAMb,EAAUE,KAAMY,QAAS,WAAA,OAAMlB,EAAsBI,EAAUE,KAAK,KAEzGC,EAAAC,cAACY,EAAkBC,OAAAC,OAAA,CAAA,EAAA7C,EAAmB,CAAA8C,MAAGC,QAAM,IAC7CjB,EAAAC,cAAA,MAAA,CAAKE,UAAWC,EAAOc,eACrBlB,EAACC,cAAAkB,GACCtC,aAAcA,EACduC,SAhBW,SAACC,GACpB1C,EAAkBK,IAASqC,KAAKA,KAgBxBC,WAAY/B,EACZb,cAAeA,MAM3B"}