{"version":3,"file":"useMenuItemKeyboardEvents.js","sources":["../../../../../../../src/components/Menu/MenuItem/hooks/useMenuItemKeyboardEvents.ts"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport useKeyEvent from \"../../../../hooks/useKeyEvent\";\nimport { keyCodes } from \"../../../../constants\";\nimport { CloseMenuOption } from \"../../Menu/MenuConstants\";\n\nconst KEYS = [keyCodes.ENTER, keyCodes.RIGHT_ARROW];\n\nexport default function useMenuItemKeyboardEvents({\n  onClick,\n  disabled,\n  isActive,\n  index,\n  setActiveItemIndex,\n  hasChildren,\n  shouldShowSubMenu,\n  setSubMenuIsOpenByIndex,\n  menuRef,\n  isMouseEnter,\n  closeMenu,\n  useDocumentEventListeners,\n  splitMenuItem,\n  isMouseEnterMenuItem,\n  isMouseEnterIconButton\n}: {\n  onClick: (event: React.MouseEvent | React.KeyboardEvent) => void;\n  disabled: boolean;\n  isActive: boolean;\n  index: number;\n  hasChildren: boolean;\n  shouldShowSubMenu: boolean;\n  setSubMenuIsOpenByIndex: (index: number, isOpen: boolean) => void;\n  setActiveItemIndex: (index: number) => void;\n  menuRef: React.RefObject<HTMLElement>;\n  isMouseEnter: boolean;\n  closeMenu: (option: CloseMenuOption) => void;\n  useDocumentEventListeners: boolean;\n  splitMenuItem?: boolean;\n  isMouseEnterMenuItem?: boolean;\n  isMouseEnterIconButton?: boolean;\n}) {\n  const onClickCallback = useCallback(\n    (event: React.MouseEvent | React.KeyboardEvent) => {\n      if (!isActive && !isMouseEnter) return;\n      if (!setActiveItemIndex || !setSubMenuIsOpenByIndex) {\n        console.error(\"MenuItem must be a first level child of a menu\");\n        return;\n      }\n\n      const isKeyEvent = event instanceof KeyboardEvent;\n\n      if (isActive && hasChildren) {\n        setActiveItemIndex(index);\n        if (!splitMenuItem || isMouseEnterIconButton) {\n          setSubMenuIsOpenByIndex(index, true);\n          return;\n        }\n      }\n\n      if (isKeyEvent && splitMenuItem) {\n        setSubMenuIsOpenByIndex(index, true);\n      }\n\n      if (shouldShowSubMenu) return;\n\n      const clickCallback = () => {\n        event.preventDefault();\n        onClick(event);\n        closeMenu({ propagate: true });\n      };\n\n      if (isKeyEvent && onClick && !disabled && isActive) {\n        if ((event as React.KeyboardEvent).key === \"ArrowRight\") {\n          return;\n        }\n        clickCallback();\n      }\n\n      if (!isKeyEvent && onClick && !disabled && isMouseEnter) {\n        if (!isActive) {\n          setActiveItemIndex(index);\n          if (hasChildren) {\n            setSubMenuIsOpenByIndex(index, true);\n          }\n        }\n\n        if ((splitMenuItem && isMouseEnterMenuItem && !isMouseEnterIconButton) || !hasChildren) {\n          // wait for background of menu item to change before trigger click\n          requestAnimationFrame(() => {\n            requestAnimationFrame(() => {\n              clickCallback();\n            });\n          });\n        }\n      }\n    },\n    [\n      isActive,\n      isMouseEnter,\n      setActiveItemIndex,\n      setSubMenuIsOpenByIndex,\n      hasChildren,\n      splitMenuItem,\n      shouldShowSubMenu,\n      onClick,\n      disabled,\n      index,\n      closeMenu,\n      isMouseEnterMenuItem,\n      isMouseEnterIconButton\n    ]\n  );\n\n  useKeyEvent({\n    keys: KEYS,\n    callback: onClickCallback,\n    ref: useDocumentEventListeners ? undefined : menuRef\n  });\n\n  return { onClickCallback };\n}\n"],"names":["KEYS","keyCodes","ENTER","RIGHT_ARROW","useMenuItemKeyboardEvents","_ref","onClick","disabled","isActive","index","setActiveItemIndex","hasChildren","shouldShowSubMenu","setSubMenuIsOpenByIndex","menuRef","isMouseEnter","closeMenu","useDocumentEventListeners","splitMenuItem","isMouseEnterMenuItem","isMouseEnterIconButton","onClickCallback","useCallback","event","isKeyEvent","KeyboardEvent","clickCallback","preventDefault","propagate","key","requestAnimationFrame","console","error","useKeyEvent","keys","callback","ref","undefined"],"mappings":"iRAKA,IAAMA,EAAO,CAACC,EAASC,MAAOD,EAASE,aAEf,SAAAC,EAAyBC,GAgChD,IA/BCC,EAAOD,EAAPC,QACAC,EAAQF,EAARE,SACAC,EAAQH,EAARG,SACAC,EAAKJ,EAALI,MACAC,EAAkBL,EAAlBK,mBACAC,EAAWN,EAAXM,YACAC,EAAiBP,EAAjBO,kBACAC,EAAuBR,EAAvBQ,wBACAC,EAAOT,EAAPS,QACAC,EAAYV,EAAZU,aACAC,EAASX,EAATW,UACAC,EAAyBZ,EAAzBY,0BACAC,EAAab,EAAba,cACAC,EAAoBd,EAApBc,qBACAC,EAAsBf,EAAtBe,uBAkBMC,EAAkBC,GACtB,SAACC,GACC,GAAKf,GAAaO,EAClB,GAAKL,GAAuBG,EAA5B,CAKA,IAAMW,EAAaD,aAAiBE,cAEpC,GAAIjB,GAAYG,IACdD,EAAmBD,IACdS,GAAiBE,GACpBP,EAAwBJ,GAAO,QASnC,GAJIe,GAAcN,GAChBL,EAAwBJ,GAAO,IAG7BG,EAAJ,CAEA,IAAMc,EAAgB,WACpBH,EAAMI,iBACNrB,EAAQiB,GACRP,EAAU,CAAEY,WAAW,KAGzB,GAAIJ,GAAclB,IAAYC,GAAYC,EAAU,CAClD,GAA2C,eAAtCe,EAA8BM,IACjC,OAEFH,GACD,EAEIF,GAAclB,IAAYC,GAAYQ,IACpCP,IACHE,EAAmBD,GACfE,GACFE,EAAwBJ,GAAO,KAI9BS,GAAiBC,IAAyBC,IAA4BT,IAEzEmB,uBAAsB,WACpBA,uBAAsB,WACpBJ,GACF,GACF,IA7BmB,CAhBtB,MAFCK,QAAQC,MAAM,iDAkDlB,GACA,CACExB,EACAO,EACAL,EACAG,EACAF,EACAO,EACAN,EACAN,EACAC,EACAE,EACAO,EACAG,EACAC,IAUJ,OANAa,EAAY,CACVC,KAAMlC,EACNmC,SAAUd,EACVe,IAAKnB,OAA4BoB,EAAYvB,IAGxC,CAAEO,gBAAAA,EACX"}