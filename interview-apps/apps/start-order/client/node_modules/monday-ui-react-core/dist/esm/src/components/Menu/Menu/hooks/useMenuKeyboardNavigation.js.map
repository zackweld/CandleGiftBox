{"version":3,"file":"useMenuKeyboardNavigation.js","sources":["../../../../../../../src/components/Menu/Menu/hooks/useMenuKeyboardNavigation.tsx"],"sourcesContent":["import React, { useCallback, useMemo } from \"react\";\nimport { ARROW_DOWN_KEYS, ARROW_UP_KEYS, ENTER_KEYS, NavDirections } from \"../../../../hooks/useFullKeyboardListeners\";\nimport useKeyEvent from \"../../../../hooks/useKeyEvent\";\n\nexport default function useMenuKeyboardNavigation({\n  hasOpenSubMenu,\n  getNextSelectableIndex,\n  getPreviousSelectableIndex,\n  activeItemIndex,\n  setActiveItemIndex,\n  isVisible,\n  ref,\n  useDocumentEventListeners\n}: {\n  hasOpenSubMenu: boolean;\n  getNextSelectableIndex: (index: number) => number;\n  getPreviousSelectableIndex: (index: number) => number;\n  activeItemIndex: number;\n  setActiveItemIndex: (index: number) => void;\n  isVisible: boolean;\n  ref: React.RefObject<HTMLElement>;\n  useDocumentEventListeners: boolean;\n}) {\n  const onArrowKeyEvent = useCallback(\n    (direction: NavDirections) => {\n      let newIndex;\n\n      if (hasOpenSubMenu) return false;\n\n      if (direction === NavDirections.DOWN) {\n        newIndex = getNextSelectableIndex(activeItemIndex);\n      } else if (direction === NavDirections.UP) {\n        newIndex = getPreviousSelectableIndex(activeItemIndex);\n      }\n\n      if (newIndex || newIndex === 0) setActiveItemIndex(newIndex);\n    },\n    [activeItemIndex, getNextSelectableIndex, getPreviousSelectableIndex, hasOpenSubMenu, setActiveItemIndex]\n  );\n  const onArrowUp = useCallback(() => {\n    onArrowKeyEvent(NavDirections.UP);\n  }, [onArrowKeyEvent]);\n\n  const onArrowDown = useCallback(() => {\n    onArrowKeyEvent(NavDirections.DOWN);\n  }, [onArrowKeyEvent]);\n\n  const onEnterClickCallback = useCallback(\n    (_event: React.KeyboardEvent) => {\n      if (!isVisible) return;\n\n      if (activeItemIndex === -1) {\n        setActiveItemIndex(0);\n      }\n    },\n    [setActiveItemIndex, activeItemIndex, isVisible]\n  );\n\n  const listenerOptions = useMemo(() => {\n    if (useDocumentEventListeners) return undefined;\n\n    return {\n      ref,\n      preventDefault: true,\n      stopPropagation: true\n    };\n  }, [useDocumentEventListeners, ref]);\n\n  useKeyEvent({\n    keys: ARROW_DOWN_KEYS,\n    callback: onArrowDown,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ARROW_UP_KEYS,\n    callback: onArrowUp,\n    ...listenerOptions\n  });\n\n  useKeyEvent({\n    keys: ENTER_KEYS,\n    callback: onEnterClickCallback,\n    ...listenerOptions\n  });\n}\n"],"names":["useMenuKeyboardNavigation","_ref","hasOpenSubMenu","getNextSelectableIndex","getPreviousSelectableIndex","activeItemIndex","setActiveItemIndex","isVisible","ref","useDocumentEventListeners","onArrowKeyEvent","useCallback","direction","newIndex","NavDirections","DOWN","UP","onArrowUp","onArrowDown","onEnterClickCallback","_event","listenerOptions","useMemo","preventDefault","stopPropagation","useKeyEvent","Object","assign","keys","ARROW_DOWN_KEYS","callback","ARROW_UP_KEYS","ENTER_KEYS"],"mappings":"6OAIwB,SAAAA,EAAyBC,GAkBhD,IAjBCC,EAAcD,EAAdC,eACAC,EAAsBF,EAAtBE,uBACAC,EAA0BH,EAA1BG,2BACAC,EAAeJ,EAAfI,gBACAC,EAAkBL,EAAlBK,mBACAC,EAASN,EAATM,UACAC,EAAGP,EAAHO,IACAC,EAAyBR,EAAzBQ,0BAWMC,EAAkBC,GACtB,SAACC,GACC,IAAIC,EAEJ,GAAIX,EAAgB,OAAO,EAEvBU,IAAcE,EAAcC,KAC9BF,EAAWV,EAAuBE,GACzBO,IAAcE,EAAcE,KACrCH,EAAWT,EAA2BC,KAGpCQ,GAAyB,IAAbA,IAAgBP,EAAmBO,EACrD,GACA,CAACR,EAAiBF,EAAwBC,EAA4BF,EAAgBI,IAElFW,EAAYN,GAAY,WAC5BD,EAAgBI,EAAcE,GAChC,GAAG,CAACN,IAEEQ,EAAcP,GAAY,WAC9BD,EAAgBI,EAAcC,KAChC,GAAG,CAACL,IAEES,EAAuBR,GAC3B,SAACS,GACMb,IAEoB,IAArBF,GACFC,EAAmB,EAEtB,GACD,CAACA,EAAoBD,EAAiBE,IAGlCc,EAAkBC,GAAQ,WAC9B,IAAIb,EAEJ,MAAO,CACLD,IAAAA,EACAe,gBAAgB,EAChBC,iBAAiB,EAErB,GAAG,CAACf,EAA2BD,IAE/BiB,EAAWC,OAAAC,OAAA,CACTC,KAAMC,EACNC,SAAUZ,GACPG,IAGLI,EAAWC,OAAAC,OAAA,CACTC,KAAMG,EACND,SAAUb,GACPI,IAGLI,EAAWC,OAAAC,OAAA,CACTC,KAAMI,EACNF,SAAUX,GACPE,GAEP"}