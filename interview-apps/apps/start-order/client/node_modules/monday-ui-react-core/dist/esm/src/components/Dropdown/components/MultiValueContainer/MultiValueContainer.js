import{objectWithoutProperties as e,slicedToArray as t,defineProperty as n,extends as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import l,{useState as i,useEffect as r,useCallback as a}from"react";import{components as s}from"react-select";import c from"classnames";import{useHiddenOptionsData as m}from"../../hooks/useHiddenOptionsData.js";import u from"../../../Counter/Counter.js";import p from"../../../Dialog/Dialog.js";import d from"../../../DialogContentContainer/DialogContentContainer.js";import h from"../../../Chips/Chips.js";import{DROPDOWN_CHIP_COLORS as f}from"../../DropdownConstants.js";import v from"./MultiValueContainer.module.scss.js";var g=["children","selectProps"];function C(C){var E=C.children,D=C.selectProps,w=e(C,g),b=D.isDisabled,P=D.placeholder,j=D.inputValue,N=D.selectProps,y=void 0===N?{}:N,O=D.withMandatoryDefaultOptions,I=D.readOnly,M=y.selectedOptions,S=y.onSelectedDelete,T=y.isMultiline,k=y.popupsContainerSelector,A=y.size,x=E[1],R=i(),V=t(R,2),B=V[0],L=V[1],_=i(!1),F=t(_,2),H=F[0],K=F[1],W=0===M.length&&!j,z=v["chip-with-input-wrapper"],U=c(T?v["multiselect-chip-multi-line"]:v["multiselect-chip-single-line-".concat(A)],n({},v["multiselect-chip-disabled"],b)),Y=m({isMultiline:T,ref:B,chipClassName:U,chipWrapperClassName:z,selectedOptionsCount:M.length,isCounterShown:H}),q=Y.overflowIndex,G=Y.hiddenOptionsCount;r((function(){K(G>0)}),[G]);var J=a((function(e){S(e.value,{action:"remove-value",removedValue:e})}),[S]),Q=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.length;return M.map((function(n,o){var i=Object.keys(f).includes(n.chipColor)?h.colors[n.chipColor]:h.colors.PRIMARY;return o>=e&&t>o?l.createElement(h,{"data-testid":"value-container-chip",key:n.value,className:c(v.chips,U),noAnimation:!0,disabled:b,id:n.value,label:n.label,onDelete:function(){return J(n)},disableClickableBehavior:!0,onMouseDown:function(e){e.stopPropagation()},readOnly:I||O&&n.isMandatory,allowTextSelection:I,leftRenderer:n.leftRenderer,leftAvatar:n.leftAvatar,leftIcon:n.leftIcon,color:i}):null}))}),[M,U,b,I,O,J,A]);return l.createElement(s.ValueContainer,o({selectProps:D},w),l.createElement("div",{className:v["value-container"]},W&&l.createElement("div",{className:v["placeholder-container"]},l.createElement(s.Placeholder,w,P)),l.createElement("div",{className:c(v["value-container-chips"],n({},v["without-placeholder"],!W)),ref:function(e){return L(e)},"data-testid":"value-container-chips"},H?l.createElement(l.Fragment,null,Q(0,q-1),l.createElement("div",{className:z},Q(q-1,q),x),Q(q)):l.createElement(l.Fragment,null,Q(0,M.length-1),l.createElement("div",{className:z},Q(M.length-1),x))),l.createElement("div",null,H&&l.createElement(p,{content:function(){return l.createElement(d,{className:v.valueDialogContent},Q(q))},containerSelector:k,tooltip:!0,showTrigger:p.hideShowTriggers.CLICK,hideTrigger:p.hideShowTriggers.CLICK_OUTSIDE,position:"bottom",moveBy:{main:5}},l.createElement(u,{kind:u.kinds.LINE,prefix:"+",count:G,onMouseDown:function(e){e.stopPropagation()},noAnimation:!0})))))}export{C as default};
//# sourceMappingURL=MultiValueContainer.js.map
