{"version":3,"file":"FormattedNumber.js","sources":["../../../../../src/components/FormattedNumber/FormattedNumber.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { useMemo, forwardRef } from \"react\";\nimport { formatNumber, formatNumberConsts } from \"../../helpers/textManipulations\";\nimport { validateValue } from \"./FormattedNumberHelpers\";\nimport VibeComponentProps from \"../../types/VibeComponentProps\";\nimport VibeComponent from \"../../types/VibeComponent\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport styles from \"./FormattedNumber.module.scss\";\n\nexport interface FormattedNumberProps extends VibeComponentProps {\n  /**\n   * A numeric value to format.\n   */\n  value?: number | string;\n  /**\n   * If included, will be added as a prefix to the number.\n   */\n  prefix?: string;\n  /**\n   * If included, will be added as a suffix to the number.\n   */\n  suffix?: string;\n  /**\n   * The text that will be shown if no value is provided.\n   */\n  emptyPlaceHolder?: string;\n  /**\n   * Determines the number of decimal numbers (0 ~ 20).\n   */\n  decimalPrecision?: number;\n  /**\n   * Format number into compact number and initial (if required).\n   */\n  compact?: boolean;\n  /**\n   * Determines the number's local (Unicode BCP 47 locale identifier).\n   */\n  local?: string;\n  /**\n   * Determines suffix and prefix location\n   */\n  rtl?: boolean;\n}\n\nconst FormattedNumber: VibeComponent<FormattedNumberProps, HTMLDivElement> & {\n  formatNumber?: typeof formatNumber;\n  localFallBack?: string;\n} = forwardRef(\n  (\n    {\n      value,\n      className,\n      local = FormattedNumber.localFallBack,\n      prefix,\n      suffix,\n      emptyPlaceHolder = \"N/A\",\n      decimalPrecision = 2,\n      compact = true,\n      rtl,\n      id,\n      \"data-testid\": dataTestId\n    },\n    ref\n  ) => {\n    const renderSuffix = useMemo(() => {\n      if (!suffix) return null;\n\n      return <span className={cx(styles.suffix)}>{suffix}</span>;\n    }, [suffix]);\n\n    const renderPrefix = useMemo(() => {\n      if (!prefix) return null;\n\n      return <span className={cx(styles.prefix)}>{prefix}</span>;\n    }, [prefix]);\n\n    const calculatedValue = useMemo(() => {\n      return formatNumber(Number(value), {\n        local,\n        precision: decimalPrecision,\n        isCompact: compact\n      });\n    }, [value, decimalPrecision, local, compact]);\n\n    if (validateValue(value)) {\n      return <span>{emptyPlaceHolder}</span>;\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={className}\n        id={id}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.FORMATTED_NUMBER, id)}\n      >\n        {rtl ? renderSuffix : renderPrefix}\n        <span>{calculatedValue}</span>\n        {rtl ? renderPrefix : renderSuffix}\n      </div>\n    );\n  }\n);\n\nObject.assign(FormattedNumber, {\n  formatNumber: formatNumber,\n  localFallBack: formatNumberConsts.DEFAULT_LOCAL\n});\n\nexport default FormattedNumber;\n"],"names":["FormattedNumber","forwardRef","_ref","ref","value","className","_ref$local","local","localFallBack","prefix","suffix","_ref$emptyPlaceHolder","emptyPlaceHolder","_ref$decimalPrecision","decimalPrecision","_ref$compact","compact","rtl","id","dataTestId","renderSuffix","useMemo","React","createElement","cx","styles","renderPrefix","calculatedValue","formatNumber","Number","precision","isCompact","validateValue","getTestId","ComponentDefaultTestId","FORMATTED_NUMBER","Object","assign","formatNumberConsts","DEFAULT_LOCAL"],"mappings":"kWA4CMA,IAAAA,EAGFC,GACF,SAAAC,EAcEC,GACE,IAbAC,EAAKF,EAALE,MACAC,EAASH,EAATG,UAASC,EAAAJ,EACTK,MAAAA,OAAK,IAAAD,EAAGN,EAAgBQ,cAAaF,EACrCG,EAAMP,EAANO,OACAC,EAAMR,EAANQ,OAAMC,EAAAT,EACNU,iBAAAA,OAAmB,IAAHD,EAAG,MAAKA,EAAAE,EAAAX,EACxBY,iBAAAA,OAAmB,IAAHD,EAAG,EAACA,EAAAE,EAAAb,EACpBc,QAAAA,OAAU,IAAHD,GAAOA,EACdE,EAAGf,EAAHe,IACAC,EAAEhB,EAAFgB,GACeC,EAAUjB,EAAzB,eAIIkB,EAAeC,GAAQ,WAC3B,OAAKX,EAEEY,EAAMC,cAAA,OAAA,CAAAlB,UAAWmB,EAAGC,EAAOf,SAAUA,GAFxB,IAGtB,GAAG,CAACA,IAEEgB,EAAeL,GAAQ,WAC3B,OAAKZ,EAEEa,EAAMC,cAAA,OAAA,CAAAlB,UAAWmB,EAAGC,EAAOhB,SAAUA,GAFxB,IAGtB,GAAG,CAACA,IAEEkB,EAAkBN,GAAQ,WAC9B,OAAOO,EAAaC,OAAOzB,GAAQ,CACjCG,MAAAA,EACAuB,UAAWhB,EACXiB,UAAWf,GAEd,GAAE,CAACZ,EAAOU,EAAkBP,EAAOS,IAEpC,OAAIgB,EAAc5B,GACTkB,EAAAC,cAAA,OAAA,KAAOX,GAIdU,uBACEnB,IAAKA,EACLE,UAAWA,EACXa,GAAIA,EAAE,cACOC,GAAcc,EAAUC,EAAuBC,iBAAkBjB,IAE7ED,EAAMG,EAAeM,EACtBJ,EAAAC,cAAA,OAAA,KAAOI,GACNV,EAAMS,EAAeN,EAG5B,IAGFgB,OAAOC,OAAOrC,EAAiB,CAC7B4B,aAAcA,EACdpB,cAAe8B,EAAmBC"}