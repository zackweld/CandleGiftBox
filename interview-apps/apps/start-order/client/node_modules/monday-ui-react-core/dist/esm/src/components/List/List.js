import{slicedToArray as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import e from"classnames";import r,{forwardRef as i,useRef as s,useState as o,useCallback as n,useMemo as a}from"react";import l from"../../hooks/useMergeRef.js";import m from"../../hooks/useKeyEvent/index.js";import{VirtualizedListItems as c}from"./VirtualizedListItems/VirtualizedListItems.js";import{keyCodes as u,UP_DOWN_ARROWS as d}from"../../constants/keyCodes.js";import{withStaticProps as f}from"../../types/withStaticProps.js";import{ListWrapperComponentType as p}from"./ListConstants.js";import{getTestId as v,ComponentDefaultTestId as y}from"../../tests/testIds.js";import{ListContext as b}from"./utils/ListContext.js";import{useListId as j,getListItemIndexById as L,getNextListItemIndex as I,getPrevListItemIndex as h,getListItemIdByIndex as k,getListItemComponentType as x}from"./utils/ListUtils.js";import A from"./List.module.scss.js";var E=i((function(i,f){var p=i.className,R=i.id,g=i.component,C=void 0===g?E.components.UL:g,O=i.children,P=i.ariaLabel,V=i.ariaDescribedBy,_=i["aria-controls"],D=i.renderOnlyVisibleItems,N=void 0!==D&&D,U=i.style,W=i["data-testid"],z=s(null),B=l(f,z),S=s([]),T=j(R),w=o(0),F=t(w,2),H=F[0],K=F[1],M=C,q=n((function(t){var e;K(L(S,t)),null===(e=null==z?void 0:z.current)||void 0===e||e.setAttribute("aria-activedescendant",t)}),[]),G=n((function(t){if(!N){t.preventDefault();var e=t.key===u.UP_ARROW,r=void 0;t.key===u.DOWN_ARROW&&S.current.length>H+1?r=I(H,S):e&&H>0&&(r=h(H,S)),void 0!==r&&(q(k(S,r)),S.current[r].focus())}}),[H,N,q]);m({keys:d,callback:G,ref:z});var J=a((function(){var t=Array.isArray(O)?O:[O];return N?t=r.createElement(c,null,t):(S.current=S.current.slice(0,t.length),t=r.Children.map(t,(function(t,e){if(!r.isValidElement(t))return t;var i=t.props.id||"".concat(T,"-item-").concat(e);return r.cloneElement(t,{ref:function(t){return S.current[e]=t},tabIndex:H===e?0:-1,id:i,component:x(C)})}))),t}),[O,C,H,T,N]);return r.createElement(b.Provider,{value:{updateFocusedItem:q}},r.createElement(M,{"data-testid":W||v(y.LIST,R),ref:B,style:U,className:e(A.list,p),id:T,"aria-label":P,"aria-describedby":V,"aria-controls":_,tabIndex:-1,role:"listbox"},J))})),R=f(E,{components:p});export{R as default};
//# sourceMappingURL=List.js.map
