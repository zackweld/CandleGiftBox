{"ast":null,"code":"import { slicedToArray as n } from \"../../../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport e, { useContext as r, createContext as t, useState as o, useMemo as u, useRef as i, useCallback as l } from \"react\";\nimport { useTable as c } from \"../TableContext/TableContext.js\";\nvar a = t(void 0),\n  f = function (r) {\n    var t = r.children,\n      f = c().tableRootRef,\n      v = o(!1),\n      d = n(v, 2),\n      s = d[0],\n      R = d[1],\n      m = o(null),\n      w = n(m, 2),\n      M = w[0],\n      b = w[1],\n      T = u(function () {\n        var n;\n        return null === (n = null == M ? void 0 : M.current) || void 0 === n ? void 0 : n.id;\n      }, [M]),\n      p = i(null),\n      g = l(function () {\n        clearTimeout(p.current), p.current = null;\n      }, []),\n      h = l(function (n) {\n        p.current = setTimeout(function () {\n          n();\n        }, 400);\n      }, []),\n      C = u(function () {\n        if (!(null == f ? void 0 : f.current) || !(null == M ? void 0 : M.current)) return 0;\n        var n = f.current.getBoundingClientRect().top;\n        return M.current.getBoundingClientRect().top - n;\n      }, [M, f]),\n      x = l(function (n) {\n        s || (null == M ? void 0 : M.current) === n.current || (g(), b(n));\n      }, [s, M, g]),\n      B = l(function () {\n        s || h(function () {\n          return b(null);\n        });\n      }, [s, h]),\n      P = l(function () {\n        s || g();\n      }, [s, g]),\n      H = l(function () {\n        s || b(null);\n      }, [s]),\n      j = l(function () {\n        R(!1), b(null);\n      }, []),\n      E = u(function () {\n        return {\n          hoveredRowId: T,\n          resetHoveredRow: j,\n          menuButtonPosition: C,\n          onMouseOverRow: x,\n          onMouseLeaveRow: B,\n          onMouseOverRowMenu: P,\n          onMouseLeaveRowMenu: H,\n          setTableMenuShown: function () {\n            return R(!0);\n          },\n          setTableMenuHidden: function () {\n            return R(!1);\n          }\n        };\n      }, [T, j, C, B, H, x, P]);\n    return e.createElement(a.Provider, {\n      value: E\n    }, t);\n  },\n  v = function () {\n    var n = r(a);\n    if (!n) throw Error(\"useTableRowMenuContext must be used within a TableRowMenuProvider\");\n    return n;\n  };\nexport { f as TableRowMenuProvider, v as useTableRowMenu };","map":{"version":3,"names":["a","t","f","TableRowMenuProvider","r","children","c","tableRootRef","v","o","d","n","s","R","m","w","M","b","T","u","current","id","p","i","g","l","clearTimeout","h","setTimeout","C","getBoundingClientRect","top","x","B","P","H","j","E","hoveredRowId","resetHoveredRow","menuButtonPosition","onMouseOverRow","onMouseLeaveRow","onMouseOverRowMenu","onMouseLeaveRowMenu","setTableMenuShown","setTableMenuHidden","e","createElement","Provider","value","useTableRowMenu","Error"],"sources":["/Users/zacharyweld/Documents/Code/CandleGiftBox/interview-apps/apps/start-order/client/node_modules/monday-ui-react-core/src/components/Table/context/TableRowMenuContext/TableRowMenuContext.tsx"],"sourcesContent":["import React, { createContext, useCallback, useContext, useMemo, useRef, useState } from \"react\";\nimport { ITableRowMenuContext, ITableRowMenuProviderProps } from \"./TableRowMenuContext.types\";\nimport { useTable } from \"../TableContext/TableContext\";\n\nconst TableRowMenuContext = createContext<ITableRowMenuContext | undefined>(undefined);\n\nexport const TableRowMenuProvider = ({ children }: ITableRowMenuProviderProps) => {\n  const { tableRootRef } = useTable();\n  const [isMenuOpen, setIsMenuOpen] = useState<boolean>(false);\n\n  const [hoveredRowRef, setHoveredRowRef] = useState<React.MutableRefObject<HTMLDivElement>>(null);\n  const hoveredRowId = useMemo<string>(() => hoveredRowRef?.current?.id, [hoveredRowRef]);\n\n  const rowMouseLeaveTimeoutId = useRef<ReturnType<typeof setTimeout>>(null);\n\n  const resetTimeout = useCallback(() => {\n    clearTimeout(rowMouseLeaveTimeoutId.current);\n    rowMouseLeaveTimeoutId.current = null;\n  }, []);\n\n  const startTimeout = useCallback((callback: () => void) => {\n    rowMouseLeaveTimeoutId.current = setTimeout(() => {\n      callback();\n    }, 400);\n  }, []);\n\n  const menuButtonPosition = useMemo<number>(() => {\n    if (!tableRootRef?.current || !hoveredRowRef?.current) return 0;\n    const tableRootTop = tableRootRef.current.getBoundingClientRect().top;\n    const rowTop = hoveredRowRef.current.getBoundingClientRect().top;\n    return rowTop - tableRootTop;\n  }, [hoveredRowRef, tableRootRef]);\n\n  const onMouseOverRow = useCallback(\n    (rowRef: React.MutableRefObject<HTMLDivElement>) => {\n      if (isMenuOpen || hoveredRowRef?.current === rowRef.current) return;\n      resetTimeout();\n      setHoveredRowRef(rowRef);\n    },\n    [isMenuOpen, hoveredRowRef, resetTimeout]\n  );\n\n  const onMouseLeaveRow = useCallback(() => {\n    if (isMenuOpen) return;\n    startTimeout(() => setHoveredRowRef(null));\n  }, [isMenuOpen, startTimeout]);\n\n  const onMouseOverRowMenu = useCallback(() => {\n    if (isMenuOpen) return;\n    resetTimeout();\n  }, [isMenuOpen, resetTimeout]);\n\n  const onMouseLeaveRowMenu = useCallback(() => {\n    if (isMenuOpen) return;\n    setHoveredRowRef(null);\n  }, [isMenuOpen]);\n\n  const resetHoveredRow = useCallback(() => {\n    setIsMenuOpen(false);\n    setHoveredRowRef(null);\n  }, []);\n\n  const contextValue = useMemo<ITableRowMenuContext>(\n    () => ({\n      hoveredRowId,\n      resetHoveredRow,\n      menuButtonPosition,\n      onMouseOverRow,\n      onMouseLeaveRow,\n      onMouseOverRowMenu,\n      onMouseLeaveRowMenu,\n      setTableMenuShown: () => setIsMenuOpen(true),\n      setTableMenuHidden: () => setIsMenuOpen(false)\n    }),\n    [\n      hoveredRowId,\n      resetHoveredRow,\n      menuButtonPosition,\n      onMouseLeaveRow,\n      onMouseLeaveRowMenu,\n      onMouseOverRow,\n      onMouseOverRowMenu\n    ]\n  );\n\n  return <TableRowMenuContext.Provider value={contextValue}>{children}</TableRowMenuContext.Provider>;\n};\n\nexport const useTableRowMenu = () => {\n  const context = useContext(TableRowMenuContext);\n  if (!context) {\n    throw new Error(\"useTableRowMenuContext must be used within a TableRowMenuProvider\");\n  }\n  return context;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}