{"ast":null,"code":"import { defineProperty as e } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { getTestId as t, ComponentDefaultTestId as i } from \"../../tests/testIds.js\";\nimport r from \"classnames\";\nimport o, { forwardRef as s, useRef as l, useMemo as n, useLayoutEffect as a } from \"react\";\nimport p from \"../Tooltip/Tooltip.js\";\nimport m from \"../../hooks/useIsOverflowing/useIsOverflowing.js\";\nimport f from \"../../hooks/useMergeRef.js\";\nimport g from \"./TextWithHighlight.module.scss.js\";\nvar c = function (e, t, i) {\n    return i ? o.createElement(arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : \"em\", {\n      className: r(g.highlightText, arguments.length > 4 ? arguments[4] : void 0),\n      key: t\n    }, e) : o.createElement(\"span\", {\n      key: t\n    }, e);\n  },\n  u = s(function (s, u) {\n    var d = s.className,\n      h = s.id,\n      v = s.text,\n      T = void 0 === v ? \"\" : v,\n      E = s.highlightTerm,\n      j = s.limit,\n      x = s.useEllipsis,\n      H = void 0 === x || x,\n      w = s.linesToClamp,\n      I = void 0 === w ? 3 : w,\n      y = s.ignoreCase,\n      k = void 0 === y || y,\n      N = s.allowTermSplit,\n      P = void 0 === N || N,\n      W = s.nonEllipsisTooltip,\n      _ = s.tooltipPosition,\n      C = s.wrappingTextTag,\n      G = void 0 === C ? \"em\" : C,\n      O = s.wrappingElementClassName,\n      R = s[\"data-testid\"],\n      $ = l(null),\n      b = f(u, $),\n      B = n(function () {\n        if (!T || !E || 0 === j) return T;\n        var e = E.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        P && (e = e.split(\" \").join(\"|\"));\n        for (var t = RegExp(\"(\".concat(e, \")\"), k ? \"i\" : \"\"), i = T.split(t), r = [], o = 0, s = 0, l = 0; i.length > l; l++) if (i[l]) {\n          var n = l % 2 == 1;\n          r.push(c(i[l], s++, n && (!j || 0 > j || j > o), G, O)), n && o++;\n        }\n        return r;\n      }, [T, E, j, k, P, G, O]),\n      L = m({\n        ref: H && $\n      });\n    a(function () {\n      $.current && $.current.style.setProperty(\"--heading-clamp-lines\", \"\" + I);\n    }, [$, I, L]);\n    var M = o.createElement(\"div\", {\n      ref: b,\n      className: r(g.textWithHighlightWrapper, d, e({}, g.withEllipsis, H)),\n      id: h,\n      \"data-testid\": R || t(i.TEXT_WITH_HIGHLIGHT, h)\n    }, B);\n    return L || W ? o.createElement(p, {\n      content: L ? T : W,\n      position: _\n    }, M) : M;\n  });\nexport { u as default };","map":{"version":3,"names":["c","getTextPart","e","t","i","o","createElement","arguments","length","className","r","g","highlightText","key","u","s","d","h","id","v","text","T","E","highlightTerm","j","limit","x","useEllipsis","H","w","linesToClamp","I","y","ignoreCase","k","N","allowTermSplit","P","W","nonEllipsisTooltip","_","tooltipPosition","C","wrappingTextTag","G","O","wrappingElementClassName","R","$","l","b","f","B","n","replace","split","join","RegExp","concat","push","L","m","ref","a","current","style","setProperty","M","textWithHighlightWrapper","withEllipsis","TEXT_WITH_HIGHLIGHT","p","content","position","default"],"sources":["/Users/zacharyweld/Documents/Code/CandleGiftBoxDemo/CandleGiftBox/interview-apps/apps/start-order/client/node_modules/monday-ui-react-core/src/components/TextWithHighlight/TextWithHighlight.tsx"],"sourcesContent":["import { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport cx from \"classnames\";\nimport React, { forwardRef, useLayoutEffect, useMemo, useRef } from \"react\";\nimport Tooltip from \"../../components/Tooltip/Tooltip\";\nimport useIsOverflowing from \"../../hooks/useIsOverflowing/useIsOverflowing\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport VibeComponentProps from \"../../types/VibeComponentProps\";\nimport { DialogPosition } from \"../../constants\";\nimport styles from \"./TextWithHighlight.module.scss\";\n\nconst getTextPart = (\n  text: string,\n  key: number,\n  shouldHighlight: boolean,\n  wrappingTextTag: keyof JSX.IntrinsicElements = \"em\",\n  wrappingElementClassName: string\n) => {\n  const WrappingElement = wrappingTextTag;\n  if (shouldHighlight) {\n    return (\n      <WrappingElement className={cx(styles.highlightText, wrappingElementClassName)} key={key}>\n        {text}\n      </WrappingElement>\n    );\n  }\n  return <span key={key}>{text}</span>;\n};\n\nexport interface TextWithHighlightProps extends VibeComponentProps {\n  /** Text to wrap */\n  text?: string;\n  highlightTerm?: string;\n  /** Number of highlighted parts */\n  limit?: number;\n  ignoreCase?: boolean;\n  /** Should use ellipsis */\n  useEllipsis?: boolean;\n  /** Allow highlight every word as a separate term */\n  allowTermSplit?: boolean;\n  linesToClamp?: number;\n  /** Tooltip to show when there is no overflow */\n  nonEllipsisTooltip?: string;\n  /** HTML tag to wrap the selected text */\n  wrappingTextTag?: keyof JSX.IntrinsicElements;\n  wrappingElementClassName?: string;\n  tooltipPosition?: DialogPosition;\n}\n\nconst TextWithHighlight: React.FC<TextWithHighlightProps> = forwardRef(\n  (\n    {\n      className,\n      id,\n      text = \"\",\n      highlightTerm,\n      limit,\n      useEllipsis = true,\n      linesToClamp = 3,\n      ignoreCase = true,\n      allowTermSplit = true,\n      nonEllipsisTooltip,\n      tooltipPosition,\n      wrappingTextTag = \"em\",\n      wrappingElementClassName,\n      \"data-testid\": dataTestId\n    },\n    ref\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n\n    const textWithHighlights = useMemo(() => {\n      if (!text || !highlightTerm || limit === 0) return text;\n      let finalTerm = escapeRegExp(highlightTerm);\n      if (allowTermSplit) {\n        finalTerm = finalTerm.split(\" \").join(\"|\");\n      }\n      const regex = new RegExp(`(${finalTerm})`, ignoreCase ? \"i\" : \"\");\n      const tokens = text.split(regex);\n      const parts = [];\n      // Tokens include the term search (in odd indices)\n      let highlightTermsCount = 0;\n      let key = 0;\n      for (let i = 0; i < tokens.length; i++) {\n        // skip empty tokens\n        if (tokens[i]) {\n          // adding highlight part\n          const isTermPart = i % 2 === 1;\n          const shouldHighlight = isTermPart && (!limit || limit < 0 || highlightTermsCount < limit);\n          parts.push(getTextPart(tokens[i], key++, shouldHighlight, wrappingTextTag, wrappingElementClassName));\n          if (isTermPart) highlightTermsCount++;\n        }\n      }\n\n      return parts;\n    }, [text, highlightTerm, limit, ignoreCase, allowTermSplit, wrappingTextTag, wrappingElementClassName]);\n\n    const isOverflowing = useIsOverflowing({ ref: useEllipsis && componentRef });\n\n    useLayoutEffect(() => {\n      if (componentRef.current) {\n        componentRef.current.style.setProperty(\"--heading-clamp-lines\", linesToClamp.toString());\n      }\n    }, [componentRef, linesToClamp, isOverflowing]);\n\n    const Element = (\n      <div\n        ref={mergedRef}\n        className={cx(styles.textWithHighlightWrapper, className, {\n          [styles.withEllipsis]: useEllipsis\n        })}\n        id={id}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.TEXT_WITH_HIGHLIGHT, id)}\n      >\n        {textWithHighlights}\n      </div>\n    );\n\n    if (isOverflowing || nonEllipsisTooltip) {\n      const tooltipContent = isOverflowing ? text : nonEllipsisTooltip;\n      return (\n        <Tooltip content={tooltipContent} position={tooltipPosition}>\n          {Element}\n        </Tooltip>\n      );\n    }\n    return Element;\n  }\n);\n\nexport default TextWithHighlight;\n\nfunction escapeRegExp(string: string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n"],"mappings":";;;;;;;;AAUA,IAAMA,CAAA,GAAc,SAAAC,CAClBC,CAAA,EACAC,CAAA,EACAC,CAAA;IAKA,OAAIA,CAAA,GAEAC,CAAA,CAAAC,aAAA,CAN2CC,SAAA,CAAAC,MAAA,mBAAAD,SAAA,MAAAA,SAAA,YAM3B;MAACE,SAAA,EAAWC,CAAA,CAAGC,CAAA,CAAOC,aAAA,EALVL,SAAA,CAAAC,MAAA,OAAAD,SAAA;MAKoDM,GAAA,EAAKV;IAAA,GAClFD,CAAA,IAIAG,CAAA,CAAAC,aAAA;MAAMO,GAAA,EAAKV;IAAA,GAAMD,CAAA,CAC1B;EAAA;EAsBMY,CAAA,GAAsDC,CAAA,CAC1D,UAAAA,CAAA,EAiBED,CAAA;IACE,IAhBAE,CAAA,GAASD,CAAA,CAATN,SAAA;MACAQ,CAAA,GAAEF,CAAA,CAAFG,EAAA;MAAEC,CAAA,GAAAJ,CAAA,CACFK,IAAA;MAAAC,CAAA,QAAO,MAAHF,CAAA,GAAG,KAAEA,CAAA;MACTG,CAAA,GAAaP,CAAA,CAAbQ,aAAA;MACAC,CAAA,GAAKT,CAAA,CAALU,KAAA;MAAKC,CAAA,GAAAX,CAAA,CACLY,WAAA;MAAAC,CAAA,QAAc,MAAHF,CAAA,IAAOA,CAAA;MAAAG,CAAA,GAAAd,CAAA,CAClBe,YAAA;MAAAC,CAAA,QAAe,MAAHF,CAAA,GAAG,IAACA,CAAA;MAAAG,CAAA,GAAAjB,CAAA,CAChBkB,UAAA;MAAAC,CAAA,QAAa,MAAHF,CAAA,IAAOA,CAAA;MAAAG,CAAA,GAAApB,CAAA,CACjBqB,cAAA;MAAAC,CAAA,QAAiB,MAAHF,CAAA,IAAOA,CAAA;MACrBG,CAAA,GAAkBvB,CAAA,CAAlBwB,kBAAA;MACAC,CAAA,GAAezB,CAAA,CAAf0B,eAAA;MAAeC,CAAA,GAAA3B,CAAA,CACf4B,eAAA;MAAAC,CAAA,QAAkB,MAAHF,CAAA,GAAG,OAAIA,CAAA;MACtBG,CAAA,GAAwB9B,CAAA,CAAxB+B,wBAAA;MACeC,CAAA,GAAUhC,CAAA,CAAzB;MAIIiC,CAAA,GAAeC,CAAA,CAAO;MACtBC,CAAA,GAAYC,CAAA,CAAYrC,CAAA,EAAKkC,CAAA;MAE7BI,CAAA,GAAqBC,CAAA,CAAQ;QACjC,KAAKhC,CAAA,KAASC,CAAA,IAA2B,MAAVE,CAAA,EAAa,OAAOH,CAAA;QACnD,IAAInB,CAAA,GAAyBoB,CAAA,CA4DnBgC,OAAA,CAAQ,uBAAuB;QA3DrCjB,CAAA,KACFnC,CAAA,GAAYA,CAAA,CAAUqD,KAAA,CAAM,KAAKC,IAAA,CAAK;QAQxC,KANA,IAAMrD,CAAA,GAAYsD,MAAA,KAAMC,MAAA,CAAKxD,CAAA,EAAS,MAAKgC,CAAA,GAAa,MAAM,KACxD9B,CAAA,GAASiB,CAAA,CAAKkC,KAAA,CAAMpD,CAAA,GACpBO,CAAA,GAAQ,IAEVL,CAAA,GAAsB,GACtBU,CAAA,GAAM,GACDkC,CAAA,GAAI,GAAO7C,CAAA,CAAOI,MAAA,GAAXyC,CAAA,EAAmBA,CAAA,IAEjC,IAAI7C,CAAA,CAAO6C,CAAA,GAAI;UAEb,IAAMI,CAAA,GAAaJ,CAAA,GAAI,KAAM;UAE7BvC,CAAA,CAAMiD,IAAA,CAAK3D,CAAA,CAAYI,CAAA,CAAO6C,CAAA,GAAIlC,CAAA,IADVsC,CAAA,MAAgB7B,CAAA,IAAiB,IAARA,CAAA,IAAmCA,CAAA,GAAtBnB,CAAA,GACJuC,CAAA,EAAiBC,CAAA,IACvEQ,CAAA,IAAYhD,CAAA,EACjB;QAAA;QAGH,OAAOK,CACT;MAAA,GAAG,CAACW,CAAA,EAAMC,CAAA,EAAeE,CAAA,EAAOU,CAAA,EAAYG,CAAA,EAAgBO,CAAA,EAAiBC,CAAA;MAEvEe,CAAA,GAAgBC,CAAA,CAAiB;QAAEC,GAAA,EAAKlC,CAAA,IAAeoB;MAAA;IAE7De,CAAA,CAAgB;MACVf,CAAA,CAAagB,OAAA,IACfhB,CAAA,CAAagB,OAAA,CAAQC,KAAA,CAAMC,WAAA,CAAY,yBAAyB,KAAAnC,CAAA,CAEnE;IAAA,GAAE,CAACiB,CAAA,EAAcjB,CAAA,EAAc6B,CAAA;IAEhC,IAAMO,CAAA,GACJ9D,CAAA,CACEC,aAAA;MAAAwD,GAAA,EAAKZ,CAAA;MACLzC,SAAA,EAAWC,CAAA,CAAGC,CAAA,CAAOyD,wBAAA,EAA0BpD,CAAA,EAASd,CAAA,KACrDS,CAAA,CAAO0D,YAAA,EAAezC,CAAA;MAEzBV,EAAA,EAAID,CAAA;MACS,eAAA8B,CAAA,IAAc5C,CAAA,CAAUC,CAAA,CAAuBkE,mBAAA,EAAqBrD,CAAA;IAAA,GAEhFmC,CAAA;IAIL,OAAIQ,CAAA,IAAiBtB,CAAA,GAGjBjC,CAAA,CAAAC,aAAA,CAACiE,CAAA,EAAO;MAACC,OAAA,EAFYZ,CAAA,GAAgBvC,CAAA,GAAOiB,CAAA;MAEVmC,QAAA,EAAUjC;IAAA,GACzC2B,CAAA,IAIAA,CACT;EAAA;AAAA,SAAArD,CAAA,IAAA4D,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}