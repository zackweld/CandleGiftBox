{"ast":null,"code":"import e, { forwardRef as t, useRef as o, useMemo as i, useCallback as n } from \"react\";\nimport r from \"classnames\";\nimport { comboboxItemRenderer as s } from \"../../ComboboxHelpers/ComboboxHelpers.js\";\nimport a from \"../../../VirtualizedList/VirtualizedList.js\";\nimport { COMBOBOX_CATEGORY_ITEM as l, COMBOBOX_OPTION_ITEM as m } from \"../ComboboxConstants.js\";\nimport c from \"./ComboboxItems.module.scss.js\";\nvar p = t(function (t, p) {\n  var d = t.className,\n    u = t.optionClassName,\n    f = t.categories,\n    C = t.options,\n    v = t.optionRenderer,\n    I = t.activeItemIndex,\n    b = t.visualFocusItemIndex,\n    g = t.onOptionClick,\n    y = t.onOptionEnter,\n    x = t.onOptionLeave,\n    h = t.optionLineHeight,\n    O = t.shouldScrollToSelectedItem,\n    L = t.renderOnlyVisibleOptions,\n    N = t.onActiveCategoryChanged,\n    R = t.maxOptionsWithoutScroll,\n    j = t.itemsMap,\n    k = t.stickyCategories,\n    E = t.id,\n    S = o(),\n    H = i(function () {\n      if (R) return {\n        height: h * Math.min(C.length + Object.keys(null != f ? f : {}).length, R + .5)\n      };\n    }, [R, h, C, f]),\n    V = n(function (e, t, o) {\n      return s({\n        stickyCategories: k,\n        item: e,\n        style: o,\n        optionEvents: {\n          onOptionClick: g,\n          onOptionEnter: y,\n          onOptionLeave: x\n        },\n        optionRenderData: {\n          className: u,\n          optionLineHeight: h,\n          optionRenderer: v,\n          visualFocusItemIndex: b,\n          scrollRef: L ? null : p,\n          activeItemIndex: I,\n          shouldScrollToSelectedItem: O\n        },\n        isVirtualized: L\n      });\n    }, [g, y, x, u, h, v, b, L, p, I, O]),\n    z = n(function (e) {\n      var t = e.firstItemId;\n      window.requestAnimationFrame(function () {\n        var e = j.get(t);\n        if (e && (e.type === l || e.type === m)) {\n          var o = e.type === m && e.categoryId ? e.categoryId : e.id;\n          if (o !== S.current) {\n            S.current = o;\n            var i = j.get(S.current);\n            N(i);\n          }\n        }\n      });\n    }, [j, N]);\n  return L ? e.createElement(a, {\n    ref: p,\n    className: r(c.optionsContainer, d),\n    items: C,\n    itemRenderer: V,\n    role: \"listbox\",\n    scrollableClassName: c.scrollableContainer,\n    onItemsRendered: z,\n    style: H,\n    id: E\n  }) : e.createElement(\"div\", {\n    className: r(c.scrollableContainer, c.optionsContainer, d),\n    role: \"listbox\",\n    id: E,\n    style: H,\n    ref: p\n  }, C.map(function (e, t) {\n    return V(e, t, void 0);\n  }));\n});\nexport { p as ComboboxItems };","map":{"version":3,"names":["p","t","d","className","u","optionClassName","f","categories","C","options","v","optionRenderer","I","activeItemIndex","b","visualFocusItemIndex","g","onOptionClick","y","onOptionEnter","x","onOptionLeave","h","optionLineHeight","O","shouldScrollToSelectedItem","L","renderOnlyVisibleOptions","N","onActiveCategoryChanged","R","maxOptionsWithoutScroll","j","itemsMap","k","stickyCategories","E","id","S","o","H","i","height","Math","min","length","Object","keys","V","n","e","s","item","style","optionEvents","optionRenderData","scrollRef","isVirtualized","z","firstItemId","window","requestAnimationFrame","get","type","l","m","categoryId","current","createElement","a","ref","r","c","optionsContainer","items","itemRenderer","role","scrollableClassName","scrollableContainer","onItemsRendered","map","ComboboxItems"],"sources":["/Users/zacharyweld/Documents/Code/CandleGiftBoxDemo/CandleGiftBox/interview-apps/apps/start-order/client/node_modules/monday-ui-react-core/src/components/Combobox/components/ComboboxItems/ComboboxItems.tsx"],"sourcesContent":["import React, { CSSProperties, forwardRef, RefObject, useCallback, useMemo, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { comboboxItemRenderer } from \"../../ComboboxHelpers/ComboboxHelpers\";\nimport VirtualizedList from \"../../../../components/VirtualizedList/VirtualizedList\";\nimport {\n  COMBOBOX_CATEGORY_ITEM,\n  COMBOBOX_OPTION_ITEM,\n  IComboboxCategoryMap,\n  IComboboxItem,\n  IComboboxOption,\n  IComboboxOptionEvents\n} from \"../ComboboxConstants\";\nimport styles from \"./ComboboxItems.module.scss\";\n\nexport interface ComboboxItemsProps extends IComboboxOptionEvents {\n  className?: string;\n  optionClassName?: string;\n  categories?: IComboboxCategoryMap;\n  options?: IComboboxItem[];\n  optionRenderer?: (option: IComboboxOption) => JSX.Element;\n  activeItemIndex?: number;\n  visualFocusItemIndex?: number;\n  optionLineHeight?: number;\n  shouldScrollToSelectedItem?: boolean;\n  renderOnlyVisibleOptions?: boolean;\n  onActiveCategoryChanged?: (category: IComboboxItem) => void;\n  maxOptionsWithoutScroll?: number;\n  itemsMap?: Map<string, IComboboxItem>;\n  stickyCategories?: boolean;\n  id?: string;\n}\n\nexport const ComboboxItems: React.FC<ComboboxItemsProps> = forwardRef(\n  (\n    {\n      className,\n      optionClassName,\n      categories,\n      options,\n      optionRenderer,\n      activeItemIndex,\n      visualFocusItemIndex,\n      onOptionClick,\n      onOptionEnter,\n      onOptionLeave,\n      optionLineHeight,\n      shouldScrollToSelectedItem,\n      renderOnlyVisibleOptions,\n      onActiveCategoryChanged,\n      maxOptionsWithoutScroll,\n      itemsMap,\n      stickyCategories,\n      id\n    },\n    ref: RefObject<HTMLDivElement>\n  ) => {\n    const activeCategoryId = useRef<string>();\n    const style = useMemo(() => {\n      if (maxOptionsWithoutScroll) {\n        // Adding 0.5 to show next option to indicate scroll is available\n        const maxCount = Math.min(options.length + Object.keys(categories ?? {}).length, maxOptionsWithoutScroll + 0.5);\n        return { height: optionLineHeight * maxCount };\n      }\n      return undefined;\n    }, [maxOptionsWithoutScroll, optionLineHeight, options, categories]);\n\n    const createItemElementRenderer = useCallback(\n      (item: IComboboxItem, index: number, style: CSSProperties) =>\n        comboboxItemRenderer({\n          stickyCategories,\n          item,\n          style,\n          optionEvents: {\n            onOptionClick,\n            onOptionEnter,\n            onOptionLeave\n          },\n          optionRenderData: {\n            className: optionClassName,\n            optionLineHeight,\n            optionRenderer,\n            visualFocusItemIndex,\n            scrollRef: renderOnlyVisibleOptions ? null : ref,\n            activeItemIndex,\n            shouldScrollToSelectedItem\n          },\n          isVirtualized: renderOnlyVisibleOptions\n        }),\n      [\n        onOptionClick,\n        onOptionEnter,\n        onOptionLeave,\n        optionClassName,\n        optionLineHeight,\n        optionRenderer,\n        visualFocusItemIndex,\n        renderOnlyVisibleOptions,\n        ref,\n        activeItemIndex,\n        shouldScrollToSelectedItem\n      ]\n    );\n\n    const onItemsRender = useCallback(\n      ({ firstItemId }: { firstItemId?: string }) => {\n        window.requestAnimationFrame(() => {\n          const itemData = itemsMap.get(firstItemId);\n          if (itemData && (itemData.type === COMBOBOX_CATEGORY_ITEM || itemData.type === COMBOBOX_OPTION_ITEM)) {\n            const newActiveCategoryId =\n              itemData.type === COMBOBOX_OPTION_ITEM && itemData.categoryId ? itemData.categoryId : itemData.id;\n\n            if (newActiveCategoryId !== activeCategoryId.current) {\n              activeCategoryId.current = newActiveCategoryId;\n              const categoryObject = itemsMap.get(activeCategoryId.current);\n              onActiveCategoryChanged(categoryObject);\n            }\n          }\n        });\n      },\n      [itemsMap, onActiveCategoryChanged]\n    );\n\n    let itemsElements;\n\n    // If we request to render only the items which visible in a given moment (optimization for very large lists)\n    if (renderOnlyVisibleOptions) {\n      itemsElements = (\n        <VirtualizedList\n          ref={ref}\n          className={cx(styles.optionsContainer, className)}\n          items={options}\n          itemRenderer={createItemElementRenderer}\n          role=\"listbox\"\n          scrollableClassName={styles.scrollableContainer}\n          onItemsRendered={onItemsRender}\n          style={style}\n          id={id}\n        />\n      );\n    } else {\n      itemsElements = (\n        <div\n          className={cx(styles.scrollableContainer, styles.optionsContainer, className)}\n          role=\"listbox\"\n          id={id}\n          style={style}\n          ref={ref}\n        >\n          {options.map((itemData, index) => createItemElementRenderer(itemData, index, undefined))}\n        </div>\n      );\n    }\n\n    return itemsElements;\n  }\n);\n"],"mappings":";;;;;;AAgCO,IAAMA,CAAA,GAA8CC,CAAA,CACzD,UAAAA,CAAA,EAqBED,CAAA;EACE,IApBAE,CAAA,GAASD,CAAA,CAATE,SAAA;IACAC,CAAA,GAAeH,CAAA,CAAfI,eAAA;IACAC,CAAA,GAAUL,CAAA,CAAVM,UAAA;IACAC,CAAA,GAAOP,CAAA,CAAPQ,OAAA;IACAC,CAAA,GAAcT,CAAA,CAAdU,cAAA;IACAC,CAAA,GAAeX,CAAA,CAAfY,eAAA;IACAC,CAAA,GAAoBb,CAAA,CAApBc,oBAAA;IACAC,CAAA,GAAaf,CAAA,CAAbgB,aAAA;IACAC,CAAA,GAAajB,CAAA,CAAbkB,aAAA;IACAC,CAAA,GAAanB,CAAA,CAAboB,aAAA;IACAC,CAAA,GAAgBrB,CAAA,CAAhBsB,gBAAA;IACAC,CAAA,GAA0BvB,CAAA,CAA1BwB,0BAAA;IACAC,CAAA,GAAwBzB,CAAA,CAAxB0B,wBAAA;IACAC,CAAA,GAAuB3B,CAAA,CAAvB4B,uBAAA;IACAC,CAAA,GAAuB7B,CAAA,CAAvB8B,uBAAA;IACAC,CAAA,GAAQ/B,CAAA,CAARgC,QAAA;IACAC,CAAA,GAAgBjC,CAAA,CAAhBkC,gBAAA;IACAC,CAAA,GAAEnC,CAAA,CAAFoC,EAAA;IAIIC,CAAA,GAAmBC,CAAA;IACnBC,CAAA,GAAQC,CAAA,CAAQ;MACpB,IAAIX,CAAA,EAGF,OAAO;QAAEY,MAAA,EAAQpB,CAAA,GADAqB,IAAA,CAAKC,GAAA,CAAIpC,CAAA,CAAQqC,MAAA,GAASC,MAAA,CAAOC,IAAA,CAAK,QAAAzC,CAAA,GAAAA,CAAA,GAAc,IAAIuC,MAAA,EAAQf,CAAA,GAA0B;MAAA,CAI9G;IAAA,GAAE,CAACA,CAAA,EAAyBR,CAAA,EAAkBd,CAAA,EAASF,CAAA;IAElD0C,CAAA,GAA4BC,CAAA,CAChC,UAACC,CAAA,EAAqBjD,CAAA,EAAesC,CAAA;MAAoB,OACvDY,CAAA,CAAqB;QACnBhB,gBAAA,EAAAD,CAAA;QACAkB,IAAA,EAAAF,CAAA;QACAG,KAAA,EAAAd,CAAA;QACAe,YAAA,EAAc;UACZrC,aAAA,EAAAD,CAAA;UACAG,aAAA,EAAAD,CAAA;UACAG,aAAA,EAAAD;QAAA;QAEFmC,gBAAA,EAAkB;UAChBpD,SAAA,EAAWC,CAAA;UACXmB,gBAAA,EAAAD,CAAA;UACAX,cAAA,EAAAD,CAAA;UACAK,oBAAA,EAAAD,CAAA;UACA0C,SAAA,EAAW9B,CAAA,GAA2B,OAAO1B,CAAA;UAC7Ca,eAAA,EAAAD,CAAA;UACAa,0BAAA,EAAAD;QAAA;QAEFiC,aAAA,EAAe/B;MAAA,EAEnB;IAAA,IACEV,CAAA,EACAE,CAAA,EACAE,CAAA,EACAhB,CAAA,EACAkB,CAAA,EACAZ,CAAA,EACAI,CAAA,EACAY,CAAA,EACA1B,CAAA,EACAY,CAAA,EACAY,CAAA;IAIEkC,CAAA,GAAgBT,CAAA,CACpB,UAAAC,CAAA;MAA8C,IAA3CjD,CAAA,GAAWiD,CAAA,CAAXS,WAAA;MACDC,MAAA,CAAOC,qBAAA,CAAsB;QAC3B,IAAMX,CAAA,GAAWlB,CAAA,CAAS8B,GAAA,CAAI7D,CAAA;QAC9B,IAAIiD,CAAA,KAAaA,CAAA,CAASa,IAAA,KAASC,CAAA,IAA0Bd,CAAA,CAASa,IAAA,KAASE,CAAA,GAAuB;UACpG,IAAM1B,CAAA,GACJW,CAAA,CAASa,IAAA,KAASE,CAAA,IAAwBf,CAAA,CAASgB,UAAA,GAAahB,CAAA,CAASgB,UAAA,GAAahB,CAAA,CAASb,EAAA;UAEjG,IAAIE,CAAA,KAAwBD,CAAA,CAAiB6B,OAAA,EAAS;YACpD7B,CAAA,CAAiB6B,OAAA,GAAU5B,CAAA;YAC3B,IAAME,CAAA,GAAiBT,CAAA,CAAS8B,GAAA,CAAIxB,CAAA,CAAiB6B,OAAA;YACrDvC,CAAA,CAAwBa,CAAA,CACzB;UAAA;QACF;MACH,EACF;IAAA,GACA,CAACT,CAAA,EAAUJ,CAAA;EAkCb,OA5BIF,CAAA,GAEAwB,CAAA,CAACkB,aAAA,CAAAC,CAAA;IACCC,GAAA,EAAKtE,CAAA;IACLG,SAAA,EAAWoE,CAAA,CAAGC,CAAA,CAAOC,gBAAA,EAAkBvE,CAAA;IACvCwE,KAAA,EAAOlE,CAAA;IACPmE,YAAA,EAAc3B,CAAA;IACd4B,IAAA,EAAK;IACLC,mBAAA,EAAqBL,CAAA,CAAOM,mBAAA;IAC5BC,eAAA,EAAiBrB,CAAA;IACjBL,KAAA,EAAOb,CAAA;IACPH,EAAA,EAAID;EAAA,KAKNc,CAAA,CAAAkB,aAAA;IACEjE,SAAA,EAAWoE,CAAA,CAAGC,CAAA,CAAOM,mBAAA,EAAqBN,CAAA,CAAOC,gBAAA,EAAkBvE,CAAA;IACnE0E,IAAA,EAAK;IACLvC,EAAA,EAAID,CAAA;IACJiB,KAAA,EAAOb,CAAA;IACP8B,GAAA,EAAKtE;EAAA,GAEJQ,CAAA,CAAQwE,GAAA,CAAI,UAAC9B,CAAA,EAAUjD,CAAA;IAAK,OAAK+C,CAAA,CAA0BE,CAAA,EAAUjD,CAAA,OAAO,EAAU;EAAA,GAM/F;AAAA;AAAA,SAAAD,CAAA,IAAAiF,aAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}