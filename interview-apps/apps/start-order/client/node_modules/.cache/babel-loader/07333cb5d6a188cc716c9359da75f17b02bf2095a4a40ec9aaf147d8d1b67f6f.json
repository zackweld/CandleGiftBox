{"ast":null,"code":"import { __rest as t } from \"../../../../_virtual/_tslib.js\";\nimport e, { forwardRef as o, useCallback as r, useEffect as i } from \"react\";\nimport l from \"../TableBody/TableBody.js\";\nimport s from \"./TableVirtualizedBody.module.scss.js\";\nimport { FixedSizeList as n } from \"react-window\";\nimport { useTable as a } from \"../context/TableContext/TableContext.js\";\nimport m from \"classnames\";\nimport { getTestId as c } from \"../../../tests/testIds.js\";\nimport { ComponentDefaultTestId as d } from \"../../../tests/constants.js\";\nimport { RowHeights as u } from \"../Table/TableConsts.js\";\nimport f from \"react-virtualized-auto-sizer\";\nimport { useTableRowMenu as p } from \"../context/TableRowMenuContext/TableRowMenuContext.js\";\nvar b = o(function (o, b) {\n  var T = o.items,\n    v = o.rowRenderer,\n    j = o.onScroll,\n    h = o.id,\n    w = o.className,\n    x = o[\"data-testid\"],\n    y = a(),\n    z = y.size,\n    R = y.virtualizedListRef,\n    g = y.onVirtualizedListScroll,\n    B = y.markTableAsVirtualized,\n    C = p().resetHoveredRow,\n    E = r(function (t) {\n      C(), g(t);\n    }, [C, g]);\n  i(function () {\n    B();\n  }, [B]);\n  var S = r(function (o) {\n      var r,\n        i = o.index,\n        l = o.style,\n        s = t(l, [\"width\"]),\n        n = v(T[i]);\n      return e.cloneElement(n, {\n        style: Object.assign(Object.assign({}, s), null === (r = n.props) || void 0 === r ? void 0 : r.style),\n        key: i\n      });\n    }, [T, v]),\n    L = r(function (t) {\n      null == j || j(t.scrollDirection, t.scrollOffset, t.scrollUpdateWasRequested);\n    }, [j]);\n  return e.createElement(l, {\n    className: m(s.tableBody, w),\n    id: h,\n    \"data-testid\": x || c(d.TABLE_VIRTUALIZED_BODY, h),\n    ref: b\n  }, (null == T ? void 0 : T.length) && e.createElement(f, {\n    onScroll: E\n  }, function (t) {\n    return e.createElement(n, {\n      itemSize: u[z],\n      height: t.height,\n      itemCount: T.length,\n      width: t.width,\n      onScroll: L,\n      outerRef: function (t) {\n        R.current = t;\n      }\n    }, S);\n  }));\n});\nexport { b as default };","map":{"version":3,"names":["b","o","T","items","v","rowRenderer","j","onScroll","h","id","w","className","x","y","a","z","size","R","virtualizedListRef","g","onVirtualizedListScroll","B","markTableAsVirtualized","C","p","resetHoveredRow","E","r","t","i","S","index","l","style","s","n","e","cloneElement","Object","assign","props","key","L","scrollDirection","scrollOffset","scrollUpdateWasRequested","createElement","m","tableBody","c","d","TABLE_VIRTUALIZED_BODY","ref","length","f","itemSize","u","height","itemCount","width","outerRef","current","default"],"sources":["/Users/zacharyweld/Documents/Code/CandleGiftBox/interview-apps/apps/start-order/client/node_modules/monday-ui-react-core/src/components/Table/TableVirtualizedBody/TableVirtualizedBody.tsx"],"sourcesContent":["import React, { ComponentType, forwardRef, UIEventHandler, useCallback, useEffect } from \"react\";\nimport { VibeComponentProps } from \"../../../types\";\nimport TableBody from \"../TableBody/TableBody\";\nimport styles from \"./TableVirtualizedBody.module.scss\";\nimport { FixedSizeList as List, ListChildComponentProps, ScrollDirection } from \"react-window\";\nimport { useTable } from \"../context/TableContext/TableContext\";\nimport cx from \"classnames\";\nimport { getTestId } from \"../../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId } from \"../../../tests/constants\";\nimport { RowHeights } from \"../Table/TableConsts\";\nimport AutoSizer, { Size as AutoSizerSize } from \"react-virtualized-auto-sizer\";\nimport { useTableRowMenu } from \"../context/TableRowMenuContext/TableRowMenuContext\";\n\nexport type TableVirtualizedRow = Record<string, unknown> & { id: string };\n\nexport interface ITableVirtualizedBodyProps<T extends TableVirtualizedRow = TableVirtualizedRow>\n  extends VibeComponentProps {\n  items: T[];\n  rowRenderer: (item: T) => JSX.Element;\n  onScroll?: (horizontalScrollDirection: ScrollDirection, scrollTop: number, scrollUpdateWasRequested: boolean) => void;\n}\n\nconst TableVirtualizedBody = forwardRef(\n  <T extends TableVirtualizedRow = TableVirtualizedRow>(\n    { items, rowRenderer, onScroll, id, className, \"data-testid\": dataTestId }: ITableVirtualizedBodyProps<T>,\n    ref: React.ForwardedRef<HTMLDivElement>\n  ) => {\n    const { size, virtualizedListRef, onVirtualizedListScroll, markTableAsVirtualized } = useTable();\n    const { resetHoveredRow } = useTableRowMenu();\n\n    const onAutoSizerScroll = useCallback<UIEventHandler<HTMLDivElement>>(\n      e => {\n        resetHoveredRow();\n        onVirtualizedListScroll(e);\n      },\n      [resetHoveredRow, onVirtualizedListScroll]\n    );\n\n    useEffect(() => {\n      markTableAsVirtualized();\n    }, [markTableAsVirtualized]);\n\n    const itemRenderer = useCallback<ComponentType<ListChildComponentProps<TableVirtualizedRow>>>(\n      ({ index, style: { width: _width, ...style } }) => {\n        const currentItem = items[index];\n        const element = rowRenderer(currentItem);\n        return React.cloneElement(element, {\n          style: { ...style, ...element.props?.style },\n          key: index\n        });\n      },\n      [items, rowRenderer]\n    );\n\n    const handleVirtualizedVerticalScroll = useCallback(\n      ({\n        scrollDirection,\n        scrollOffset,\n        scrollUpdateWasRequested\n      }: {\n        scrollDirection: ScrollDirection;\n        scrollOffset: number;\n        scrollUpdateWasRequested: boolean;\n      }) => {\n        onScroll?.(scrollDirection, scrollOffset, scrollUpdateWasRequested);\n      },\n      [onScroll]\n    );\n\n    return (\n      <TableBody\n        className={cx(styles.tableBody, className)}\n        id={id}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.TABLE_VIRTUALIZED_BODY, id)}\n        ref={ref}\n      >\n        {items?.length && (\n          <AutoSizer onScroll={onAutoSizerScroll}>\n            {({ height, width }: AutoSizerSize) => (\n              <List\n                itemSize={RowHeights[size]}\n                height={height}\n                itemCount={items.length}\n                width={width}\n                onScroll={handleVirtualizedVerticalScroll}\n                outerRef={element => {\n                  virtualizedListRef.current = element;\n                }}\n              >\n                {itemRenderer}\n              </List>\n            )}\n          </AutoSizer>\n        )}\n      </TableBody>\n    );\n  }\n);\n\nexport default TableVirtualizedBody;\n"],"mappings":";;;;;;;;;;;;AAsBM,IAAAA,CAAA,GAAuBC,CAAA,CAC3B,UAAAA,CAAA,EAEED,CAAA;EACE,IAFAE,CAAA,GAAKD,CAAA,CAALE,KAAA;IAAOC,CAAA,GAAWH,CAAA,CAAXI,WAAA;IAAaC,CAAA,GAAQL,CAAA,CAARM,QAAA;IAAUC,CAAA,GAAEP,CAAA,CAAFQ,EAAA;IAAIC,CAAA,GAAST,CAAA,CAATU,SAAA;IAA0BC,CAAA,GAAUX,CAAA,CAAzB;IAG/CY,CAAA,GAAsFC,CAAA;IAA9EC,CAAA,GAAIF,CAAA,CAAJG,IAAA;IAAMC,CAAA,GAAkBJ,CAAA,CAAlBK,kBAAA;IAAoBC,CAAA,GAAuBN,CAAA,CAAvBO,uBAAA;IAAyBC,CAAA,GAAsBR,CAAA,CAAtBS,sBAAA;IACnDC,CAAA,GAAoBC,CAAA,GAApBC,eAAA;IAEFC,CAAA,GAAoBC,CAAA,CACxB,UAAAC,CAAA;MACEL,CAAA,IACAJ,CAAA,CAAwBS,CAAA,CAC1B;IAAA,GACA,CAACL,CAAA,EAAiBJ,CAAA;EAGpBU,CAAA,CAAU;IACRR,CAAA,EACF;EAAA,GAAG,CAACA,CAAA;EAEJ,IAAMS,CAAA,GAAeH,CAAA,CACnB,UAAC1B,CAAA;MAAA,IAAA0B,CAAA;QAAEE,CAAA,GAAK5B,CAAA,CAAL8B,KAAA;QAAOC,CAAA,GAAA/B,CAAA,CAAAgC,KAAA;QAA2BC,CAAA,GAAKN,CAAA,CAAAI,CAAA,EAAzB;QAETG,CAAA,GAAU/B,CAAA,CADIF,CAAA,CAAM2B,CAAA;MAE1B,OAAOO,CAAA,CAAMC,YAAA,CAAaF,CAAA,EAAS;QACjCF,KAAA,EAAKK,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOL,CAAA,GAAyB,UAAfP,CAAA,GAAAQ,CAAA,CAAQK,KAAA,UAAO,MAAAb,CAAA,YAAAA,CAAA,CAAAM,KAAA;QACrCQ,GAAA,EAAKZ;MAAA,EAET;IAAA,GACA,CAAC3B,CAAA,EAAOE,CAAA;IAGJsC,CAAA,GAAkCf,CAAA,CACtC,UAAAC,CAAA;MASE,QAAAtB,CAAA,IAAAA,CAAA,CAResB,CAAA,CAAfe,eAAA,EACYf,CAAA,CAAZgB,YAAA,EACwBhB,CAAA,CAAxBiB,wBAAA,CAOF;IAAA,GACA,CAACvC,CAAA;EAGH,OACE8B,CAAA,CAAAU,aAAA,CAACd,CAAA,EAAS;IACRrB,SAAA,EAAWoC,CAAA,CAAGb,CAAA,CAAOc,SAAA,EAAWtC,CAAA;IAChCD,EAAA,EAAID,CAAA;IAAE,eACOI,CAAA,IAAcqC,CAAA,CAAUC,CAAA,CAAuBC,sBAAA,EAAwB3C,CAAA;IACpF4C,GAAA,EAAKpD;EAAA,IAEJ,QAAAE,CAAA,YAAAA,CAAA,CAAOmD,MAAA,KACNjB,CAAA,CAACU,aAAA,CAAAQ,CAAA;IAAU/C,QAAA,EAAUmB;EAAA,GAClB,UAAAE,CAAA;IAAgB,OACfQ,CAAA,CAAAU,aAAA,CAACX,CAAA,EAAI;MACHoB,QAAA,EAAUC,CAAA,CAAWzC,CAAA;MACrB0C,MAAA,EAHM7B,CAAA,CAAN6B,MAAA;MAIAC,SAAA,EAAWxD,CAAA,CAAMmD,MAAA;MACjBM,KAAA,EALa/B,CAAA,CAAL+B,KAAA;MAMRpD,QAAA,EAAUmC,CAAA;MACVkB,QAAA,EAAU,SAAAA,CAAAhC,CAAA;QACRX,CAAA,CAAmB4C,OAAA,GAAUjC,CAC/B;MAAA;IAAA,GAECE,CAAA,CAEJ;EAAA,GAKX;AAAA;AAAA,SAAA9B,CAAA,IAAA8D,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}