{"ast":null,"code":"import { slicedToArray as e } from \"../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { useState as n, useCallback as r, useEffect as t } from \"react\";\nimport { last as i } from \"lodash-es\";\nimport o from \"./useResizeObserver.js\";\nfunction l(l) {\n  var u = l.ref,\n    c = l.children,\n    a = l.paddingSize,\n    f = l.resizeDebounceTime,\n    d = l.ignoreLast,\n    s = n(null),\n    h = e(s, 2),\n    g = h[0],\n    m = h[1],\n    p = r(function (e) {\n      m(e.borderBoxSize.inlineSize);\n    }, [m]);\n  o({\n    ref: u,\n    callback: p,\n    debounceTime: f\n  });\n  var v = n([]),\n    L = e(v, 2),\n    b = L[0],\n    z = L[1],\n    x = n(null),\n    S = e(x, 2),\n    T = S[0],\n    j = S[1];\n  return t(function () {\n    if (d) {\n      if (!b.slice(0, -1).find(function (e) {\n        return e.totalLength > g - a;\n      })) j(-1);else {\n        var e = b.length > 0 ? i(b).childLength : 0;\n        j(b.findIndex(function (n) {\n          return n.totalLength > g - a - e;\n        }));\n      }\n    } else j(b.findIndex(function (e) {\n      return e.totalLength > g - a;\n    }));\n  }, [b, g, j, a, d]), t(function () {\n    if (u.current) {\n      var e = [],\n        n = 0;\n      u.current.childNodes.forEach(function (r) {\n        var t = r.clientWidth;\n        e.push({\n          childLength: t,\n          totalLength: n += t\n        });\n      }), z(e);\n    }\n  }, [c, u, z]), T;\n}\nexport { l as default };","map":{"version":3,"names":["l","u","ref","c","children","a","paddingSize","f","resizeDebounceTime","d","ignoreLast","s","n","h","e","g","m","p","r","borderBoxSize","inlineSize","o","callback","debounceTime","v","L","b","z","x","S","T","j","t","slice","find","totalLength","length","i","childLength","findIndex","current","childNodes","forEach","clientWidth","push","default"],"sources":["/Users/zacharyweld/Documents/Code/CandleGiftBoxDemo/CandleGiftBox/interview-apps/apps/start-order/client/node_modules/monday-ui-react-core/src/hooks/useElementsOverflowingIndex.ts"],"sourcesContent":["import { ReactNode, RefObject, useCallback, useEffect, useState } from \"react\";\nimport { last } from \"lodash-es\";\nimport useResizeObserver from \"./useResizeObserver\";\n\n// Use this hook when you want to get the index of the child which should be hidden from\ntype AggregatedChildResult = { childLength: number; totalLength: number };\n\nfunction useElementsOverflowingIndex({\n  ref,\n  children,\n  paddingSize,\n  resizeDebounceTime,\n  ignoreLast\n}: {\n  ref: RefObject<HTMLElement>;\n  children: ReactNode;\n  paddingSize: number;\n  resizeDebounceTime: number;\n  ignoreLast: boolean;\n}) {\n  const [size, setSize] = useState<number>(null);\n\n  const onResize = useCallback(\n    ({ borderBoxSize }: { borderBoxSize: ResizeObserverSize }) => {\n      setSize(borderBoxSize.inlineSize);\n    },\n    [setSize]\n  );\n  useResizeObserver({\n    ref,\n    callback: onResize,\n    debounceTime: resizeDebounceTime\n  });\n\n  const [aggregatedChildLengths, setAggregatedChildLengths] = useState<Array<AggregatedChildResult>>([]);\n  const [indexToSplit, setIndexToSplit] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (ignoreLast) {\n      const withoutLast = aggregatedChildLengths.slice(0, -1);\n      const allInWithoutLast = !withoutLast.find(({ totalLength }) => totalLength > size - paddingSize);\n      if (allInWithoutLast) {\n        setIndexToSplit(-1);\n      } else {\n        const lastSize = aggregatedChildLengths.length > 0 ? last(aggregatedChildLengths).childLength : 0;\n        setIndexToSplit(\n          aggregatedChildLengths.findIndex(({ totalLength }) => totalLength > size - paddingSize - lastSize)\n        );\n      }\n    } else {\n      setIndexToSplit(aggregatedChildLengths.findIndex(({ totalLength }) => totalLength > size - paddingSize));\n    }\n  }, [aggregatedChildLengths, size, setIndexToSplit, paddingSize, ignoreLast]);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    const childLengthsArray: Array<AggregatedChildResult> = [];\n    let totalLength = 0;\n    ref.current.childNodes.forEach((node: HTMLElement) => {\n      const childLength = node.clientWidth;\n      totalLength += childLength;\n      childLengthsArray.push({ childLength, totalLength });\n    });\n    setAggregatedChildLengths(childLengthsArray);\n  }, [children, ref, setAggregatedChildLengths]);\n\n  return indexToSplit;\n}\n\nexport default useElementsOverflowingIndex;\n"],"mappings":";;;;AAOA,SAASA,EAA2BA,CAAA;EAYnC,IAXCC,CAAA,GAAGD,CAAA,CAAHE,GAAA;IACAC,CAAA,GAAQH,CAAA,CAARI,QAAA;IACAC,CAAA,GAAWL,CAAA,CAAXM,WAAA;IACAC,CAAA,GAAkBP,CAAA,CAAlBQ,kBAAA;IACAC,CAAA,GAAUT,CAAA,CAAVU,UAAA;IAQAC,CAAA,GAAwBC,CAAA,CAAiB;IAAKC,CAAA,GAAAC,CAAA,CAAAH,CAAA;IAAvCI,CAAA,GAAIF,CAAA;IAAEG,CAAA,GAAOH,CAAA;IAEdI,CAAA,GAAWC,CAAA,CACf,UAAAJ,CAAA;MACEE,CAAA,CADcF,CAAA,CAAbK,aAAA,CACqBC,UAAA,CACxB;IAAA,GACA,CAACJ,CAAA;EAEHK,CAAA,CAAkB;IAChBnB,GAAA,EAAAD,CAAA;IACAqB,QAAA,EAAUL,CAAA;IACVM,YAAA,EAAchB;EAAA;EAGhB,IAAAiB,CAAA,GAA4DZ,CAAA,CAAuC;IAAGa,CAAA,GAAAX,CAAA,CAAAU,CAAA;IAA/FE,CAAA,GAAsBD,CAAA;IAAEE,CAAA,GAAyBF,CAAA;IACxDG,CAAA,GAAwChB,CAAA,CAAwB;IAAKiB,CAAA,GAAAf,CAAA,CAAAc,CAAA;IAA9DE,CAAA,GAAYD,CAAA;IAAEE,CAAA,GAAeF,CAAA;EA+BpC,OA7BAG,CAAA,CAAU;IACR,IAAIvB,CAAA;MAGF,KAFoBiB,CAAA,CAAuBO,KAAA,CAAM,IAAI,GACfC,IAAA,CAAK,UAAApB,CAAA;QAAc,OAAAA,CAAA,CAAXqB,WAAA,GAAgCpB,CAAA,GAAOV,CAAA;MAAA,IAEnF0B,CAAA,EAAiB,QACZ;QACL,IAAMjB,CAAA,GAAWY,CAAA,CAAuBU,MAAA,GAAS,IAAIC,CAAA,CAAKX,CAAA,EAAwBY,WAAA,GAAc;QAChGP,CAAA,CACEL,CAAA,CAAuBa,SAAA,CAAU,UAAA3B,CAAA;UAAc,OAAAA,CAAA,CAAXuB,WAAA,GAAgCpB,CAAA,GAAOV,CAAA,GAAcS,CAAQ;QAAA,GAEpG;MAAA;IAAA,OAEDiB,CAAA,CAAgBL,CAAA,CAAuBa,SAAA,CAAU,UAAAzB,CAAA;MAAc,OAAAA,CAAA,CAAXqB,WAAA,GAAgCpB,CAAA,GAAOV,CAAW;IAAA,GAE1G;EAAA,GAAG,CAACqB,CAAA,EAAwBX,CAAA,EAAMgB,CAAA,EAAiB1B,CAAA,EAAaI,CAAA,IAEhEuB,CAAA,CAAU;IACR,IAAK/B,CAAA,CAAIuC,OAAA,EAAT;MACA,IAAM1B,CAAA,GAAkD;QACpDF,CAAA,GAAc;MAClBX,CAAA,CAAIuC,OAAA,CAAQC,UAAA,CAAWC,OAAA,CAAQ,UAACxB,CAAA;QAC9B,IAAMc,CAAA,GAAcd,CAAA,CAAKyB,WAAA;QAEzB7B,CAAA,CAAkB8B,IAAA,CAAK;UAAEN,WAAA,EAAAN,CAAA;UAAaG,WAAA,EADtCvB,CAAA,IAAeoB;QAAA,EAEjB;MAAA,IACAL,CAAA,CAA0Bb,CAAA,CARR;IAAA;EASnB,GAAE,CAACX,CAAA,EAAUF,CAAA,EAAK0B,CAAA,IAEZG,CACT;AAAA;AAAA,SAAA9B,CAAA,IAAA6C,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}